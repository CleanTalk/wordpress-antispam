{"version":3,"file":"cleantalk-dashboard-widget.min.js","sources":["cleantalk-dashboard-widget.js"],"sourcesContent":["jQuery(document).ready(function(){\n\n\t// Set \"refresh\" link handler\n\tjQuery(\".ct_widget_refresh_link\").on('click', function(){\n\t\tjQuery('.ct_preloader').show();\n\t\tsetTimeout(function(){window.scrollTo(0, jQuery('#ct_widget_wrapper').offset().top - 130);}, 1);\n\t\tsetTimeout(function(){jQuery(\"#ct_refresh_form\").submit();}, 2500);\n\t});\n\n\tif(location.hash == '#ct_widget')\n\t\tsetTimeout(function(){window.scrollTo(0, jQuery('#ct_widget_wrapper').offset().top - 130);}, 1);\n\n\t// Fixing default wrapper style\n\tjQuery(\"#ct_widget_wrapper\").parent().css('padding', 0);\n\n\tlocale = navigator.language || navigator.userLanguage;\n\n\tvar date_formatter = new Intl.DateTimeFormat(locale, {\n\t\tmonth: \"short\",\n\t\tday: \"numeric\"\n\t});\n\n\tfunction reformatWidgetData(apbctDashboardWidget){\n\t\tlet widgetData = {'labels':[],'counts':[]}\n\t\tfor (let i = 0; i < apbctDashboardWidget.length; i++) {\n\t\t\twidgetData.labels.push(date_formatter.format(new Date(apbctDashboardWidget[i]['0'])))\n\t\t\twidgetData.counts.push(apbctDashboardWidget[i]['1'])\n\t\t}\n\t\treturn widgetData\n\t}\n\n\tconst ctx = document.getElementById('ct_widget_chart')\n\tlet widgetData = reformatWidgetData(apbctDashboardWidget['data'])\n\n\tnew Chart(ctx, {\n\t\ttype: 'bar',\n\t\tdata: {\n\t\t\tlabels: widgetData.labels,\n\t\t\tdatasets: [{\n\t\t\t\tlabel: 'Requests blocked',\n\t\t\t\tdata: widgetData.counts,\n\t\t\t\tborderWidth: 1,\n\t\t\t\tbackgroundColor: 'steelblue'\n\t\t\t}]\n\t\t},\n\t\toptions: {\n\t\t\tlegend: {\n\t\t\t\tdisplay: false\n\t\t\t},\n\t\t\tmaintainAspectRatio: false,\n\t\t\tresponsive: true,\n\t\t\tscales: {\n\t\t\t\ty: {\n\t\t\t\t\tbeginAtZero: true\n\t\t\t\t}\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tdisplay: true,\n\t\t\t\ttext: 'Requests were blocked by Anti-Spam and SpamFireWall',\n\t\t\t\tfontSize: 18\n\t\t\t},\n\t\t\tplugins: {\n\t\t\t\tlegend: {\n\t\t\t\t\tdisplay: false\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\ttext: 'Requests were blocked by Anti-Spam and SpamFireWall',\n\t\t\t\t\tfont: {\n\t\t\t\t\t\tsize: 18,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\telements: {\n\t\t\t\tbar:{\n\t\t\t\t\tbackgroundColor: 'steelblue'\n\t\t\t\t}\n\t\t\t},\n\t\t\tanimations: {\n\t\t\t\ttension: {\n\t\t\t\t\tduration: 1000,\n\t\t\t\t\teasing: 'linear',\n\t\t\t\t\tfrom: 1,\n\t\t\t\t\tto: 0,\n\t\t\t\t\tloop: true\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t});\n\n});"],"names":["jQuery","document","ready","on","show","setTimeout","window","scrollTo","offset","top","submit","location","hash","parent","css","locale","navigator","language","userLanguage","date_formatter","Intl","DateTimeFormat","month","day","ctx","getElementById","widgetData","apbctDashboardWidget","let","labels","counts","i","length","push","format","Date","Chart","type","data","datasets","label","borderWidth","backgroundColor","options","legend","display","maintainAspectRatio","responsive","scales","y","beginAtZero","title","text","fontSize","plugins","font","size","elements","bar","animations","tension","duration","easing","from","to","loop"],"mappings":"AAAAA,OAAOC,QAAQ,EAAEC,MAAM,WAGtBF,OAAO,yBAAyB,EAAEG,GAAG,QAAS,WAC7CH,OAAO,eAAe,EAAEI,KAAK,EAC7BC,WAAW,WAAWC,OAAOC,SAAS,EAAGP,OAAO,oBAAoB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CAAE,EAAG,CAAC,EAC9FJ,WAAW,WAAWL,OAAO,kBAAkB,EAAEU,OAAO,CAAE,EAAG,IAAI,CAClE,CAAC,EAEmB,cAAjBC,SAASC,MACXP,WAAW,WAAWC,OAAOC,SAAS,EAAGP,OAAO,oBAAoB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CAAE,EAAG,CAAC,EAG/FT,OAAO,oBAAoB,EAAEa,OAAO,EAAEC,IAAI,UAAW,CAAC,EAEtDC,OAASC,UAAUC,UAAYD,UAAUE,aAEzC,IAAIC,EAAiB,IAAIC,KAAKC,eAAeN,OAAQ,CACpDO,MAAO,QACPC,IAAK,SACN,CAAC,EAWD,IAAMC,EAAMvB,SAASwB,eAAe,iBAAiB,EACjDC,GAVwBC,IAC3BC,IAAIF,EAAa,CAACG,OAAS,GAAGC,OAAS,EAAE,EACzC,IAAKF,IAAIG,EAAI,EAAGA,EAAIJ,EAAqBK,OAAQD,CAAC,GACjDL,EAAWG,OAAOI,KAAKd,EAAee,OAAO,IAAIC,KAAKR,EAAqBI,GAAG,EAAI,CAAC,CAAC,EACpFL,EAAWI,OAAOG,KAAKN,EAAqBI,GAAG,EAAI,EAEpD,OAAOL,CACR,GAGoCC,qBAA2B,IAAC,EAEhE,IAAIS,MAAMZ,EAAK,CACda,KAAM,MACNC,KAAM,CACLT,OAAQH,EAAWG,OACnBU,SAAU,CAAC,CACVC,MAAO,mBACPF,KAAMZ,EAAWI,OACjBW,YAAa,EACbC,gBAAiB,WAClB,EACD,EACAC,QAAS,CACRC,OAAQ,CACPC,QAAS,CAAA,CACV,EACAC,oBAAqB,CAAA,EACrBC,WAAY,CAAA,EACZC,OAAQ,CACPC,EAAG,CACFC,YAAa,CAAA,CACd,CACD,EACAC,MAAO,CACNN,QAAS,CAAA,EACTO,KAAM,sDACNC,SAAU,EACX,EACAC,QAAS,CACRV,OAAQ,CACPC,QAAS,CAAA,CACV,EACAM,MAAO,CACNN,QAAS,CAAA,EACTO,KAAM,sDACNG,KAAM,CACLC,KAAM,EACP,CACD,CACD,EACAC,SAAU,CACTC,IAAI,CACHhB,gBAAiB,WAClB,CACD,EACAiB,WAAY,CACXC,QAAS,CACRC,SAAU,IACVC,OAAQ,SACRC,KAAM,EACNC,GAAI,EACJC,KAAM,CAAA,CACP,CACD,CACD,CACD,CAAC,CAEF,CAAC"}