function ctFillDecodedEmailHandler(){document.body.classList.add("apbct-popup-fade");var e,t,n,o,a=document.getElementById("apbct_popup");a?(a.setAttribute("style","display: inherit"),document.getElementById("apbct_popup_text").innerHTML="Please wait while "+ctAdminCommon.plugin_name+" is decoding the email addresses."):((a=document.createElement("div")).setAttribute("class","apbct-popup apbct-email-encoder-popup"),a.setAttribute("id","apbct_popup"),(e=document.createElement("span")).classList="apbct-email-encoder-elements_center",(t=document.createElement("p")).innerText=ctAdminCommon.plugin_name,t.setAttribute("class","apbct-email-encoder--popup-header"),e.append(t),(t=document.createElement("div")).setAttribute("id","apbct_popup_text"),t.setAttribute("class","apbct-email-encoder-elements_center"),t.style.color="black",(n=document.createElement("p")).id="apbct_email_ecoder__popup_text_node_first",n.innerText="The magic is on the way, please wait for a few seconds!",n.setAttribute("class","apbct-email-encoder-elements_center"),(o=document.createElement("p")).id="apbct_email_ecoder__popup_text_node_second",o.innerText="Decoding process to the original data.",t.append(n),t.append(o),a.append(e),a.append(t),a.append(apbctSetEmailDecoderPopupAnimation()),document.body.append(a)),apbctAjaxEmailDecodeBulk(ctAdminCommon.encodedEmailNode)}function apbctSetEmailDecoderPopupAnimation(){var t=["apbct_dog_one","apbct_dog_two","apbct_dog_three"],n=document.createElement("div");n.classList="apbct-ee-animation-wrapper";for(let e=0;e<t.length;e++){var o=document.createElement("span");o.classList="apbct_dog "+t[e],o.innerText="@",n.append(o)}return n}function apbctAjaxEmailDecodeBulk(t){var e=t.dataset.originalString,e={encodedEmails:JSON.stringify({0:e})},n=document.createElement("div");n.setAttribute("class","apbct-tooltip"),jQuery(t).append(n),apbct_admin_sendAJAX({action:"apbct_decode_email",encodedEmails:e.encodedEmails},{callback:function(e){apbctEmailEncoderCallbackBulk(e,t)},notJson:!0})}function apbctEmailEncoderCallbackBulk(a,c){a.success&&!0===a.data[0].is_allowed?setTimeout(function(){var e,t,n=a.data[0].decoded_email;let o=document.getElementById("apbct_popup");null!==o&&(e=o.querySelector("#apbct_email_ecoder__popup_text_node_first"),(t=document.createElement("b")).setAttribute("class","apbct-email-encoder-select-whole-email"),t.innerText=n,t.title="Click to select the whole data",e.innerHTML="The original one is&nbsp;"+t.outerHTML,e.setAttribute("style","flex-direction: row;"),o.querySelector("#apbct_email_ecoder__popup_text_node_second").innerText="Happy conversations!",o.querySelector(".apbct-ee-animation-wrapper").remove(),o.querySelector("#apbct_email_ecoder__popup_text_node_second").remove(),(n=document.createElement("span")).classList="apbct-email-encoder-elements_center top-margin-long",(t=document.createElement("button")).innerText="Got it",t.classList="apbct-email-encoder-got-it-button",t.addEventListener("click",function(){document.body.classList.remove("apbct-popup-fade"),o.setAttribute("style","display:none"),fillDecodedEmails(c,a)}),n.append(t),o.append(n))},3e3):console.log("result",a)}function fillDecodedEmails(e,t){let n=t.data[0].decoded_email;e.classList.add("no-blur"),setTimeout(()=>{e.setAttribute("title",""),e.removeAttribute("style"),ctFillDecodedEmail(e,n)},2e3),e.removeEventListener("click",ctFillDecodedEmailHandler)}function ctFillDecodedEmail(e,t){jQuery(e).html(jQuery(e).html().replace(/.+?(<div class=["']apbct-tooltip["'].+?<\/div>)/,t+"$1"))}function apbct_admin_sendAJAX(t,n,o){let a=n.callback||null,c=n.callback_context||null,i=n.callback_params||null;var e=n.async||!0;let l=n.notJson||null;var r=n.timeout||15e3,o=o||null;let d=n.button||null,s=n.spinner||null,p=n.progressbar||null;"string"==typeof t?t=t+"&_ajax_nonce="+ctAdminCommon._ajax_nonce+"&no_cache="+Math.random():(t._ajax_nonce=ctAdminCommon._ajax_nonce,t.no_cache=Math.random()),d&&(d.setAttribute("disabled","disabled"),d.style.cursor="not-allowed"),s&&jQuery(s).css("display","inline"),jQuery.ajax({type:"POST",url:ctAdminCommon._ajax_url,data:t,async:e,success:function(e){d&&(d.removeAttribute("disabled"),d.style.cursor="pointer"),s&&jQuery(s).css("display","none"),(e=l?e:JSON.parse(e)).error?(setTimeout(function(){p&&p.fadeOut("slow")},1e3),"undefined"!=typeof cleantalkModal?(cleantalkModal.loaded="Error:<br>"+e.error.toString(),cleantalkModal.open()):alert("Error happens: "+(e.error||"Unkown"))):a&&(i?a.apply(c,i.concat(e,t,n,o)):a(e,t,n,o))},error:function(e,t,n){d&&(d.removeAttribute("disabled"),d.style.cursor="pointer"),s&&jQuery(s).css("display","none"),console.log("APBCT_AJAX_ERROR"),console.log(e),console.log(t),console.log(n)},timeout:r})}function ctDecorationSelectorActions(){var e=document.querySelector("#apbct_setting_comments__form_decoration_selector");let t=document.querySelector("#apbct_setting_comments__form_decoration_color"),n=document.querySelector("#apbct_setting_comments__form_decoration_text"),o="Default Theme";t&&n&&e&&(e.value===o&&(t.setAttribute("disabled","disabled"),n.setAttribute("disabled","disabled")),e.addEventListener("change",function(e){e=e.target.value;e&&0<e.length&&e===o?(t.setAttribute("disabled","disabled"),n.setAttribute("disabled","disabled")):(t.removeAttribute("disabled"),n.removeAttribute("disabled"))}))}jQuery(document).ready(function(t){jQuery(".apbct_update_notice").on("click","button",function(){var e=new Date((new Date).getTime()+2592e6),t="https:"===location.protocol?"; secure":"";document.cookie="apbct_update_banner_closed=1; path=/; expires="+e.toUTCString()+"; samesite=lax"+t}),jQuery('li a[href="options-general.php?page=cleantalk"]').css("white-space","nowrap").css("display","inline-block"),jQuery("body").on("click",".apbct-notice .notice-dismiss-link",function(e){jQuery(e.target).parent().parent(".notice").after('<div id="apbct-notice-dismiss-success" class="notice notice-success is-dismissible"><p>'+ctAdminCommon.apbctNoticeDismissSuccess+"</p></div>"),setTimeout(function(){jQuery("#apbct-notice-dismiss-success").fadeOut()},2e3),jQuery(e.target).parent().siblings(".apbct-notice .notice-dismiss").click()}),jQuery("body").on("click",".apbct-notice .notice-dismiss",function(e){e=jQuery(e.target).parent().attr("id");e&&apbct_admin_sendAJAX({action:"cleantalk_dismiss_notice",notice_id:e},{callback:null,notJson:!0})}),jQuery(".ct_username .row-actions .delete a").on("click",function(e){e.preventDefault(),confirm(ctAdminCommon.notice_when_deleting_user_text)&&(window.location=this.href)});let n=document.querySelector("#apbct_setting_forms__force_protection__On");var e;n&&n.addEventListener("click",function(e){n.checked&&!confirm(ctAdminCommon.apbctNoticeForceProtectionOn)&&e.preventDefault()}),t(".apbct-restore-spam-order-button").click(function(){var e=t(this).data("spam-order-id"),e={action:"apbct_restore_spam_order",_ajax_nonce:ctAdminCommon._ajax_nonce,order_id:e};t.ajax({type:"POST",url:ctAdminCommon._ajax_url,data:e,success:function(e){e.success?window.location.reload():alert(e.data.message)}})}),window.location.href.includes("options-general.php?page=cleantalk")&&(e=document.querySelector("[data-original-string]"))&&((ctAdminCommon.encodedEmailNode=e).style.cursor="pointer",e.addEventListener("click",ctFillDecodedEmailHandler)),ctDecorationSelectorActions()});
//# sourceMappingURL=cleantalk-admin.min.js.map
