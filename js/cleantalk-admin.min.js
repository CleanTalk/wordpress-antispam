function apbct_admin_sendAJAX(t,n,o){let a=n.callback||null,c=n.callback_context||null,i=n.callback_params||null;var e=n.async||!0;let l=n.notJson||null;var s=n.timeout||15e3,o=o||null;let r=n.button||null,d=n.spinner||null,u=n.progressbar||null;"string"==typeof t?t=t+"&_ajax_nonce="+ctAdminCommon._ajax_nonce+"&no_cache="+Math.random():(t._ajax_nonce=ctAdminCommon._ajax_nonce,t.no_cache=Math.random()),r&&(r.setAttribute("disabled","disabled"),r.style.cursor="not-allowed"),d&&jQuery(d).css("display","inline"),jQuery.ajax({type:"POST",url:ctAdminCommon._ajax_url,data:t,async:e,success:function(e){r&&(r.removeAttribute("disabled"),r.style.cursor="pointer"),d&&jQuery(d).css("display","none"),(e=l?e:JSON.parse(e)).error?(setTimeout(function(){u&&u.fadeOut("slow")},1e3),"undefined"!=typeof cleantalkModal?(cleantalkModal.loaded="Error:<br>"+e.error.toString(),cleantalkModal.open()):alert("Error happens: "+(e.error||"Unkown"))):a&&(i?a.apply(c,i.concat(e,t,n,o)):a(e,t,n,o))},error:function(e,t,n){r&&(r.removeAttribute("disabled"),r.style.cursor="pointer"),d&&jQuery(d).css("display","none"),console.log("APBCT_AJAX_ERROR"),console.log(e),console.log(t),console.log(n)},timeout:s})}jQuery(document).ready(function(t){jQuery(".apbct_update_notice").on("click","button",function(){var e=new Date((new Date).getTime()+2592e6),t="https:"===location.protocol?"; secure":"";document.cookie="apbct_update_banner_closed=1; path=/; expires="+e.toUTCString()+"; samesite=lax"+t}),jQuery('li a[href="options-general.php?page=cleantalk"]').css("white-space","nowrap").css("display","inline-block"),jQuery("body").on("click",".apbct-notice .notice-dismiss-link",function(e){jQuery(e.target).parent().siblings(".apbct-notice .notice-dismiss").click()}),jQuery("body").on("click",".apbct-notice .notice-dismiss",function(e){var t=jQuery(e.target).parent().attr("id");t&&(apbct_admin_sendAJAX({action:"cleantalk_dismiss_notice",notice_id:t},{callback:null,notJson:!0}),jQuery(e.target).parent(".notice").after('<div id="apbct-notice-dismiss-success" class="notice notice-success is-dismissible"><p>'+ctAdminCommon.apbctNoticeDismissSuccess+"</p></div>"),setTimeout(function(){jQuery("#apbct-notice-dismiss-success").fadeOut()},2e3))}),jQuery(".ct_username .row-actions .delete a").on("click",function(e){e.preventDefault(),confirm(ctAdminCommon.notice_when_deleting_user_text)&&(window.location=this.href)}),t(".apbct-restore-spam-order-button").click(function(){var e=t(this).data("spam-order-id"),e={action:"apbct_restore_spam_order",_ajax_nonce:ctAdminCommon._ajax_nonce,order_id:e};t.ajax({type:"POST",url:ctAdminCommon._ajax_url,data:e,success:function(e){e.success?window.location.reload():alert(e.data.message)}})}),jQuery("#deactivate-cleantalk-spam-protect").on("click",function(e){e.preventDefault();var t,e=this.getAttribute("href");"undefined"!=typeof cleantalkModal&&"1"===ctAdminCommon.deactivation_banner_is_needed?(t=`
                <div class="ct-modal-message">
                    ${ctAdminCommon.deactivation_banner_text}
                </div>
                <div class="ct-modal-buttons">
                    <button class="button action" onclick="cleantalkModal.close();">Ok</button>
                    <a class="button action" href="${e}">No, deactivate anyway</a>
                </div>
            `,cleantalkModal.loaded=t,cleantalkModal.open()):window.location.href=e}),document.querySelectorAll(".apbct-real-user").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),e.currentTarget.querySelector(".apbct-real-user-popup").style.display="block"})}),document.querySelector("body").addEventListener("click",function(e){document.querySelectorAll(".apbct-real-user-popup").forEach(e=>{e.style.display="none"})})});
//# sourceMappingURL=cleantalk-admin.min.js.map
