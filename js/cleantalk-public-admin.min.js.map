{"version":3,"names":[],"mappings":"","sources":["cleantalk-public-admin.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\n\n    // Set background-color similar to parents\n    jQuery('.ct_comment_info').parents().each(function () {\n        if ((e = jQuery(this).css('background-color')).length > 0 && e != 'rgba(0, 0, 0, 0)') {\n            jQuery('.ct_comment_info').css('background', e);\n            return false;\n        }\n    });\n\n    // Set same float style with article\n    var ct_post_float = jQuery('.ct_comment_info').prev().last().css('float');\n    jQuery('.ct_comment_info').css('float', ct_post_float);\n\n    var ct_posts = jQuery('.ct_comment_info');\n\n    jQuery(ct_posts).each(function (indx, elem) {\n        curr_elem = jQuery(elem);\n        curr_elem.parent().prepend(curr_elem);\n    });\n\n    // Handler for buttons\n    jQuery('.ct_this_is').on('click', function () {\n\n        var ct_current_button = jQuery(this),\n            ct_feedback_wrap = jQuery(this).siblings('.ct_feedback_wrap'),\n            ct_feedback_msg = jQuery('.ct_feedback_msg'),\n            ct_comment_status;\n\n        if (ct_current_button.hasClass('ct_this_is_spam'))\n            ct_comment_status = 'spam';\n        else\n            ct_comment_status = 'approve';\n\n        var data = {\n            'action': 'ct_feedback_comment',\n            'security': ctPublicAdmin.ct_ajax_nonce,\n            'comment_id': ct_current_button.attr('commentid'),\n            'comment_status': ct_comment_status,\n            'change_status': 1\n        };\n\n        apbct_public_sendAJAX(\n            data,\n            {\n                callback: function (msg) {\n\n                    ct_current_button.hide();\n                    ct_current_button.siblings('span.ct_this_is').show();\n\n                    jQuery('.ct_feedback_result').hide();\n                    if (ct_comment_status == 'approve') {\n                        jQuery('.ct_feedback_result_not_spam').show();\n                    } else {\n                        jQuery('.ct_feedback_result_spam').show();\n                    }\n\n                    if (msg == 1) {\n                        ct_feedback_msg.addClass('ct_feedback_success');\n                        ct_feedback_msg.html(ctPublicAdmin.ct_feedback_msg);\n                    } else if (msg == 0) {\n                        // Error occurred\n                        ct_feedback_msg.addClass('ct_feedback_error');\n                        ct_feedback_msg.html(ctPublicAdmin.ct_feedback_error);\n                    } else if (msg == 'no_hash') {\n                        // No hash for this comment\n                        ct_feedback_msg.addClass('ct_feedback_no_hash');\n                        ct_feedback_msg.html(ctPublicAdmin.ct_feedback_no_hash);\n                    }\n                    // Hidding feedback message for every message type\n                    ct_feedback_wrap.show();\n                    ct_feedback_wrap.css('display', 'inline-block');\n\n                    var ct_timeout_id = ct_feedback_wrap.data('interval_id');\n                    clearInterval(ct_timeout_id);\n                    ct_timeout_id = setTimeout(function () {\n                        ct_feedback_wrap.fadeOut(1000);\n                    }, 5000);\n                    ct_feedback_wrap.data('interval_id', ct_timeout_id);\n                },\n                button: ct_current_button[0],\n                spinner: ct_current_button[0].querySelectorAll('.apbct_preloader_button')[0],\n                notJson: true\n            }\n        );\n    });\n});"],"file":"cleantalk-public-admin.min.js"}