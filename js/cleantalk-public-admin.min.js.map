{"version":3,"file":"cleantalk-public-admin.min.js","sources":["cleantalk-public-admin.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\n\n    // Set background-color similar to parents\n    jQuery('.ct_comment_info').parents().each(function () {\n        if ((e = jQuery(this).css('background-color')).length > 0 && e != 'rgba(0, 0, 0, 0)') {\n            jQuery('.ct_comment_info').css('background', e);\n            return false;\n        }\n    });\n\n    // Set same float style with article\n    var ct_post_float = jQuery('.ct_comment_info').prev().last().css('float');\n    jQuery('.ct_comment_info').css('float', ct_post_float);\n\n    var ct_posts = jQuery('.ct_comment_info');\n\n    jQuery(ct_posts).each(function (indx, elem) {\n        curr_elem = jQuery(elem);\n        curr_elem.parent().prepend(curr_elem);\n    });\n\n    // Handler for buttons\n    jQuery('.ct_this_is').on('click', function () {\n\n        var ct_current_button = jQuery(this),\n            ct_feedback_wrap = jQuery(this).siblings('.ct_feedback_wrap'),\n            ct_feedback_msg = jQuery('.ct_feedback_msg'),\n            ct_comment_status;\n\n        if (ct_current_button.hasClass('ct_this_is_spam'))\n            ct_comment_status = 'spam';\n        else\n            ct_comment_status = 'approve';\n\n        var data = {\n            'action': 'ct_feedback_comment',\n            'security': ctPublicAdmin.ct_ajax_nonce,\n            'comment_id': ct_current_button.attr('commentid'),\n            'comment_status': ct_comment_status,\n            'change_status': 1\n        };\n\n        apbct_public_sendAJAX(\n            data,\n            {\n                callback: function (msg) {\n\n                    ct_current_button.hide();\n                    ct_current_button.siblings('span.ct_this_is').show();\n\n                    jQuery('.ct_feedback_result').hide();\n                    if (ct_comment_status == 'approve') {\n                        jQuery('.ct_feedback_result_not_spam').show();\n                    } else {\n                        jQuery('.ct_feedback_result_spam').show();\n                    }\n\n                    if (msg == 1) {\n                        ct_feedback_msg.addClass('ct_feedback_success');\n                        ct_feedback_msg.html(ctPublicAdmin.ct_feedback_msg);\n                    } else if (msg == 0) {\n                        // Error occurred\n                        ct_feedback_msg.addClass('ct_feedback_error');\n                        ct_feedback_msg.html(ctPublicAdmin.ct_feedback_error);\n                    } else if (msg == 'no_hash') {\n                        // No hash for this comment\n                        ct_feedback_msg.addClass('ct_feedback_no_hash');\n                        ct_feedback_msg.html(ctPublicAdmin.ct_feedback_no_hash);\n                    }\n                    // Hidding feedback message for every message type\n                    ct_feedback_wrap.show();\n                    ct_feedback_wrap.css('display', 'inline-block');\n\n                    var ct_timeout_id = ct_feedback_wrap.data('interval_id');\n                    clearInterval(ct_timeout_id);\n                    ct_timeout_id = setTimeout(function () {\n                        ct_feedback_wrap.fadeOut(1000);\n                    }, 5000);\n                    ct_feedback_wrap.data('interval_id', ct_timeout_id);\n                },\n                button: ct_current_button[0],\n                spinner: ct_current_button[0].querySelectorAll('.apbct_preloader_button')[0],\n                notJson: true\n            }\n        );\n    });\n});"],"names":["document","addEventListener","jQuery","parents","each","e","this","css","length","ct_post_float","prev","last","ct_posts","indx","elem","curr_elem","parent","prepend","on","ct_current_button","ct_feedback_wrap","siblings","ct_feedback_msg","ct_comment_status","hasClass","data","action","security","ctPublicAdmin","ct_ajax_nonce","comment_id","attr","comment_status","change_status","apbct_public_sendAJAX","callback","msg","hide","show","addClass","html","ct_feedback_error","ct_feedback_no_hash","ct_timeout_id","clearInterval","setTimeout","fadeOut","button","spinner","querySelectorAll","notJson"],"mappings":"AAAAA,SAASC,iBAAiB,mBAAoB,WAG1CC,OAAO,kBAAkB,EAAEC,QAAQ,EAAEC,KAAK,WACtC,GAAwD,GAAnDC,EAAIH,OAAOI,IAAI,EAAEC,IAAI,kBAAkB,GAAGC,QAAmB,oBAALH,EAEzD,OADAH,OAAO,kBAAkB,EAAEK,IAAI,aAAcF,CAAC,EACvC,CAAA,CAEf,CAAC,EAGD,IAAII,EAAgBP,OAAO,kBAAkB,EAAEQ,KAAK,EAAEC,KAAK,EAAEJ,IAAI,OAAO,EAGpEK,GAFJV,OAAO,kBAAkB,EAAEK,IAAI,QAASE,CAAa,EAEtCP,OAAO,kBAAkB,GAExCA,OAAOU,CAAQ,EAAER,KAAK,SAAUS,EAAMC,IAClCC,UAAYb,OAAOY,CAAI,GACbE,OAAO,EAAEC,QAAQF,SAAS,CACxC,CAAC,EAGDb,OAAO,aAAa,EAAEgB,GAAG,QAAS,WAE9B,IAAIC,EAAoBjB,OAAOI,IAAI,EAC/Bc,EAAmBlB,OAAOI,IAAI,EAAEe,SAAS,mBAAmB,EAC5DC,EAAkBpB,OAAO,kBAAkB,EAI3CqB,EADAJ,EAAkBK,SAAS,iBAAiB,EACxB,OAEA,UAEpBC,EAAO,CACPC,OAAU,sBACVC,SAAYC,cAAcC,cAC1BC,WAAcX,EAAkBY,KAAK,WAAW,EAChDC,eAAkBT,EAClBU,cAAiB,CACrB,EAEAC,sBACIT,EACA,CACIU,SAAU,SAAUC,GAEhBjB,EAAkBkB,KAAK,EACvBlB,EAAkBE,SAAS,iBAAiB,EAAEiB,KAAK,EAEnDpC,OAAO,qBAAqB,EAAEmC,KAAK,GACV,WAArBd,EACArB,OAAO,8BAA8B,EAErCA,OAAO,0BAA0B,GAFMoC,KAAK,EAKrC,GAAPF,GACAd,EAAgBiB,SAAS,qBAAqB,EAC9CjB,EAAgBkB,KAAKZ,cAAcN,eAAe,GACpC,GAAPc,GAEPd,EAAgBiB,SAAS,mBAAmB,EAC5CjB,EAAgBkB,KAAKZ,cAAca,iBAAiB,GACtC,WAAPL,IAEPd,EAAgBiB,SAAS,qBAAqB,EAC9CjB,EAAgBkB,KAAKZ,cAAcc,mBAAmB,GAG1DtB,EAAiBkB,KAAK,EACtBlB,EAAiBb,IAAI,UAAW,cAAc,EAE1CoC,EAAgBvB,EAAiBK,KAAK,aAAa,EACvDmB,cAAcD,CAAa,EAC3BA,EAAgBE,WAAW,WACvBzB,EAAiB0B,QAAQ,GAAI,CACjC,EAAG,GAAI,EACP1B,EAAiBK,KAAK,cAAekB,CAAa,CACtD,EACAI,OAAQ5B,EAAkB,GAC1B6B,QAAS7B,EAAkB,GAAG8B,iBAAiB,yBAAyB,EAAE,GAC1EC,QAAS,CAAA,CACb,CACJ,CACJ,CAAC,CACL,CAAC"}