{"version":3,"file":"cleantalk-public-admin.min.js","sources":["cleantalk-public-admin.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n    // Set background-color similar to parents\r\n    jQuery('.ct_comment_info').parents().each(function () {\r\n        if ((e = jQuery(this).css('background-color')).length > 0 && e != 'rgba(0, 0, 0, 0)') {\r\n            jQuery('.ct_comment_info').css('background', e);\r\n            return false;\r\n        }\r\n    });\r\n\r\n    // Set same float style with article\r\n    var ct_post_float = jQuery('.ct_comment_info').prev().last().css('float');\r\n    jQuery('.ct_comment_info').css('float', ct_post_float);\r\n\r\n    var ct_posts = jQuery('.ct_comment_info');\r\n\r\n    jQuery(ct_posts).each(function (indx, elem) {\r\n        curr_elem = jQuery(elem);\r\n        curr_elem.parent().prepend(curr_elem);\r\n    });\r\n\r\n    // Handler for buttons\r\n    jQuery('.ct_this_is').on('click', function () {\r\n\r\n        var ct_current_button = jQuery(this),\r\n            ct_feedback_wrap = jQuery(this).siblings('.ct_feedback_wrap'),\r\n            ct_feedback_msg = jQuery('.ct_feedback_msg'),\r\n            ct_comment_status;\r\n\r\n        if (ct_current_button.hasClass('ct_this_is_spam'))\r\n            ct_comment_status = 'spam';\r\n        else\r\n            ct_comment_status = 'approve';\r\n\r\n        var data = {\r\n            'action': 'ct_feedback_comment',\r\n            'security': ctPublicAdmin.ct_ajax_nonce,\r\n            'comment_id': ct_current_button.attr('commentid'),\r\n            'comment_status': ct_comment_status,\r\n            'change_status': 1\r\n        };\r\n\r\n        apbct_public_sendAJAX(\r\n            data,\r\n            {\r\n                callback: function (msg) {\r\n\r\n                    ct_current_button.hide();\r\n                    ct_current_button.siblings('span.ct_this_is').show();\r\n\r\n                    jQuery('.ct_feedback_result').hide();\r\n                    if (ct_comment_status == 'approve') {\r\n                        jQuery('.ct_feedback_result_not_spam').show();\r\n                    } else {\r\n                        jQuery('.ct_feedback_result_spam').show();\r\n                    }\r\n\r\n                    if (msg == 1) {\r\n                        ct_feedback_msg.addClass('ct_feedback_success');\r\n                        ct_feedback_msg.html(ctPublicAdmin.ct_feedback_msg);\r\n                    } else if (msg == 0) {\r\n                        // Error occurred\r\n                        ct_feedback_msg.addClass('ct_feedback_error');\r\n                        ct_feedback_msg.html(ctPublicAdmin.ct_feedback_error);\r\n                    } else if (msg == 'no_hash') {\r\n                        // No hash for this comment\r\n                        ct_feedback_msg.addClass('ct_feedback_no_hash');\r\n                        ct_feedback_msg.html(ctPublicAdmin.ct_feedback_no_hash);\r\n                    }\r\n                    // Hidding feedback message for every message type\r\n                    ct_feedback_wrap.show();\r\n                    ct_feedback_wrap.css('display', 'inline-block');\r\n\r\n                    var ct_timeout_id = ct_feedback_wrap.data('interval_id');\r\n                    clearInterval(ct_timeout_id);\r\n                    ct_timeout_id = setTimeout(function () {\r\n                        ct_feedback_wrap.fadeOut(1000);\r\n                    }, 5000);\r\n                    ct_feedback_wrap.data('interval_id', ct_timeout_id);\r\n                },\r\n                button: ct_current_button[0],\r\n                spinner: ct_current_button[0].querySelectorAll('.apbct_preloader_button')[0],\r\n                notJson: true\r\n            }\r\n        );\r\n    });\r\n});"],"names":["document","addEventListener","jQuery","parents","each","e","this","css","length","ct_post_float","prev","last","ct_posts","indx","elem","curr_elem","parent","prepend","on","ct_current_button","ct_feedback_wrap","siblings","ct_feedback_msg","ct_comment_status","hasClass","data","action","security","ctPublicAdmin","ct_ajax_nonce","comment_id","attr","comment_status","change_status","apbct_public_sendAJAX","callback","msg","hide","show","addClass","html","ct_feedback_error","ct_feedback_no_hash","ct_timeout_id","clearInterval","setTimeout","fadeOut","button","spinner","querySelectorAll","notJson"],"mappings":"AAAAA,SAASC,iBAAiB,mBAAoB,WAG1CC,OAAO,kBAAkB,EAAEC,QAAQ,EAAEC,KAAK,WACtC,GAAwD,GAAnDC,EAAIH,OAAOI,IAAI,EAAEC,IAAI,kBAAkB,GAAGC,QAAmB,oBAALH,EAEzD,OADAH,OAAO,kBAAkB,EAAEK,IAAI,aAAcF,CAAC,EACvC,CAAA,CAEf,CAAC,EAGD,IAAII,EAAgBP,OAAO,kBAAkB,EAAEQ,KAAK,EAAEC,KAAK,EAAEJ,IAAI,OAAO,EAGpEK,GAFJV,OAAO,kBAAkB,EAAEK,IAAI,QAASE,CAAa,EAEtCP,OAAO,kBAAkB,GAExCA,OAAOU,CAAQ,EAAER,KAAK,SAAUS,EAAMC,IAClCC,UAAYb,OAAOY,CAAI,GACbE,OAAO,EAAEC,QAAQF,SAAS,CACxC,CAAC,EAGDb,OAAO,aAAa,EAAEgB,GAAG,QAAS,WAE9B,IAAIC,EAAoBjB,OAAOI,IAAI,EAC/Bc,EAAmBlB,OAAOI,IAAI,EAAEe,SAAS,mBAAmB,EAC5DC,EAAkBpB,OAAO,kBAAkB,EAI3CqB,EADAJ,EAAkBK,SAAS,iBAAiB,EACxB,OAEA,UAEpBC,EAAO,CACPC,OAAU,sBACVC,SAAYC,cAAcC,cAC1BC,WAAcX,EAAkBY,KAAK,WAAW,EAChDC,eAAkBT,EAClBU,cAAiB,CACrB,EAEAC,sBACIT,EACA,CACIU,SAAU,SAAUC,GAEhBjB,EAAkBkB,KAAK,EACvBlB,EAAkBE,SAAS,iBAAiB,EAAEiB,KAAK,EAEnDpC,OAAO,qBAAqB,EAAEmC,KAAK,GACV,WAArBd,EACArB,OAAO,8BAA8B,EAErCA,OAAO,0BAA0B,GAFMoC,KAAK,EAKrC,GAAPF,GACAd,EAAgBiB,SAAS,qBAAqB,EAC9CjB,EAAgBkB,KAAKZ,cAAcN,eAAe,GACpC,GAAPc,GAEPd,EAAgBiB,SAAS,mBAAmB,EAC5CjB,EAAgBkB,KAAKZ,cAAca,iBAAiB,GACtC,WAAPL,IAEPd,EAAgBiB,SAAS,qBAAqB,EAC9CjB,EAAgBkB,KAAKZ,cAAcc,mBAAmB,GAG1DtB,EAAiBkB,KAAK,EACtBlB,EAAiBb,IAAI,UAAW,cAAc,EAE1CoC,EAAgBvB,EAAiBK,KAAK,aAAa,EACvDmB,cAAcD,CAAa,EAC3BA,EAAgBE,WAAW,WACvBzB,EAAiB0B,QAAQ,GAAI,CACjC,EAAG,GAAI,EACP1B,EAAiBK,KAAK,cAAekB,CAAa,CACtD,EACAI,OAAQ5B,EAAkB,GAC1B6B,QAAS7B,EAAkB,GAAG8B,iBAAiB,yBAAyB,EAAE,GAC1EC,QAAS,CAAA,CACb,CACJ,CACJ,CAAC,CACL,CAAC"}