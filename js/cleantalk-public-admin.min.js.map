{"version":3,"file":"cleantalk-public-admin.min.js","sources":["cleantalk-public-admin.js"],"sourcesContent":["jQuery(document).ready(function(){\n\t\n\t// Set background-color similar to parents\njQuery('.ct_comment_info').parents().each(function() {\n  if ((e = jQuery(this).css('background-color')).length > 0 && e != 'rgba(0, 0, 0, 0)'){ \n  \tjQuery('.ct_comment_info').css('background', e);\n  \treturn false;\n  }\n});\n\t\n\t// Set same float style with article\n\tvar ct_post_float = jQuery('.ct_comment_info').prev().last().css('float');\n\tjQuery('.ct_comment_info').css('float', ct_post_float);\n\t\n\tvar ct_posts = jQuery('.ct_comment_info');\n\t\n\tjQuery(ct_posts).each(function(indx, elem){\n\t\tcurr_elem = jQuery(elem);\n\t\tcurr_elem.parent().prepend(curr_elem);\n\t});\n\t\n\t// Handler for buttons\n\tjQuery('.ct_this_is').on('click', function(){\n\t\t\n\t\tvar ct_current_button = jQuery(this),\n\t\t\tct_feedback_wrap = jQuery(this).siblings('.ct_feedback_wrap'),\n\t\t\tct_feedback_msg = jQuery('.ct_feedback_msg'),\n\t\t\tct_comment_status;\n\t\t\t\n\t\tif(ct_current_button.hasClass('ct_this_is_spam'))\n\t\t\tct_comment_status = 'spam';\n\t\telse\n\t\t\tct_comment_status = 'approve';\n\t\t\n\t\tvar data = {\n\t\t\t'action': 'ct_feedback_comment',\n\t\t\t'security': ctPublicAdmin.ct_ajax_nonce,\n\t\t\t'comment_id': ct_current_button.attr('commentid'),\n\t\t\t'comment_status': ct_comment_status,\n\t\t\t'change_status': 1\n\t\t};\n\t\t\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: ctPublicAdmin.ajaxurl,\n\t\t\tdata: data,\n\t\t\tsuccess: function(msg){\n\t\t\t\tct_current_button.hide();\n\t\t\t\tct_current_button.siblings('span.ct_this_is').show();\n\t\t\t\t\n\t\t\t\tjQuery('.ct_feedback_result').hide();\n\t\t\t\tif(ct_comment_status == 'approve')\n\t\t\t\t\tjQuery('.ct_feedback_result_not_spam').show();\n\t\t\t\telse\n\t\t\t\t\tjQuery('.ct_feedback_result_spam').show();\n\t\t\t\t\n\t\t\t\tif(msg == 1){\n\t\t\t\t\tct_feedback_msg.addClass('ct_feedback_success');\n\t\t\t\t\tct_feedback_msg.html(ctPublicAdmin.ct_feedback_msg);\n\t\t\t\t}else if(msg == 0){\n\t\t\t\t\t// Error occurred\n\t\t\t\t\tct_feedback_msg.addClass('ct_feedback_error');\n\t\t\t\t\tct_feedback_msg.html(ctPublicAdmin.ct_feedback_error);\n\t\t\t\t}else if(msg == 'no_hash'){\n\t\t\t\t\t// No hash for this comment\n\t\t\t\t\tct_feedback_msg.addClass('ct_feedback_no_hash');\n\t\t\t\t\tct_feedback_msg.html(ctPublicAdmin.ct_feedback_no_hash);\n\t\t\t\t}\n\t\t\t\t// Hidding feedback message for every message type\n\t\t\t\tct_feedback_wrap.show();\n\t\t\t\tct_feedback_wrap.css('display', 'inline-block');\n\t\t\t\t\n\t\t\t\tvar ct_timeout_id = ct_feedback_wrap.data('interval_id');\n\t\t\t\tclearInterval(ct_timeout_id);\n\t\t\t\tct_timeout_id = setTimeout(function(){\n\t\t\t\t\tct_feedback_wrap.fadeOut(1000);\n\t\t\t\t}, 5000);\n\t\t\t\tct_feedback_wrap.data('interval_id', ct_timeout_id);\n\t\t\t},\n\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\tconsole.log(jqXHR);\n\t\t\t\tconsole.log(textStatus);\n\t\t\t\tconsole.log(errorThrown);\n\t\t\t},\n\t\t\ttimeout: 5000\n\t\t});\n\t});\n\t\n});"],"names":["jQuery","document","ready","parents","each","e","this","css","length","ct_post_float","prev","last","ct_posts","indx","elem","curr_elem","parent","prepend","on","ct_current_button","ct_feedback_wrap","siblings","ct_feedback_msg","ct_comment_status","hasClass","data","action","security","ctPublicAdmin","ct_ajax_nonce","comment_id","attr","comment_status","change_status","ajax","type","url","ajaxurl","success","msg","hide","show","addClass","html","ct_feedback_error","ct_feedback_no_hash","ct_timeout_id","clearInterval","setTimeout","fadeOut","error","jqXHR","textStatus","errorThrown","console","log","timeout"],"mappings":"AAAAA,OAAOC,QAAQ,EAAEC,MAAM,WAGvBF,OAAO,kBAAkB,EAAEG,QAAQ,EAAEC,KAAK,WACxC,GAAwD,GAAnDC,EAAIL,OAAOM,IAAI,EAAEC,IAAI,kBAAkB,GAAGC,QAAmB,oBAALH,EAE5D,OADAL,OAAO,kBAAkB,EAAEO,IAAI,aAAcF,CAAC,EACvC,CAAA,CAEV,CAAC,EAGA,IAAII,EAAgBT,OAAO,kBAAkB,EAAEU,KAAK,EAAEC,KAAK,EAAEJ,IAAI,OAAO,EAGpEK,GAFJZ,OAAO,kBAAkB,EAAEO,IAAI,QAASE,CAAa,EAEtCT,OAAO,kBAAkB,GAExCA,OAAOY,CAAQ,EAAER,KAAK,SAASS,EAAMC,IACpCC,UAAYf,OAAOc,CAAI,GACbE,OAAO,EAAEC,QAAQF,SAAS,CACrC,CAAC,EAGDf,OAAO,aAAa,EAAEkB,GAAG,QAAS,WAEjC,IAAIC,EAAoBnB,OAAOM,IAAI,EAClCc,EAAmBpB,OAAOM,IAAI,EAAEe,SAAS,mBAAmB,EAC5DC,EAAkBtB,OAAO,kBAAkB,EAI3CuB,EADEJ,EAAkBK,SAAS,iBAAiB,EAC1B,OAEA,UAEjBC,EAAO,CACVC,OAAU,sBACVC,SAAYC,cAAcC,cAC1BC,WAAcX,EAAkBY,KAAK,WAAW,EAChDC,eAAkBT,EAClBU,cAAiB,CAClB,EAEAjC,OAAOkC,KAAK,CACXC,KAAM,OACNC,IAAKR,cAAcS,QACnBZ,KAAMA,EACNa,QAAS,SAASC,GACjBpB,EAAkBqB,KAAK,EACvBrB,EAAkBE,SAAS,iBAAiB,EAAEoB,KAAK,EAEnDzC,OAAO,qBAAqB,EAAEwC,KAAK,GACX,WAArBjB,EACFvB,OAAO,8BAA8B,EAErCA,OAAO,0BAA0B,GAFMyC,KAAK,EAInC,GAAPF,GACFjB,EAAgBoB,SAAS,qBAAqB,EAC9CpB,EAAgBqB,KAAKf,cAAcN,eAAe,GACnC,GAAPiB,GAERjB,EAAgBoB,SAAS,mBAAmB,EAC5CpB,EAAgBqB,KAAKf,cAAcgB,iBAAiB,GACrC,WAAPL,IAERjB,EAAgBoB,SAAS,qBAAqB,EAC9CpB,EAAgBqB,KAAKf,cAAciB,mBAAmB,GAGvDzB,EAAiBqB,KAAK,EACtBrB,EAAiBb,IAAI,UAAW,cAAc,EAE1CuC,EAAgB1B,EAAiBK,KAAK,aAAa,EACvDsB,cAAcD,CAAa,EAC3BA,EAAgBE,WAAW,WAC1B5B,EAAiB6B,QAAQ,GAAI,CAC9B,EAAG,GAAI,EACP7B,EAAiBK,KAAK,cAAeqB,CAAa,CACnD,EACAI,MAAO,SAASC,EAAOC,EAAYC,GAClCC,QAAQC,IAAIJ,CAAK,EACjBG,QAAQC,IAAIH,CAAU,EACtBE,QAAQC,IAAIF,CAAW,CACxB,EACAG,QAAS,GACV,CAAC,CACF,CAAC,CAEF,CAAC"}