{"version":3,"file":"public-2-gathering-data.min.js","sources":["public-2-gathering-data.js"],"sourcesContent":["/**\n * Class for gathering data\n */\nclass ApbctGatheringData { // eslint-disable-line no-unused-vars\n    /**\n     * Set session ID\n     * @return {void}\n     */\n    setSessionId() {\n        if (!apbctSessionStorage.isSet('apbct_session_id')) {\n            const sessionID = Math.random().toString(36).replace(/[^a-z]+/g, '').substr(2, 10);\n            apbctSessionStorage.set('apbct_session_id', sessionID, false);\n            apbctLocalStorage.set('apbct_page_hits', 1);\n            if (document.referrer) {\n                let urlReferer = new URL(document.referrer);\n                if (urlReferer.host !== location.host) {\n                    apbctSessionStorage.set('apbct_site_referer', document.referrer, false);\n                }\n            }\n        } else {\n            apbctLocalStorage.set('apbct_page_hits', Number(apbctLocalStorage.get('apbct_page_hits')) + 1);\n        }\n    }\n\n    /**\n     * Set three statements to the sessions storage: apbct_session_current_page, apbct_prev_referer.\n     * @return {void}\n     */\n    writeReferrersToSessionStorage() {\n        const sessionCurrentPage = apbctSessionStorage.get('apbct_session_current_page');\n        // set session apbct_referer\n        if (sessionCurrentPage!== false && document.location.href !== sessionCurrentPage) {\n            apbctSessionStorage.set('apbct_prev_referer', sessionCurrentPage, false);\n        }\n        // set session current page to know referrer\n        apbctSessionStorage.set('apbct_session_current_page', document.location.href, false);\n    }\n\n    /**\n     * Set cookies type.\n     * If it's not set or not equal to ctPublic.data__cookies_type, clear ct_mouse_moved and ct_has_scrolled values.\n     * @return {void}\n     */\n    setCookiesType() {\n        const cookiesType = apbctLocalStorage.get('ct_cookies_type');\n        if ( ! cookiesType || cookiesType !== ctPublic.data__cookies_type ) {\n            apbctLocalStorage.set('ct_cookies_type', ctPublic.data__cookies_type);\n            apbctLocalStorage.delete('ct_mouse_moved');\n            apbctLocalStorage.delete('ct_has_scrolled');\n        }\n    }\n\n    /**\n     * Start fields listening\n     * @return {void}\n     */\n    startFieldsListening() {\n        if (ctPublic.data__cookies_type !== 'alternative') {\n            this.startFieldsListening();\n            // 2nd try to add listeners for delayed appears forms\n            setTimeout(this.startFieldsListening, 1000);\n        }\n    }\n\n    /**\n     * Listen autocomplete\n     * @return {void}\n     */\n    listenAutocomplete() {\n        window.addEventListener('animationstart', this.apbctOnAnimationStart, true);\n        window.addEventListener('input', this.apbctOnInput, true);\n    }\n\n    /**\n     * Gathering typo data\n     * @return {void}\n     */\n    gatheringTypoData() {\n        document.ctTypoData = new CTTypoData();\n        document.ctTypoData.gatheringFields();\n        document.ctTypoData.setListeners();\n    }\n\n    /**\n     * Gathering mouse data\n     * @return {void}\n     */\n    gatheringMouseData() {\n        new ApbctCollectingUserMouseActivity();\n    }\n\n    /**\n     * Get screen info\n     * @return {string}\n     */\n    getScreenInfo() {\n        // Batch all layout-triggering property reads to avoid forced synchronous layouts\n        const docEl = document.documentElement;\n        const body = document.body;\n\n        // Read all layout properties in one batch\n        const layoutData = {\n            scrollWidth: docEl.scrollWidth,\n            bodyScrollHeight: body.scrollHeight,\n            docScrollHeight: docEl.scrollHeight,\n            bodyOffsetHeight: body.offsetHeight,\n            docOffsetHeight: docEl.offsetHeight,\n            bodyClientHeight: body.clientHeight,\n            docClientHeight: docEl.clientHeight,\n            docClientWidth: docEl.clientWidth,\n        };\n\n        return JSON.stringify({\n            fullWidth: layoutData.scrollWidth,\n            fullHeight: Math.max(\n                layoutData.bodyScrollHeight, layoutData.docScrollHeight,\n                layoutData.bodyOffsetHeight, layoutData.docOffsetHeight,\n                layoutData.bodyClientHeight, layoutData.docClientHeight,\n            ),\n            visibleWidth: layoutData.docClientWidth,\n            visibleHeight: layoutData.docClientHeight,\n        });\n    }\n\n    /**\n     * Restart listen fields to set ct_has_input_focused or ct_has_key_up\n     * @return {void}\n     */\n    restartFieldsListening() {\n        if (!apbctLocalStorage.isSet('ct_has_input_focused') && !apbctLocalStorage.isSet('ct_has_key_up')) {\n            this.startFieldsListening();\n        }\n    }\n\n    /**\n     * Init listeners for keyup and focus events\n     * @return {void}\n     */\n    startFieldsListening() {\n        if (\n            (apbctLocalStorage.isSet('ct_has_key_up') || apbctLocalStorage.get('ct_has_key_up')) &&\n            (apbctLocalStorage.isSet('ct_has_input_focused') || apbctLocalStorage.get('ct_has_input_focused')) &&\n            (\n                ctPublic.data__cookies_type === 'native' &&\n                ctGetCookie('ct_has_input_focused') !== undefined &&\n                ctGetCookie('ct_has_key_up') !== undefined\n            )\n        ) {\n            // already set\n            return;\n        }\n\n        let forms = ctGetPageForms();\n        ctPublic.handled_fields = [];\n\n        if (forms.length > 0) {\n            for (let i = 0; i < forms.length; i++) {\n                // handle only inputs and textareas\n                const handledFormFields = forms[i].querySelectorAll('input,textarea');\n                for (let i = 0; i < handledFormFields.length; i++) {\n                    if (handledFormFields[i].type !== 'hidden') {\n                        // collect handled fields to remove handler in the future\n                        ctPublic.handled_fields.push(handledFormFields[i]);\n                        // do attach handlers\n                        apbct_attach_event_handler(handledFormFields[i], 'focus', ctFunctionHasInputFocused);\n                        apbct_attach_event_handler(handledFormFields[i], 'keyup', ctFunctionHasKeyUp);\n                    }\n                }\n            }\n        }\n    }\n}\n\n/**\n * Class collecting user mouse activity data\n *\n */\n// eslint-disable-next-line no-unused-vars, require-jsdoc\nclass ApbctCollectingUserMouseActivity {\n    elementBody = document.querySelector('body');\n    collectionForms = document.forms;\n    /**\n     * Constructor\n     */\n    constructor() {\n        this.setListeners();\n    }\n\n    /**\n     * Set listeners\n     */\n    setListeners() {\n        this.elementBody.addEventListener('click', (event) => {\n            this.checkElementInForms(event, 'addClicks');\n        });\n\n        this.elementBody.addEventListener('mouseup', (event) => {\n            const selectedType = document.getSelection().type.toString();\n            if (selectedType == 'Range') {\n                this.addSelected();\n            }\n        });\n\n        this.elementBody.addEventListener('mousemove', (event) => {\n            this.checkElementInForms(event, 'trackMouseMovement');\n        });\n    }\n\n    /**\n     * Checking if there is an element in the form\n     * @param {object} event\n     * @param {string} addTarget\n     */\n    checkElementInForms(event, addTarget) {\n        let resultCheck;\n        for (let i = 0; i < this.collectionForms.length; i++) {\n            if (\n                event.target.outerHTML.length > 0 &&\n                this.collectionForms[i].innerHTML.length > 0\n            ) {\n                resultCheck = this.collectionForms[i].innerHTML.indexOf(event.target.outerHTML);\n            } else {\n                resultCheck = -1;\n            }\n        }\n\n        switch (addTarget) {\n        case 'addClicks':\n            if (resultCheck < 0) {\n                this.addClicks();\n            }\n            break;\n        case 'trackMouseMovement':\n            if (resultCheck > -1) {\n                this.trackMouseMovement();\n            }\n            break;\n        default:\n            break;\n        }\n    }\n\n    /**\n     * Add clicks\n     */\n    addClicks() {\n        if (document.ctCollectingUserActivityData) {\n            if (document.ctCollectingUserActivityData.clicks) {\n                document.ctCollectingUserActivityData.clicks++;\n            } else {\n                document.ctCollectingUserActivityData.clicks = 1;\n            }\n            return;\n        }\n\n        document.ctCollectingUserActivityData = {clicks: 1};\n    }\n\n    /**\n     * Add selected\n     */\n    addSelected() {\n        if (document.ctCollectingUserActivityData) {\n            if (document.ctCollectingUserActivityData.selected) {\n                document.ctCollectingUserActivityData.selected++;\n            } else {\n                document.ctCollectingUserActivityData.selected = 1;\n            }\n            return;\n        }\n\n        document.ctCollectingUserActivityData = {selected: 1};\n    }\n\n    /**\n     * Track mouse movement\n     */\n    trackMouseMovement() {\n        if (!document.ctCollectingUserActivityData) {\n            document.ctCollectingUserActivityData = {};\n        }\n        if (!document.ctCollectingUserActivityData.mouseMovementsInsideForm) {\n            document.ctCollectingUserActivityData.mouseMovementsInsideForm = false;\n        }\n\n        document.ctCollectingUserActivityData.mouseMovementsInsideForm = true;\n    }\n}\n\n/**\n * Class for gathering data about user typing.\n *\n * ==============================\n * isAutoFill       - only person can use auto fill\n * isUseBuffer      - use buffer for fill current field\n * ==============================\n * lastKeyTimestamp - timestamp of last key press in current field\n * speedDelta       - change for each key press in current field,\n *                    as difference between current and previous key press timestamps,\n *                    robots in general have constant speed of typing.\n *                    If speedDelta is constant for each key press in current field,\n *                    so, speedDelta will be roughly to 0, then it is robot.\n * ==============================\n */\n// eslint-disable-next-line no-unused-vars,require-jsdoc\nclass CTTypoData {\n    fieldData = {\n        isAutoFill: false,\n        isUseBuffer: false,\n        speedDelta: 0,\n        firstKeyTimestamp: 0,\n        lastKeyTimestamp: 0,\n        lastDelta: 0,\n        countOfKey: 0,\n    };\n\n    fields = document.querySelectorAll('textarea[name=comment]');\n\n    data = [];\n\n    /**\n     * Gather fields.\n     */\n    gatheringFields() {\n        let fieldSet = Array.prototype.slice.call(this.fields);\n        fieldSet.forEach((field, i) => {\n            this.data.push(Object.assign({}, this.fieldData));\n        });\n    }\n\n    /**\n     * Set listeners.\n     */\n    setListeners() {\n        this.fields.forEach((field, i) => {\n            field.addEventListener('paste', () => {\n                this.data[i].isUseBuffer = true;\n            });\n        });\n\n        this.fields.forEach((field, i) => {\n            field.addEventListener('onautocomplete', () => {\n                this.data[i].isAutoFill = true;\n            });\n        });\n\n        this.fields.forEach((field, i) => {\n            field.addEventListener('input', () => {\n                this.data[i].countOfKey++;\n                let time = + new Date();\n                let currentDelta = 0;\n\n                if (this.data[i].countOfKey === 1) {\n                    this.data[i].lastKeyTimestamp = time;\n                    this.data[i].firstKeyTimestamp = time;\n                    return;\n                }\n\n                currentDelta = time - this.data[i].lastKeyTimestamp;\n                if (this.data[i].countOfKey === 2) {\n                    this.data[i].lastKeyTimestamp = time;\n                    this.data[i].lastDelta = currentDelta;\n                    return;\n                }\n\n                if (this.data[i].countOfKey > 2) {\n                    this.data[i].speedDelta += Math.abs(this.data[i].lastDelta - currentDelta);\n                    this.data[i].lastKeyTimestamp = time;\n                    this.data[i].lastDelta = currentDelta;\n                }\n            });\n        });\n    }\n}\n\n// eslint-disable-next-line camelcase\nconst ctTimeMs = new Date().getTime();\nlet ctMouseEventTimerFlag = true; // Reading interval flag\nlet ctMouseData = [];\nlet ctMouseDataCounter = 0;\nlet ctMouseReadInterval;\nlet ctMouseWriteDataInterval;\n\n\n// Writing first key press timestamp\nconst ctFunctionFirstKey = function output(event) {\n    let KeyTimestamp = Math.floor(new Date().getTime() / 1000);\n    ctSetCookie('ct_fkp_timestamp', KeyTimestamp);\n    ctKeyStopStopListening();\n};\n\n/**\n * Stop mouse observing function\n */\nfunction ctMouseStopData() {\n    apbct_remove_event_handler(document, 'mousemove', ctFunctionMouseMove);\n    clearInterval(ctMouseReadInterval);\n    clearInterval(ctMouseWriteDataInterval);\n}\n\n\n// mouse read\nif (ctPublic.data__key_is_ok) {\n    // Reading interval\n    ctMouseReadInterval = setInterval(function() {\n        ctMouseEventTimerFlag = true;\n    }, 150);\n\n    // Writting interval\n    ctMouseWriteDataInterval = setInterval(function() {\n        ctSetCookie('ct_pointer_data', JSON.stringify(ctMouseData));\n    }, 1200);\n}\n\n// Logging mouse position each 150 ms\nconst ctFunctionMouseMove = function output(event) {\n    ctSetMouseMoved();\n    if (ctMouseEventTimerFlag === true) {\n        ctMouseData.push([\n            Math.round(event.clientY),\n            Math.round(event.clientX),\n            Math.round(new Date().getTime() - ctTimeMs),\n        ]);\n\n        ctMouseDataCounter++;\n        ctMouseEventTimerFlag = false;\n        if (ctMouseDataCounter >= 50) {\n            ctMouseStopData();\n        }\n    }\n};\n\n/**\n * Stop key listening function\n */\nfunction ctKeyStopStopListening() {\n    apbct_remove_event_handler(document, 'mousedown', ctFunctionFirstKey);\n    apbct_remove_event_handler(document, 'keydown', ctFunctionFirstKey);\n}\n\n/**\n * ctSetHasScrolled\n */\nfunction ctSetHasScrolled() {\n    if ( ! apbctLocalStorage.isSet('ct_has_scrolled') || ! apbctLocalStorage.get('ct_has_scrolled') ) {\n        ctSetCookie('ct_has_scrolled', 'true');\n        apbctLocalStorage.set('ct_has_scrolled', true);\n    }\n    if (\n        ctPublic.data__cookies_type === 'native' &&\n        ctGetCookie('ct_has_scrolled') === undefined\n    ) {\n        ctSetCookie('ct_has_scrolled', 'true');\n    }\n}\n\n/**\n * ctSetMouseMoved\n */\nfunction ctSetMouseMoved() {\n    if ( ! apbctLocalStorage.isSet('ct_mouse_moved') || ! apbctLocalStorage.get('ct_mouse_moved') ) {\n        ctSetCookie('ct_mouse_moved', 'true');\n        apbctLocalStorage.set('ct_mouse_moved', true);\n    }\n    if (\n        ctPublic.data__cookies_type === 'native' &&\n        ctGetCookie('ct_mouse_moved') === undefined\n    ) {\n        ctSetCookie('ct_mouse_moved', 'true');\n    }\n}\n\n/**\n * stop listening keyup and focus\n * @param {string} eventName\n * @param {string} functionName\n */\nfunction ctStopFieldsListening(eventName, functionName) {\n    if (typeof ctPublic.handled_fields !== 'undefined' && ctPublic.handled_fields.length > 0) {\n        for (let i = 0; i < ctPublic.handled_fields.length; i++) {\n            apbct_remove_event_handler(ctPublic.handled_fields[i], eventName, functionName);\n        }\n    }\n}\n\nlet ctFunctionHasInputFocused = function output(event) {\n    ctSetHasInputFocused();\n    ctStopFieldsListening('focus', ctFunctionHasInputFocused);\n};\n\nlet ctFunctionHasKeyUp = function output(event) {\n    ctSetHasKeyUp();\n    ctStopFieldsListening('keyup', ctFunctionHasKeyUp);\n};\n\n/**\n * set ct_has_input_focused ct_has_key_up cookies on session period\n */\nfunction ctSetHasInputFocused() {\n    if ( ! apbctLocalStorage.isSet('ct_has_input_focused') || ! apbctLocalStorage.get('ct_has_input_focused') ) {\n        apbctLocalStorage.set('ct_has_input_focused', true);\n    }\n    if (\n        (\n            (\n                ctPublic.data__cookies_type === 'native' &&\n                ctGetCookie('ct_has_input_focused') === undefined\n            ) ||\n            ctPublic.data__cookies_type === 'alternative'\n        ) ||\n        (\n            ctPublic.data__cookies_type === 'none' &&\n            (\n                typeof ctPublic.force_alt_cookies !== 'undefined' ||\n                (ctPublic.force_alt_cookies !== undefined && ctPublic.force_alt_cookies)\n            )\n        )\n    ) {\n        ctSetCookie('ct_has_input_focused', 'true');\n    }\n}\n\n/**\n * ctSetHasKeyUp\n */\nfunction ctSetHasKeyUp() {\n    if ( ! apbctLocalStorage.isSet('ct_has_key_up') || ! apbctLocalStorage.get('ct_has_key_up') ) {\n        apbctLocalStorage.set('ct_has_key_up', true);\n    }\n    if (\n        (\n            (\n                ctPublic.data__cookies_type === 'native' &&\n                ctGetCookie('ct_has_key_up') === undefined\n            ) ||\n            ctPublic.data__cookies_type === 'alternative'\n        ) ||\n        (\n            ctPublic.data__cookies_type === 'none' &&\n            (\n                typeof ctPublic.force_alt_cookies !== 'undefined' ||\n                (ctPublic.force_alt_cookies !== undefined && ctPublic.force_alt_cookies)\n            )\n        )\n    ) {\n        ctSetCookie('ct_has_key_up', 'true');\n    }\n}\n\nif (ctPublic.data__key_is_ok) {\n    apbct_attach_event_handler(document, 'mousemove', ctFunctionMouseMove);\n    apbct_attach_event_handler(document, 'mousedown', ctFunctionFirstKey);\n    apbct_attach_event_handler(document, 'keydown', ctFunctionFirstKey);\n    apbct_attach_event_handler(document, 'scroll', ctSetHasScrolled);\n}\n\n/**\n * @param {mixed} commonCookies\n * @return {string}\n */\nfunction getJavascriptClientData(commonCookies = []) { // eslint-disable-line no-unused-vars\n    let resultDataJson = {};\n\n    resultDataJson.ct_checked_emails = ctGetCookie(ctPublicFunctions.cookiePrefix + 'ct_checked_emails');\n    resultDataJson.ct_checked_emails_exist = ctGetCookie(ctPublicFunctions.cookiePrefix + 'ct_checked_emails_exist');\n    resultDataJson.ct_checkjs = ctGetCookie(ctPublicFunctions.cookiePrefix + 'ct_checkjs');\n    resultDataJson.ct_fkp_timestamp = ctGetCookie(ctPublicFunctions.cookiePrefix + 'ct_fkp_timestamp');\n    resultDataJson.ct_pointer_data = ctGetCookie(ctPublicFunctions.cookiePrefix + 'ct_pointer_data');\n    resultDataJson.ct_ps_timestamp = ctGetCookie(ctPublicFunctions.cookiePrefix + 'ct_ps_timestamp');\n    resultDataJson.ct_screen_info = ctGetCookie(ctPublicFunctions.cookiePrefix + 'ct_screen_info');\n    resultDataJson.ct_timezone = ctGetCookie(ctPublicFunctions.cookiePrefix + 'ct_timezone');\n\n    // collecting data from localstorage\n    const ctMouseMovedLocalStorage = apbctLocalStorage.get(ctPublicFunctions.cookiePrefix + 'ct_mouse_moved');\n    const ctHasScrolledLocalStorage = apbctLocalStorage.get(ctPublicFunctions.cookiePrefix + 'ct_has_scrolled');\n    const ctCookiesTypeLocalStorage = apbctLocalStorage.get(ctPublicFunctions.cookiePrefix + 'ct_cookies_type');\n    const apbctPageHits = apbctLocalStorage.get('apbct_page_hits');\n    const apbctPrevReferer = apbctSessionStorage.get('apbct_prev_referer');\n    const apbctSiteReferer = apbctSessionStorage.get('apbct_site_referer');\n    const ctJsErrorsLocalStorage = apbctLocalStorage.get(ctPublicFunctions.cookiePrefix + 'ct_js_errors');\n    const ctPixelUrl = apbctLocalStorage.get(ctPublicFunctions.cookiePrefix + 'apbct_pixel_url');\n    const apbctHeadless = apbctLocalStorage.get(ctPublicFunctions.cookiePrefix + 'apbct_headless');\n    const ctBotDetectorFrontendDataLog = apbctLocalStorage.get(\n        ctPublicFunctions.cookiePrefix + 'ct_bot_detector_frontend_data_log',\n    );\n\n    // collecting data from cookies\n    const ctMouseMovedCookie = ctGetCookie(ctPublicFunctions.cookiePrefix + 'ct_mouse_moved');\n    const ctHasScrolledCookie = ctGetCookie(ctPublicFunctions.cookiePrefix + 'ct_has_scrolled');\n    const ctCookiesTypeCookie = ctGetCookie(ctPublicFunctions.cookiePrefix + 'ct_cookies_type');\n    const ctCookiesPixelUrl = ctGetCookie(ctPublicFunctions.cookiePrefix + 'apbct_pixel_url');\n    const apbctHeadlessNative = !!ctGetCookie(ctPublicFunctions.cookiePrefix + 'apbct_headless');\n\n\n    resultDataJson.ct_mouse_moved = ctMouseMovedLocalStorage !== undefined ?\n        ctMouseMovedLocalStorage : ctMouseMovedCookie;\n    resultDataJson.ct_has_scrolled = ctHasScrolledLocalStorage !== undefined ?\n        ctHasScrolledLocalStorage : ctHasScrolledCookie;\n    resultDataJson.ct_cookies_type = ctCookiesTypeLocalStorage !== undefined ?\n        ctCookiesTypeLocalStorage : ctCookiesTypeCookie;\n    resultDataJson.apbct_pixel_url = ctPixelUrl !== undefined ?\n        ctPixelUrl : ctCookiesPixelUrl;\n    resultDataJson.apbct_headless = apbctHeadless !== undefined ?\n        apbctHeadless : apbctHeadlessNative;\n    resultDataJson.ct_bot_detector_frontend_data_log = ctBotDetectorFrontendDataLog !== undefined ?\n        ctBotDetectorFrontendDataLog : '';\n    if (resultDataJson.apbct_pixel_url && typeof(resultDataJson.apbct_pixel_url) == 'string') {\n        if (resultDataJson.apbct_pixel_url.indexOf('%3A%2F')) {\n            resultDataJson.apbct_pixel_url = decodeURIComponent(resultDataJson.apbct_pixel_url);\n        }\n    }\n\n    resultDataJson.apbct_page_hits = apbctPageHits;\n    resultDataJson.apbct_prev_referer = apbctPrevReferer;\n    resultDataJson.apbct_site_referer = apbctSiteReferer;\n    resultDataJson.apbct_ct_js_errors = ctJsErrorsLocalStorage;\n\n    if (!resultDataJson.apbct_pixel_url) {\n        resultDataJson.apbct_pixel_url = ctPublic.pixel__url;\n    }\n\n    if (typeof (commonCookies) === 'object') {\n        for (let i = 0; i < commonCookies.length; ++i) {\n            if ( typeof (commonCookies[i][1]) === 'object' ) {\n                // this is for handle SFW cookies\n                resultDataJson[commonCookies[i][1][0]] = commonCookies[i][1][1];\n            } else {\n                resultDataJson[commonCookies[i][0]] = commonCookies[i][1];\n            }\n        }\n    } else {\n        console.log('APBCT JS ERROR: Collecting data type mismatch');\n    }\n\n    // Parse JSON properties to prevent double JSON encoding\n    resultDataJson = removeDoubleJsonEncoding(resultDataJson);\n\n\n    return JSON.stringify(resultDataJson);\n}\n\n/**\n * @return {bool}\n */\nfunction ctIsDrawPixel() {\n    if (ctPublic.pixel__setting == '3' && ctPublic.settings__data__bot_detector_enabled == '1') {\n        return false;\n    }\n\n    return +ctPublic.pixel__enabled ||\n        (ctPublic.data__cookies_type === 'none' && document.querySelectorAll('img#apbct_pixel').length === 0) ||\n        (ctPublic.data__cookies_type === 'alternative' && document.querySelectorAll('img#apbct_pixel').length === 0);\n}\n\n/**\n * @param {string} pixelUrl\n * @return {bool}\n */\nfunction ctSetPixelImg(pixelUrl) {\n    if (ctPublic.pixel__setting == '3' && ctPublic.settings__data__bot_detector_enabled == '1') {\n        return false;\n    }\n    ctSetCookie('apbct_pixel_url', pixelUrl);\n    if ( ctIsDrawPixel() ) {\n        if ( ! document.getElementById('apbct_pixel') ) {\n            let insertedImg = document.createElement('img');\n            insertedImg.setAttribute('alt', 'CleanTalk Pixel');\n            insertedImg.setAttribute('title', 'CleanTalk Pixel');\n            insertedImg.setAttribute('id', 'apbct_pixel');\n            insertedImg.setAttribute('style', 'display: none; left: 99999px;');\n            insertedImg.setAttribute('src', pixelUrl);\n            apbct('body').append(insertedImg);\n        }\n    }\n}\n\n/**\n * @param {string} pixelUrl\n * @return {bool}\n */\nfunction ctSetPixelImgFromLocalstorage(pixelUrl) {\n    if (ctPublic.pixel__setting == '3' && ctPublic.settings__data__bot_detector_enabled == '1') {\n        return false;\n    }\n    if ( ctIsDrawPixel() ) {\n        if ( ! document.getElementById('apbct_pixel') ) {\n            let insertedImg = document.createElement('img');\n            insertedImg.setAttribute('alt', 'CleanTalk Pixel');\n            insertedImg.setAttribute('title', 'CleanTalk Pixel');\n            insertedImg.setAttribute('id', 'apbct_pixel');\n            insertedImg.setAttribute('style', 'display: none; left: 99999px;');\n            insertedImg.setAttribute('src', decodeURIComponent(pixelUrl));\n            apbct('body').append(insertedImg);\n        }\n    }\n}\n\n/**\n * ctGetPixelUrl\n * @return {bool}\n */\n// eslint-disable-next-line no-unused-vars, require-jsdoc\nfunction ctGetPixelUrl() {\n    if (ctPublic.pixel__setting == '3' && ctPublic.settings__data__bot_detector_enabled == '1') {\n        return false;\n    }\n\n    // Check if pixel is already in localstorage and is not outdated\n    let localStoragePixelUrl = apbctLocalStorage.get('apbct_pixel_url');\n    if ( localStoragePixelUrl !== false ) {\n        if ( ! apbctLocalStorage.isAlive('apbct_pixel_url', 3600 * 3) ) {\n            apbctLocalStorage.delete('apbct_pixel_url');\n        } else {\n            // if so - load pixel from localstorage and draw it skipping AJAX\n            ctSetPixelImgFromLocalstorage(localStoragePixelUrl);\n            return;\n        }\n    }\n    // Using REST API handler\n    if ( ctPublicFunctions.data__ajax_type === 'rest' ) {\n        apbct_public_sendREST(\n            'apbct_get_pixel_url',\n            {\n                method: 'POST',\n                callback: function(result) {\n                    if (result &&\n                        (typeof result === 'string' || result instanceof String) && result.indexOf('https') === 0) {\n                        // set  pixel url to localstorage\n                        if ( ! apbctLocalStorage.get('apbct_pixel_url') ) {\n                            // set pixel to the storage\n                            apbctLocalStorage.set('apbct_pixel_url', result);\n                            // update pixel data in the hidden fields\n                            ctNoCookieAttachHiddenFieldsToForms();\n                        }\n                        // then run pixel drawing\n                        ctSetPixelImg(result);\n                    }\n                },\n            },\n        );\n        // Using AJAX request and handler\n    } else {\n        apbct_public_sendAJAX(\n            {\n                action: 'apbct_get_pixel_url',\n            },\n            {\n                notJson: true,\n                callback: function(result) {\n                    if (result &&\n                        (typeof result === 'string' || result instanceof String) && result.indexOf('https') === 0) {\n                        // set  pixel url to localstorage\n                        if ( ! apbctLocalStorage.get('apbct_pixel_url') ) {\n                            // set pixel to the storage\n                            apbctLocalStorage.set('apbct_pixel_url', result);\n                            // update pixel data in the hidden fields\n                            ctNoCookieAttachHiddenFieldsToForms();\n                        }\n                        // then run pixel drawing\n                        ctSetPixelImg(result);\n                    }\n                },\n                beforeSend: function(xhr) {\n                    xhr.setRequestHeader('X-Robots-Tag', 'noindex, nofollow');\n                },\n            },\n        );\n    }\n}\n\n// eslint-disable-next-line no-unused-vars,require-jsdoc\nfunction ctSetPixelUrlLocalstorage(ajaxPixelUrl) {\n    // set pixel to the storage\n    ctSetCookie('apbct_pixel_url', ajaxPixelUrl);\n}\n\n/**\n * Handler for -webkit based browser that listen for a custom\n * animation create using the :pseudo-selector in the stylesheet.\n * Works with Chrome, Safari\n *\n * @param {AnimationEvent} event\n */\n// eslint-disable-next-line no-unused-vars,require-jsdoc\nfunction apbctOnAnimationStart(event) {\n    ('onautofillstart' === event.animationName) ?\n        apbctAutocomplete(event.target) : apbctCancelAutocomplete(event.target);\n}\n\n/**\n * Handler for non-webkit based browser that listen for input\n * event to trigger the autocomplete-cancel process.\n * Works with Firefox, Edge, IE11\n *\n * @param {InputEvent} event\n */\n// eslint-disable-next-line no-unused-vars,require-jsdoc\nfunction apbctOnInput(event) {\n    ('insertReplacementText' === event.inputType || !('data' in event)) ?\n        apbctAutocomplete(event.target) : apbctCancelAutocomplete(event.target);\n}\n\n/**\n * Manage an input element when its value is autocompleted\n * by the browser in the following steps:\n * - add [autocompleted] attribute from event.target\n * - create 'onautocomplete' cancelable CustomEvent\n * - dispatch the Event\n *\n * @param {HtmlInputElement} element\n */\nfunction apbctAutocomplete(element) {\n    if (element.hasAttribute('autocompleted')) return;\n    element.setAttribute('autocompleted', '');\n\n    let event = new window.CustomEvent('onautocomplete', {\n        bubbles: true, cancelable: true, detail: null,\n    });\n\n    // no autofill if preventDefault is called\n    if (!element.dispatchEvent(event)) {\n        element.value = '';\n    }\n}\n\n/**\n * Manage an input element when its autocompleted value is\n * removed by the browser in the following steps:\n * - remove [autocompleted] attribute from event.target\n * - create 'onautocomplete' non-cancelable CustomEvent\n * - dispatch the Event\n *\n * @param {HtmlInputElement} element\n */\nfunction apbctCancelAutocomplete(element) {\n    if (!element.hasAttribute('autocompleted')) return;\n    element.removeAttribute('autocompleted');\n\n    // dispatch event\n    element.dispatchEvent(new window.CustomEvent('onautocomplete', {\n        bubbles: true, cancelable: false, detail: null,\n    }));\n}\n\n/**\n * ctNoCookieAttachHiddenFieldsToForms\n */\nfunction ctNoCookieAttachHiddenFieldsToForms() {\n    if (ctPublic.data__cookies_type !== 'none') {\n        return;\n    }\n\n    let forms = ctGetPageForms();\n\n    if (forms) {\n        for ( let i = 0; i < forms.length; i++ ) {\n            if ( new ApbctHandler().checkHiddenFieldsExclusions(document.forms[i], 'no_cookie') ) {\n                continue;\n            }\n\n            // ignore forms with get method @todo We need to think about this\n            if (document.forms[i].getAttribute('method') === null ||\n                document.forms[i].getAttribute('method').toLowerCase() === 'post') {\n                // remove old sets\n                let fields = forms[i].querySelectorAll('.ct_no_cookie_hidden_field');\n                for ( let j = 0; j < fields.length; j++ ) {\n                    fields[j].outerHTML = '';\n                }\n                // add new set\n                document.forms[i].append(new ApbctAttachData().constructNoCookieHiddenField());\n            }\n        }\n    }\n}\n"],"names":["ApbctGatheringData","setSessionId","sessionID","apbctSessionStorage","isSet","apbctLocalStorage","set","Number","get","Math","random","toString","replace","substr","document","referrer","URL","host","location","writeReferrersToSessionStorage","sessionCurrentPage","href","setCookiesType","cookiesType","ctPublic","data__cookies_type","delete","startFieldsListening","this","setTimeout","listenAutocomplete","window","addEventListener","apbctOnAnimationStart","apbctOnInput","gatheringTypoData","ctTypoData","CTTypoData","gatheringFields","setListeners","gatheringMouseData","ApbctCollectingUserMouseActivity","getScreenInfo","docEl","documentElement","body","layoutData","scrollWidth","bodyScrollHeight","scrollHeight","docScrollHeight","bodyOffsetHeight","offsetHeight","docOffsetHeight","bodyClientHeight","clientHeight","docClientHeight","docClientWidth","clientWidth","JSON","stringify","fullWidth","fullHeight","max","visibleWidth","visibleHeight","restartFieldsListening","undefined","ctGetCookie","let","forms","ctGetPageForms","handled_fields","length","i","handledFormFields","querySelectorAll","type","push","apbct_attach_event_handler","ctFunctionHasInputFocused","ctFunctionHasKeyUp","elementBody","querySelector","collectionForms","constructor","checkElementInForms","event","getSelection","addSelected","addTarget","resultCheck","target","outerHTML","innerHTML","indexOf","addClicks","trackMouseMovement","ctCollectingUserActivityData","clicks","selected","mouseMovementsInsideForm","fieldData","isAutoFill","isUseBuffer","speedDelta","firstKeyTimestamp","lastKeyTimestamp","lastDelta","countOfKey","fields","data","Array","prototype","slice","call","forEach","field","Object","assign","currentDelta","time","Date","abs","ctTimeMs","getTime","ctMouseEventTimerFlag","ctMouseData","ctMouseDataCounter","ctMouseReadInterval","ctMouseWriteDataInterval","ctFunctionFirstKey","KeyTimestamp","floor","ctSetCookie","ctKeyStopStopListening","ctMouseStopData","apbct_remove_event_handler","ctFunctionMouseMove","clearInterval","data__key_is_ok","setInterval","ctSetMouseMoved","round","clientY","clientX","ctSetHasScrolled","ctStopFieldsListening","eventName","functionName","ctSetHasInputFocused","ctSetHasKeyUp","force_alt_cookies","getJavascriptClientData","commonCookies","resultDataJson","ct_checked_emails","ctPublicFunctions","cookiePrefix","ct_checked_emails_exist","ct_checkjs","ct_fkp_timestamp","ct_pointer_data","ct_ps_timestamp","ct_screen_info","ct_timezone","ctMouseMovedLocalStorage","ctHasScrolledLocalStorage","ctCookiesTypeLocalStorage","apbctPageHits","apbctPrevReferer","apbctSiteReferer","ctJsErrorsLocalStorage","ctPixelUrl","apbctHeadless","ctBotDetectorFrontendDataLog","ctMouseMovedCookie","ctHasScrolledCookie","ctCookiesTypeCookie","ctCookiesPixelUrl","apbctHeadlessNative","ct_mouse_moved","ct_has_scrolled","ct_cookies_type","apbct_pixel_url","apbct_headless","ct_bot_detector_frontend_data_log","decodeURIComponent","apbct_page_hits","apbct_prev_referer","apbct_site_referer","apbct_ct_js_errors","pixel__url","console","log","removeDoubleJsonEncoding","ctIsDrawPixel","pixel__setting","settings__data__bot_detector_enabled","pixel__enabled","ctSetPixelImg","pixelUrl","insertedImg","getElementById","createElement","setAttribute","apbct","append","ctSetPixelImgFromLocalstorage","ctGetPixelUrl","localStoragePixelUrl","isAlive","data__ajax_type","apbct_public_sendREST","method","callback","result","String","ctNoCookieAttachHiddenFieldsToForms","apbct_public_sendAJAX","action","notJson","beforeSend","xhr","setRequestHeader","ctSetPixelUrlLocalstorage","ajaxPixelUrl","animationName","apbctAutocomplete","apbctCancelAutocomplete","inputType","element","hasAttribute","CustomEvent","bubbles","cancelable","detail","dispatchEvent","value","removeAttribute","ApbctHandler","checkHiddenFieldsExclusions","getAttribute","toLowerCase","j","ApbctAttachData","constructNoCookieHiddenField"],"mappings":"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"}