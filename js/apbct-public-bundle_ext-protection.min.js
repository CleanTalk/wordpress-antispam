<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
function _callSuper(e,t,n){return t=_getPrototypeOf(t),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(t,n||[],_getPrototypeOf(e).constructor):t.apply(e,n))}function _possibleConstructorReturn(e,t){if(t&&("object"==_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createForOfIteratorHelper(e,t){var n,o,a,i,c="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(c)return a=!(o=!0),{s:function(){c=c.call(e)},n:function(){var e=c.next();return o=e.done,e},e:function(e){a=!0,n=e},f:function(){try{o||null==c.return||c.return()}finally{if(a)throw n}}};if(Array.isArray(e)||(c=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return c&&(e=c),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function apbctSetEmailDecoderPopupAnimation(){var e=["apbct_dog_one","apbct_dog_two","apbct_dog_three"],t=document.createElement("div");t.classList="apbct-ee-animation-wrapper";for(var n=0;n<e.length;n++){var o=document.createElement("span");o.classList="apbct_dog "+e[n],o.innerText="@",t.append(o)}return t}function ctFillDecodedEmailHandler(){var e,t,n,o=0<arguments.length&&void 0!==arguments[0]&&arguments[0],a=!1,i="",c="",r=("undefined"!=typeof ctPublic?(this.removeEventListener("click",ctFillDecodedEmailHandler),a=this,ctPublic.encodedEmailNodesIsMixed=!1,i=ctPublic.wl_brandname,c=ctPublic.encodedEmailNodes):"undefined"!=typeof ctAdminCommon&&(i=ctAdminCommon.plugin_name,c=ctAdminCommon.encodedEmailNode),document.body.classList.add("apbct-popup-fade"),document.getElementById("apbct_popup"));r?(r.setAttribute("style","display: inherit"),"undefined"!=typeof ctPublicFunctions&&ctPublicFunctions.text__ee_wait_for_decoding?document.getElementById("apbct_popup_text").innerHTML=ctPublicFunctions.text__ee_wait_for_decoding:document.getElementById("apbct_popup_text").innerHTML=ctAdminCommon.text__ee_wait_for_decoding):((r=document.createElement("div")).setAttribute("class","apbct-popup apbct-email-encoder-popup"),r.setAttribute("id","apbct_popup"),(e=document.createElement("span")).classList="apbct-email-encoder-elements_center",(t=document.createElement("p")).innerText=i,t.setAttribute("class","apbct-email-encoder--popup-header"),e.append(t),(i=document.createElement("div")).setAttribute("id","apbct_popup_text"),i.setAttribute("class","apbct-email-encoder-elements_center"),i.style.color="black",(t=document.createElement("p")).id="apbct_email_ecoder__popup_text_node_first","undefined"!=typeof ctPublicFunctions&&ctPublicFunctions.text__ee_wait_for_decoding?t.innerText=ctPublicFunctions.text__ee_wait_for_decoding:t.innerText=ctAdminCommon.text__ee_wait_for_decoding,t.setAttribute("class","apbct-email-encoder-elements_center"),(n=document.createElement("p")).id="apbct_email_ecoder__popup_text_node_second","undefined"!=typeof ctPublicFunctions&&ctPublicFunctions.text__ee_decoding_process?n.innerText=ctPublicFunctions.text__ee_decoding_process:n.innerText=ctAdminCommon.text__ee_decoding_process,i.append(t),i.append(n),r.append(e),r.append(i),r.append(apbctSetEmailDecoderPopupAnimation()),document.body.append(r)),apbctAjaxEmailDecodeBulk(o,c,a)}function apbctAjaxEmailDecodeBulk(e,t,n){if(e&&n){for(var o={post_url:document.location.href,referrer:document.referrer,encodedEmails:""},a=(1==ctPublic.settings__data__bot_detector_enabled?o.event_token=botDetectorLocalStorage.get("bot_detector_event_token"):o.event_javascript_data=getJavascriptClientData(),{}),i=0;i<t.length;i++){void 0!==t[i].href&&0===t[i].href.indexOf("mailto:")&&(e.preventDefault(),ctPublic.encodedEmailNodesIsMixed=!0);var c=document.createElement("div");c.setAttribute("class","apbct-tooltip"),apbct(t[i]).append(c),a[i]=t[i].dataset.originalString}o.encodedEmails=JSON.stringify(a),"rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("apbct_decode_email",{data:o,method:"POST",callback:function(e){ctSetCookie("apbct_email_encoder_passed",ctPublic.emailEncoderPassKey,""),apbctEmailEncoderCallbackBulk(e,t,n)},onErrorCallback:function(e){resetEncodedNodes(),ctShowDecodeComment(e)}}):(o.action="apbct_decode_email",apbct_public_sendAJAX(o,{notJson:!1,callback:function(e){console.log("result"),console.log(e),ctSetCookie("apbct_email_encoder_passed",ctPublic.emailEncoderPassKey,""),apbctEmailEncoderCallbackBulk(e,t,n)},onErrorCallback:function(e){resetEncodedNodes(),ctShowDecodeComment(e)}}))}else{var o=t.dataset.originalString,o={encodedEmails:JSON.stringify({0:o})},r=document.createElement("div");r.setAttribute("class","apbct-tooltip"),t.appendChild(r),apbct_admin_sendAJAX({action:"apbct_decode_email",encodedEmails:o.encodedEmails},{callback:function(e){apbctEmailEncoderCallbackBulk(e,t,!1)},notJson:!0})}}function apbctEmailEncoderCallbackBulk(i,c){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];i.success&&!0===i.data[0].is_allowed?setTimeout(function(){var t,e,n,o,a=document.getElementById("apbct_popup");null!==a&&(o="",o=r?(i.data.forEach(function(e){e.encoded_email===r.dataset.originalString&&(t=e)}),t.decoded_email.split(/[&?]/)[0]):i.data[0].decoded_email,n=a.querySelector("#apbct_email_ecoder__popup_text_node_first"),(e=document.createElement("b")).setAttribute("class","apbct-email-encoder-select-whole-email"),e.innerText=o,"undefined"!=typeof ctPublicFunctions&&ctPublicFunctions.text__ee_click_to_select?e.title=ctPublicFunctions.text__ee_click_to_select:e.title=ctAdminCommon.text__ee_click_to_select,n&&("undefined"!=typeof ctPublicFunctions&&ctPublicFunctions.text__ee_original_email?n.innerHTML=ctPublicFunctions.text__ee_original_email+"&nbsp;"+e.outerHTML:n.innerHTML=ctAdminCommon.text__ee_original_email+"&nbsp;"+e.outerHTML,n.setAttribute("style","flex-direction: row;")),(o=a.querySelector(".apbct-ee-animation-wrapper"))&&o.remove(),(e=a.querySelector("#apbct_email_ecoder__popup_text_node_second"))&&e.remove(),(n=document.createElement("span")).classList="apbct-email-encoder-elements_center top-margin-long",document.querySelector(".apbct-email-encoder-got-it-button")||(o=document.createElement("button"),"undefined"!=typeof ctPublicFunctions&&ctPublicFunctions.text__ee_got_it?o.innerText=ctPublicFunctions.text__ee_got_it:o.innerText=ctAdminCommon.text__ee_got_it,o.classList="apbct-email-encoder-got-it-button",o.addEventListener("click",function(){document.body.classList.remove("apbct-popup-fade"),a.setAttribute("style","display:none"),fillDecodedNodes(c,i),"undefined"!=typeof ctPublic&&ctPublic.encodedEmailNodesIsMixed&&r&&r.click()}),n.append(o),a.append(n)))},3e3):r?i.success?(resetEncodedNodes(),"undefined"!=typeof ctPublicFunctions&&ctPublicFunctions.text__ee_blocked?ctShowDecodeComment(ctPublicFunctions.text__ee_blocked+": "+i.data[0].comment):ctShowDecodeComment(ctAdminCommon.text__ee_blocked+": "+i.data[0].comment)):(resetEncodedNodes(),"undefined"!=typeof ctPublicFunctions&&ctPublicFunctions.text__ee_cannot_connect?ctShowDecodeComment(ctPublicFunctions.text__ee_cannot_connect+": "+i.apbct.comment):ctShowDecodeComment(ctAdminCommon.text__ee_cannot_connect+": "+i.data[0].comment)):console.log("result",i)}function resetEncodedNodes(){void 0!==ctPublic.encodedEmailNodes&&ctPublic.encodedEmailNodes.forEach(function(e){e.addEventListener("click",ctFillDecodedEmailHandler)})}function ctShowDecodeComment(e){e=e||("undefined"!=typeof ctPublicFunctions&&ctPublicFunctions.text__ee_cannot_decode?ctPublicFunctions:ctAdminCommon).text__ee_cannot_decode;var t=document.getElementById("apbct_popup"),n=document.getElementById("apbct_popup_text");null!==t&&(document.body.classList.remove("apbct-popup-fade"),"undefined"!=typeof ctPublicFunctions&&ctPublicFunctions.text__ee_email_decoder?n.innerText=ctPublicFunctions.text__ee_email_decoder+": "+e:n.innerText=ctAdminCommon.text__ee_email_decoder+": "+e,setTimeout(function(){t.setAttribute("style","display:none")},3e3))}function fillDecodedNodes(i,c){if(0<i.length){for(var e,t=0;t<i.length;t++)if(0!==(e=(t=>{var n,e;if(c.data.forEach(function(e){e.encoded_email===i[t].dataset.originalString&&(n=e)}),!1===n.is_allowed)return{v:void 0};if(void 0===i[t].href||0!==i[t].href.indexOf("mailto:")&&0!==i[t].href.indexOf("tel:"))i[t].classList.add("no-blur"),setTimeout(function(){ctProcessDecodedDataResult(n,i[t])},2e3);else{if(0===i[t].href.indexOf("mailto:"))e="mailto:";else{if(0!==i[t].href.indexOf("tel:"))return 0;e="tel:"}var o=i[t].href.replace(e,""),a=i[t].innerHTML;i[t].innerHTML=a.replace(o,n.decoded_email),i[t].href=e+n.decoded_email,i[t].querySelectorAll("span.apbct-email-encoder").forEach(function(t){var n="";c.data.forEach(function(e){e.encoded_email===t.dataset.originalString&&(n=e.decoded_email)}),t.innerHTML=n})}i[t].removeEventListener("click",ctFillDecodedEmailHandler)})(t))&&e)return e.v}else{var n=c.data[0];i.classList.add("no-blur"),setTimeout(function(){ctProcessDecodedDataResult(n,i)},2e3),i.removeEventListener("click",ctFillDecodedEmailHandler)}}function ctProcessDecodedDataResult(e,t){t.setAttribute("title",""),t.removeAttribute("style"),ctFillDecodedEmail(t,e.decoded_email)}function ctFillDecodedEmail(e,t){e.innerHTML=e.innerHTML.replace(/.+?(<div class=["']apbct-tooltip["'].+?<\/div>)/,t+"$1")}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("[data-original-string]");if("undefined"!=typeof ctPublic&&(ctPublic.encodedEmailNodes=e),e.length)for(var t=0;t<e.length;++t)e[t].addEventListener("click",ctFillDecodedEmailHandler)});var ApbctCore=(()=>_createClass(function e(t){_classCallCheck(this,e),_defineProperty(this,"ajax_parameters",{}),_defineProperty(this,"restParameters",{}),_defineProperty(this,"selector",null),_defineProperty(this,"elements",[]),_defineProperty(this,"eventCallback",void 0),_defineProperty(this,"eventSelector",void 0),_defineProperty(this,"event",void 0),this.select(t)},[{key:"select",value:function(e){return e instanceof HTMLCollection?(this.selector=null,this.elements=[],this.elements=Array.prototype.slice.call(e)):"object"===_typeof(e)?(this.selector=null,this.elements=[],this.elements[0]=e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect(),this}},{key:"addElement",value:function(e){"object"===_typeof(e)?this.elements.push(e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect()}},{key:"push",value:function(e){this.elements.push(e)}},{key:"reduce",value:function(){this.elements=this.elements.slice(0,-1)}},{key:"deselect",value:function(){this.elements=[]}},{key:"css",value:function(e,t){if(t=t||!1,"object"===_typeof(e)){for(var n in e)if(Object.hasOwn(e,n))for(var o=n.replace(/([-_][a-z])/g,function(e){return e.toUpperCase().replace("-","").replace("_","")}),a=0;a<this.elements.length;a++)this.elements[a].style[o]=e[n];return this}var i;if("string"==typeof e)return void 0!==(i=getComputedStyle(this.elements[0])[e])&&!t&&(i=i.replace(/(\d)(em|pt|%|px){1,2}$/,"$1"),Number(i)==i)?Number(i):i}},{key:"hide",value:function(){this.prop("prev-display",this.css("display")),this.css({display:"none"})}},{key:"show",value:function(){this.css({display:this.prop("prev-display")})}},{key:"addClass",value:function(){for(var e=0;e<this.elements.length;e++)this.elements[e].classList.add(className)}},{key:"removeClass",value:function(){for(var e=0;e<this.elements.length;e++)this.elements[e].classList.remove(className)}},{key:"toggleClass",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t].classList.toggle(e)}},{key:"ajax",value:function(e){return this.ajax_parameters=e,new ApbctAjax(e)}},{key:"rest",value:function(e){return this.restParameters=e,new ApbctRest(e)}},{key:"on",value:function(){this.event=arguments.length<=0?void 0:arguments[0],this.eventCallback=(arguments.length<=2?void 0:arguments[2])||(arguments.length<=1?void 0:arguments[1]),this.eventSelector="string"==typeof(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:null;for(var e=0;e<this.elements.length;e++)this.elements[e].addEventListener(this.event,null!==this.eventSelector?this.onChecker.bind(this):this.eventCallback)}},{key:"onChecker",value:function(e){if(e.target===document.querySelector(this.eventSelector))return e.stopPropagation(),this.eventCallback(e)}},{key:"ready",value:function(e){document.addEventListener("DOMContentLoaded",e)}},{key:"change",value:function(e){this.on("change",e)}},{key:"attr",value:function(e){for(var t=[],n=0;n<this.elements.length;n++)void 0!==this.elements[n][e]?t.push(this.elements[n][e]):t.push(this.elements[n].getAttribute(e));return 1===t.length?t[0]:t}},{key:"prop",value:function(e,t){if(void 0!==t){for(var n=0;n<this.elements.length;n++)this.elements[n][e]=t;return this}for(var o=[],a=0;a<this.elements.length;a++)o.push(this.elements[a][e]);return 1===o.length?o[0]:o}},{key:"html",value:function(e){return void 0!==e?this.prop("innerHTML",e):this.prop("innerHTML")}},{key:"val",value:function(e){return void 0!==e?this.prop("value",e):this.prop("value")}},{key:"data",value:function(e,t){return void 0!==t?this.prop("apbct-data",e,t):this.prop("apbct-data")}},{key:"is",value:function(e){var t,n=!1,o=_createForOfIteratorHelper(this.elements);try{for(o.s();!(t=o.n()).done;)var a=t.value,n=n||this.isElem(a,e)}catch(e){o.e(e)}finally{o.f()}return n}},{key:"isElem",value:function(e,t){var n=!1;return"function"==typeof t&&(n=n||t.call(this,e)),n="string"==typeof t?t.match(/^[a-z]/)&&(e=>(e=document.createElement(e).constructor,!Boolean(~[HTMLElement,HTMLUnknownElement].indexOf(e))))(t)?n||e.tagName.toLowerCase()===t.toLowerCase():t.match(/^[a-z]/)?n||Boolean(e[t]):n||(null!==this.selector?null!==document.querySelector(this.selector+t):this.isWithoutSelector(e,t)):n}},{key:"isWithoutSelector",value:function(e,t){var n,o=!1,a=_createForOfIteratorHelper(document.querySelectorAll(t));try{for(a.s();!(n=a.n()).done;)o=o||e===n.value}catch(e){a.e(e)}finally{a.f()}return o}},{key:"filter",value:function(e){this.selector=null;for(var t=this.elements.length-1;0<=t;t--)this.isElem(this.elements[t],e)||this.elements.splice(Number(t),1);return this}},{key:"parent",value:function(e){return this.select(this.elements[0].parentElement),void 0===e||this.is(e)||this.deselect(),this}},{key:"parents",value:function(e){for(this.select(this.elements[0]);null!==this.elements[this.elements.length-1].parentElement;)this.push(this.elements[this.elements.length-1].parentElement);return this.elements.splice(0,1),void 0!==e&&this.filter(e),this}},{key:"children",value:function(e){return this.select(this.elements[0].children),void 0!==e&&this.filter(e),this}},{key:"siblings",value:function(e){var t=this.elements[0];return this.parent(),this.children(e),this.elements.splice(this.elements.indexOf(t),1),this}},{key:"remove",value:function(){var e,t=_createForOfIteratorHelper(this.elements);try{for(t.s();!(e=t.n()).done;)e.value.remove()}catch(e){t.e(e)}finally{t.f()}}},{key:"after",value:function(e){var t,n=_createForOfIteratorHelper(this.elements);try{for(n.s();!(t=n.n()).done;)t.value.after(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"append",value:function(e){var t,n=_createForOfIteratorHelper(this.elements);try{for(n.s();!(t=n.n()).done;)t.value.append(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"fadeIn",value:function(o){var a,t=_createForOfIteratorHelper(this.elements);try{for(t.s();!(a=t.n()).done;)(()=>{function e(){t.style.opacity=+t.style.opacity+(new Date-n)/o,n=+new Date,+t.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(e)||setTimeout(e,16))}var t=a.value,n=(t.style.opacity=0,t.style.display="block",+new Date);e()})()}catch(e){t.e(e)}finally{t.f()}}},{key:"fadeOut",value:function(o){var a,t=_createForOfIteratorHelper(this.elements);try{for(t.s();!(a=t.n()).done;)(()=>{function e(){t.style.opacity=+t.style.opacity-(new Date-n)/o,n=+new Date,0<+t.style.opacity?window.requestAnimationFrame&&requestAnimationFrame(e)||setTimeout(e,16):t.style.display="none"}var t=a.value,n=(t.style.opacity=1,+new Date);e()})()}catch(e){t.e(e)}finally{t.f()}}}]))();function selectActualNonce(){var e="";return ctPublicFunctions.hasOwnProperty("_fresh_nonce")&&"string"==typeof ctPublicFunctions._fresh_nonce&&0<ctPublicFunctions._fresh_nonce.length?ctPublicFunctions._fresh_nonce:("admin_ajax"===ctPublicFunctions.data__ajax_type&&ctPublicFunctions.hasOwnProperty("_ajax_nonce")&&"string"==typeof ctPublicFunctions._ajax_nonce&&0<ctPublicFunctions._ajax_nonce.length&&(e=ctPublicFunctions._ajax_nonce),"rest"===ctPublicFunctions.data__ajax_type&&ctPublicFunctions.hasOwnProperty("_rest_nonce")&&"string"==typeof ctPublicFunctions._rest_nonce&&0<ctPublicFunctions._rest_nonce.length?ctPublicFunctions._rest_nonce:e)}function apbct(e){return(new ApbctCore).select(e)}var ApbctXhr=(()=>{function o(e){for(var t in _classCallCheck(this,o),_defineProperty(this,"xhr",new XMLHttpRequest),_defineProperty(this,"method","POST"),_defineProperty(this,"url",""),_defineProperty(this,"async",!0),_defineProperty(this,"user",null),_defineProperty(this,"password",null),_defineProperty(this,"data",{}),_defineProperty(this,"button",null),_defineProperty(this,"spinner",null),_defineProperty(this,"progressbar",null),_defineProperty(this,"context",this),_defineProperty(this,"callback",null),_defineProperty(this,"onErrorCallback",null),_defineProperty(this,"responseType","json"),_defineProperty(this,"headers",{}),_defineProperty(this,"timeout",15e3),_defineProperty(this,"methods_to_convert_data_to_URL",["GET","HEAD"]),_defineProperty(this,"body",null),_defineProperty(this,"http_code",0),_defineProperty(this,"status_text",""),e)void 0!==this[t]&&(this[t]=e[t]);if(this.prepare(),Object.keys(this.data).length&&(this.deleteDoubleJSONEncoding(this.data),this.convertData()),!this.url)return console.log("%cXHR%c not URL provided","color: red; font-weight: bold;","color: grey; font-weight: normal;"),!1;this.xhr.open(this.method,this.url,this.async,this.user,this.password),this.setHeaders(),this.xhr.responseType=this.responseType,this.xhr.timeout=this.timeout,this.xhr.onreadystatechange=function(){this.isWpNonceError()?this.getFreshNonceAndRerunXHR(e):this.onReadyStateChange()}.bind(this),this.xhr.onload=function(){this.onLoad()}.bind(this),this.xhr.onprogress=function(e){this.onProgress(e)}.bind(this),this.xhr.onerror=function(){this.onError()}.bind(this),this.xhr.ontimeout=function(){this.onTimeout()}.bind(this),this.xhr.send(this.body)}return _createClass(o,[{key:"prepare",value:function(){this.button&&(this.button.setAttribute("disabled","disabled"),this.button.style.cursor="not-allowed"),this.spinner&&(this.spinner.style.display="inline")}},{key:"complete",value:function(){this.http_code=this.xhr.status,this.status_text=this.xhr.statusText,this.button&&(this.button.removeAttribute("disabled"),this.button.style.cursor="auto"),this.spinner&&(this.spinner.style.display="none"),this.progressbar&&this.progressbar.fadeOut("slow")}},{key:"onReadyStateChange",value:function(){null!==this.on_ready_state_change&&"function"==typeof this.on_ready_state_change&&this.on_ready_state_change()}},{key:"onProgress",value:function(e){null!==this.on_progress&&"function"==typeof this.on_progress&&this.on_progress()}},{key:"onError",value:function(){console.log("error"),this.complete(),this.error(this.http_code,this.status_text),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback(this.status_text)}},{key:"onTimeout",value:function(){this.complete(),this.error(0,"timeout"),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback("Timeout")}},{key:"onLoad",value:function(){if(this.complete(),"json"===this.responseType){if(null===this.xhr.response)return this.error(this.http_code,this.status_text,"No response"),!1;if(void 0!==this.xhr.response.error)return this.error(this.http_code,this.status_text,this.xhr.response.error),!1}null!==this.callback&&"function"==typeof this.callback&&this.callback.call(this.context,this.xhr.response,this.data)}},{key:"isWpNonceError",value:function(){var e=!1,t=!1;return 4==this.xhr.readyState&&(e="object"===_typeof(this.xhr.response)&&null!==this.xhr.response&&this.xhr.response.hasOwnProperty("data")&&this.xhr.response.data.hasOwnProperty("status")&&403===this.xhr.response.data.status,t="-1"===this.xhr.response&&403===this.xhr.status),e||t}},{key:"getFreshNonceAndRerunXHR",value:function(e){var t,n="";e.hasOwnProperty("headers")&&e.headers.hasOwnProperty("X-WP-Nonce")&&(n=e.headers["X-WP-Nonce"]),""!==(n=e.hasOwnProperty("data")&&e.data.hasOwnProperty("_ajax_nonce")?e.data._ajax_nonce:n)&&((t={method:"POST"}).data={spbc_remote_call_action:"get_fresh_wpnonce",plugin_name:"antispam",nonce_prev:n,initial_request_params:e},t.notJson=!0,t.url=ctPublicFunctions.host_url,t.callback=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[0],a=!1;(a=void 0!==t[1]&&t[1].hasOwnProperty("initial_request_params")?t[1].initial_request_params:a)&&o.hasOwnProperty("wpnonce")&&(ctPublicFunctions._fresh_nonce=o.wpnonce,"rest"===ctPublicFunctions.data__ajax_type?(new ApbctCore).rest(a):(new ApbctCore).ajax(a))},new o(t))}},{key:"error",value:function(e,t,n){var o="";"timeout"===t?o+="Server response timeout":200===e?"parsererror"===t?o+="Unexpected response from server. See console for details.":(o+="Unexpected error. Status: "+t+".",void 0!==n&&(o+=" Additional error info: "+n)):o+=500===e?"Internal server error.":"Unexpected response code:"+e,this.errorOutput(o),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback(this.status_text)}},{key:"errorOutput",value:function(e){console.log("%c ctXHR error: %c"+e,"color: red;","color: grey;")}},{key:"setHeaders",value:function(){for(var e in this.headers)void 0!==this.headers[e]&&this.xhr.setRequestHeader(e,this.headers[e])}},{key:"convertData",value:function(){return~this.methods_to_convert_data_to_URL.indexOf(this.method)?this.convertDataToURL():this.convertDataToBody()}},{key:"convertDataToURL",value:function(){var e=new URLSearchParams(this.data).toString(),t=this.url.match(/^(https?:\/{2})?[a-z0-9.]+\?/)?"&":"?";return this.url+=t+e,this.url}},{key:"convertDataToBody",value:function(){for(var e in this.body=new FormData,this.data)Object.hasOwn(this.data,e)&&this.body.append(e,"object"===_typeof(this.data[e])?JSON.stringify(this.data[e]):this.data[e]);return this.body}},{key:"deleteDoubleJSONEncoding",value:function(e){if("object"===_typeof(e))for(var t in e){var n;Object.hasOwn(e,t)&&("object"===_typeof(e[t])&&(e[t]=this.deleteDoubleJSONEncoding(e[t])),"string"==typeof e[t])&&null!==e[t].match(/^[\[{].*?[\]}]$/)&&"object"===_typeof(n=JSON.parse(e[t]))&&(e[t]=n)}return e}}])})(),ApbctAjax=(()=>{function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _classCallCheck(this,o),(t=t[0]).data._ajax_nonce=selectActualNonce(),_callSuper(this,o,[t])}return _inherits(o,ApbctXhr),_createClass(o)})(),ApbctRest=(()=>{function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];_classCallCheck(this,a);var t=t[0],o=selectActualNonce();return t.url=a.default_route+t.route,t.headers={"X-WP-Nonce":o},_defineProperty(o=_callSuper(this,a,[t]),"route",""),o}return _inherits(a,ApbctXhr),_createClass(a)})();function ctSetCookie(e,t,o){var n,a=["ct_sfw_pass_key","ct_sfw_passed","wordpress_apbct_antibot","apbct_anticrawler_passed","apbct_bot_detector_exist","apbct_antiflood_passed","apbct_email_encoder_passed"],i=!1;"string"==typeof e&&(i="ct_pointer_data"===e,"string"!=typeof t&&"number"!=typeof t||(e=[[e,t,o]])),"none"===ctPublicFunctions.data__cookies_type?(n=[],e.forEach(function(e){-1!==a.indexOf(e[0])?n.push(e):apbctLocalStorage.set(e[0],e[1])}),0<n.length&&ctSetAlternativeCookie(n),ctPublic.force_alt_cookies&&!i?ctSetAlternativeCookie(e,{forceAltCookies:!0}):ctNoCookieAttachHiddenFieldsToForms()):"native"===ctPublicFunctions.data__cookies_type?(ctPublic.force_alt_cookies&&!i&&ctSetAlternativeCookie(e,{forceAltCookies:!0}),e.forEach(function(e){var t=void 0!==e[2]?"expires="+o+"; ":"",n="https:"===location.protocol?"; secure":"";document.cookie=ctPublicFunctions.cookiePrefix+e[0]+"="+encodeURIComponent(e[1])+"; "+t+"path=/; samesite=lax"+n})):"alternative"!==ctPublicFunctions.data__cookies_type||i||ctSetAlternativeCookie(e)}function ctSetAlternativeCookie(e,t){"function"==typeof getJavascriptClientData?Array.isArray(e)&&(e=getJavascriptClientData(e)):console.log("APBCT ERROR: getJavascriptClientData() is not loaded");try{e=JSON.parse(e)}catch(e){return void console.log("APBCT ERROR: JSON parse error:"+e)}var n=t&&t.callback||null,o=t&&t.onErrorCallback||null;t&&t.forceAltCookies&&(e.apbct_force_alt_cookies=!0),"rest"===ctPublicFunctions.data__ajax_type?("string"==typeof e.apbct_pixel_url&&-1!==e.apbct_pixel_url.indexOf("%3A")&&(e.apbct_pixel_url=decodeURIComponent(e.apbct_pixel_url)),apbct_public_sendREST("alt_sessions",{method:"POST",data:{cookies:e},callback:n,onErrorCallback:o})):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_alt_session__save__AJAX",cookies:e},{notJson:1,callback:n,onErrorCallback:o,beforeSend:function(e){e.setRequestHeader("X-Robots-Tag","noindex, nofollow")}})}function ctGetCookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function ctDeleteCookie(e){var t;"none"!==ctPublicFunctions.data__cookies_type&&("native"===ctPublicFunctions.data__cookies_type?(t="https:"===location.protocol?"; secure":"",document.cookie=e+'=""; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax'+t):ctPublicFunctions.data__cookies_type)}function apbct_public_sendAJAX(e,t,n){var o=[],n=(o.callback=t.callback||null,o.onErrorCallback=t.onErrorCallback||null,o.callback_context=t.callback_context||null,o.callback_params=t.callback_params||null,o.async=t.async||!0,o.notJson=t.notJson||null,o.responseType=t.notJson?"text":"json",o.timeout=t.timeout||15e3,o.obj=n||null,o.button=t.button||null,o.spinner=t.spinner||null,o.progressbar=t.progressbar||null,o.silent=t.silent||null,o.no_nonce=t.no_nonce||null,o.data=e,o.url=ctPublicFunctions._ajax_url,selectActualNonce());"string"==typeof e?(o.no_nonce||(o.data=o.data+"&_ajax_nonce="+n),o.data=o.data+"&no_cache="+Math.random()):(o.no_nonce||(o.data._ajax_nonce=n),o.data.no_cache=Math.random()),(new ApbctCore).ajax(o)}function apbct_public_sendREST(e,t){var n=[];n.route=e,n.callback=t.callback||null,n.onErrorCallback=t.onErrorCallback||null,n.data=t.data||[],n.method=t.method||"POST",(new ApbctCore).rest(n)}function apbct_attach_event_handler(e,t,n){"function"==typeof window.addEventListener?e.addEventListener(t,n):e.attachEvent(t,n)}function apbct_remove_event_handler(e,t,n){"function"==typeof window.removeEventListener?e.removeEventListener(t,n):e.detachEvent(t,n)}function removeDoubleJsonEncoding(e){if("object"===_typeof(e))for(var t in e){var n;"object"===_typeof(e[t])&&(e[t]=removeDoubleJsonEncoding(e[t])),"string"==typeof e[t]&&null!==e[t].match(/^[\[{].*?[\]}]$/)&&"object"===_typeof(n=JSON.parse(e[t]))&&(e[t]=n)}return e}function ctGetPageForms(){var e=document.forms;return e||!1}function apbct_js_keys__set_input_value(e,t,n,o){if(0<document.querySelectorAll("[name^=ct_checkjs]").length)for(var a=document.querySelectorAll("[name^=ct_checkjs]"),i=0;i<a.length;i++)a[i].value=e.js_key}function apbctAjaxSetImportantParametersOnCacheExist(e){e&&("rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("apbct_set_important_parameters",{}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_set_important_parameters"},{}))}_defineProperty(ApbctRest,"default_route",ctPublicFunctions._rest_url+"cleantalk-antispam/v1/"),Object.prototype.hasOwn||Object.defineProperty(Object.prototype,"hasOwn",{value:function(e){return Object.prototype.hasOwnProperty.call(this,e)},enumerable:!1,configurable:!0,writable:!0});var apbctLocalStorage={get:function(t,n){void 0===n&&(n="value");t=localStorage.getItem(t);if(null!==t)try{var o=JSON.parse(t);if(!o.hasOwnProperty(n))return o;try{return JSON.parse(o[n])}catch(e){return o[n].toString()}}catch(e){return t}return!1},set:function(e,t){var n;!(2<arguments.length&&void 0!==arguments[2])||arguments[2]?(n={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},localStorage.setItem(e,JSON.stringify(n))):localStorage.setItem(e,t)},isAlive:function(e,t){return void 0===t&&(t=86400),this.get(e,"timestamp")+t>Math.floor((new Date).getTime()/1e3)},isSet:function(e){return null!==localStorage.getItem(e)},delete:function(e){localStorage.removeItem(e)},getCleanTalkData:function(){for(var e={},t=0;t<localStorage.length;t++){var n=localStorage.key(t);-1===n.indexOf("ct_")&&-1===n.indexOf("apbct_")||(e[n.toString()]=apbctLocalStorage.get(n))}return e}},apbctSessionStorage={get:function(t,e){void 0===e&&(e="value");t=sessionStorage.getItem(t);if(null!==t)try{var n=JSON.parse(t);return n.hasOwnProperty(e)?JSON.parse(n[e]):n}catch(e){return t}return!1},set:function(e,t){var n;!(2<arguments.length&&void 0!==arguments[2])||arguments[2]?(n={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},sessionStorage.setItem(e,JSON.stringify(n))):sessionStorage.setItem(e,t)},isSet:function(e){return null!==sessionStorage.getItem(e)},delete:function(e){sessionStorage.removeItem(e)},getCleanTalkData:function(){for(var e={},t=0;t<sessionStorage.length;t++){var n=sessionStorage.key(t);-1===n.indexOf("ct_")&&-1===n.indexOf("apbct_")||(e[n.toString()]=apbctSessionStorage.get(n))}return e}},ApbctEventTokenTransport=(()=>_createClass(function e(){_classCallCheck(this,e)},[{key:"attachEventTokenToMultipageGravityForms",value:function(){document.addEventListener("gform_page_loaded",function(){void 0!==ctPublic.force_alt_cookies&&("undefined"===ctPublic.force_alt_cookies||ctPublic.force_alt_cookies)||"function"!=typeof setEventTokenField||"function"!=typeof botDetectorLocalStorage||setEventTokenField(botDetectorLocalStorage.get("bot_detector_event_token"))})}},{key:"attachEventTokenToWoocommerceGetRequestAddToCart",value:function(){ctPublic.wc_ajax_add_to_cart||document.querySelectorAll("a.add_to_cart_button:not(.product_type_variable):not(.wc-interactive)").forEach(function(o){o.addEventListener("click",function(e){var t=o.getAttribute("href"),n=apbctLocalStorage.get("bot_detector_event_token");n&&(-1===t.indexOf("?")?t+="?":t+="&",o.setAttribute("href",t+="ct_bot_detector_event_token="+n))})})}},{key:"setEventTokenToAltCookies",value:function(){var e=apbctLocalStorage.get("bot_detector_event_token");void 0!==ctPublic.force_alt_cookies&&ctPublic.force_alt_cookies&&(apbctLocalStorage.set("event_token_forced_set","0"),e?(initCookies.push(["ct_bot_detector_event_token",e]),apbctLocalStorage.set("event_token_forced_set","1")):tokenCheckerIntervalId=setInterval(function(){var e;"1"===apbctLocalStorage.get("event_token_forced_set")?clearInterval(tokenCheckerIntervalId):(e=apbctLocalStorage.get("bot_detector_event_token"))&&(ctSetAlternativeCookie([["ct_bot_detector_event_token",e]],{forceAltCookies:!0}),apbctLocalStorage.set("event_token_forced_set","1"),clearInterval(tokenCheckerIntervalId))},1e3))}},{key:"restartBotDetectorEventTokenAttach",value:function(){var e,t=0<document.getElementsByClassName("latepoint-form").length||0<document.getElementsByClassName("mec-booking-form-container").length||null!==document.getElementById("login-form-popup");try{t&&(e=apbctLocalStorage.get("bot_detector_event_token"),"function"==typeof setEventTokenField)&&void 0!==e&&64===e.length&&setEventTokenField(e)}catch(e){console.log(e.toString())}}}]))(),ApbctAttachData=(()=>_createClass(function e(){_classCallCheck(this,e)},[{key:"attachHiddenFieldsToForms",value:function(){void 0!==ctPublic.force_alt_cookies&&("undefined"===ctPublic.force_alt_cookies||ctPublic.force_alt_cookies)||(ctNoCookieAttachHiddenFieldsToForms(),document.addEventListener("gform_page_loaded",ctNoCookieAttachHiddenFieldsToForms))}},{key:"attachNoCookie",value:function(){void 0!==ctPublic.data__cookies_type&&"none"===ctPublic.data__cookies_type&&(ctAjaxSetupAddCleanTalkDataBeforeSendAjax(),ctAddWCMiddlewares())}},{key:"attachVisibleFieldsToForm",value:function(e,t){var n=document.createElement("input"),t=(n.setAttribute("type","hidden"),n.setAttribute("id","apbct_visible_fields_"+t),n.setAttribute("name","apbct_visible_fields"),{});t[0]=this.collectVisibleFields(e),n.value=btoa(JSON.stringify(t)),e.append(n)}},{key:"attachVisibleFieldsDuringSubmit",value:function(e,t){"native"!==ctPublic.data__cookies_type&&void 0!==e.target.ctFormIndex&&this.setVisibleFieldsCookie(this.collectVisibleFields(t),e.target.ctFormIndex)}},{key:"constructNoCookieHiddenField",value:function(e){var t="hidden",e=("submit"===e&&(t="submit"),""),n=getCleanTalkStorageDataArray(),n=JSON.stringify(n);return n="_ct_no_cookie_data_"+btoa(n),(e=document.createElement("input")).setAttribute("name","ct_no_cookie_hidden_field"),e.setAttribute("value",n),e.setAttribute("type",t),e.classList.add("apbct_special_field"),e.classList.add("ct_no_cookie_hidden_field"),e}},{key:"attachNoCookieDuringSubmit",value:function(e){"none"===ctPublic.data__cookies_type&&e.target&&e.target.action&&-1!==e.target.action.toString().indexOf("mailpoet_subscription_form")&&(window.XMLHttpRequest.prototype.send=function(e){var t,n;ctPublic.settings__data__bot_detector_enabled?(t=(new ApbctHandler).toolGetEventToken())&&(n="data%5Bct_no_cookie_hidden_field%5D="+getNoCookieData()+"&",defaultSend.call(this,n+("data%5Bct_bot_detector_event_token%5D="+t+"&")+e)):(n="data%5Bct_no_cookie_hidden_field%5D="+getNoCookieData()+"&",defaultSend.call(this,n+e)),setTimeout(function(){window.XMLHttpRequest.prototype.send=defaultSend},0)})}},{key:"setVisibleFieldsCookie",value:function(e,t){var n="object"===_typeof(e)&&null!==e?e:{};if("native"===ctPublic.data__cookies_type)for(var o in n){if(10<o)return;ctSetCookie("apbct_visible_fields_"+(void 0!==t?t:o),JSON.stringify(n[o]))}else ctSetCookie("apbct_visible_fields",JSON.stringify(n))}},{key:"collectVisibleFields",value:function(e){var t,n=[],o="",a=0,i="",c=0,r=[];for(t in e.elements)isNaN(+t)||(n[t]=e.elements[t]);return(n=n.filter(function(e){return-1===r.indexOf(e.getAttribute("name"))&&(-1===["radio","checkbox"].indexOf(e.getAttribute("type"))||(r.push(e.getAttribute("name")),!1))})).forEach(function(e,t,n){"submit"!==e.getAttribute("type")&&null!==e.getAttribute("name")&&"ct_checkjs"!==e.getAttribute("name")&&("none"!==getComputedStyle(e).display&&"hidden"!==getComputedStyle(e).visibility&&"0"!==getComputedStyle(e).opacity&&"hidden"!==e.getAttribute("type")||e.classList.contains("wp-editor-area")?(o+=" "+e.getAttribute("name"),a++):(i+=" "+e.getAttribute("name"),c++))}),i=i.trim(),{visible_fields:o=o.trim(),visible_fields_count:a,invisible_fields:i,invisible_fields_count:c}}}]))(),ApbctHandler=(()=>{function i(){_classCallCheck(this,i)}return _createClass(i,[{key:"excludeForm",value:function(e){return!!this.checkHiddenFieldsExclusions(e,"visible_fields")||!!(e.querySelector('input[name="wspsc_add_cart_submit"]')||e.querySelector('input[name="option"][value="com_vikrentcar"]')||e.querySelector('input[name="option"][value="com_vikbooking"]'))||void 0!==e.elements.apbct_visible_fields&&0<e.elements.apbct_visible_fields.length}},{key:"checkHiddenFieldsExclusions",value:function(e,t){var n="string"==typeof e.action?e.action:"";return!!Boolean(e.querySelector("fieldset.asl_sett_scroll"))||!!e.classList.contains("swpf-instant-filtering")||-1!==n.indexOf("secure.payu.com")||-1!==n.indexOf("hsforms")||"string"==typeof t&&-1!==["visible_fields","no_cookie"].indexOf(t)&&1===this.getHiddenFieldExclusionsType(e)[t]}},{key:"getHiddenFieldExclusionsType",value:function(e){var t={no_cookie:0,visible_fields:0},n=((0==+ctPublic.data__visible_fields_required||"get"===e.method.toString().toLowerCase()&&0===e.querySelectorAll(".nf-form-content").length&&"twt_cc_signup"!==e.id||e.classList.contains("slp_search_form")||e.parentElement.classList.contains("mec-booking")||-1!==e.action.toString().indexOf("activehosted.com")||e.id&&"caspioform"===e.id||e.classList&&e.classList.contains("tinkoffPayRow")||e.classList&&e.classList.contains("give-form")||e.id&&"ult-forgot-password-form"===e.id||e.id&&-1!==e.id.toString().indexOf("calculatedfields")||e.id&&-1!==e.id.toString().indexOf("sac-form")||e.id&&-1!==e.id.toString().indexOf("cp_tslotsbooking_pform")||e.name&&-1!==e.name.toString().indexOf("cp_tslotsbooking_pform")||"https://epayment.epymtservice.com/epay.jhtml"===e.action.toString()||e.name&&-1!==e.name.toString().indexOf("tribe-bar-form")||e.id&&"ihf-login-form"===e.id||e.id&&"subscriberForm"===e.id&&-1!==e.action.toString().indexOf("actionType=update")||e.id&&"ihf-main-search-form"===e.id||e.id&&"frmCalc"===e.id||-1!==e.action.toString().indexOf("property-organizer-delete-saved-search-submit")||null!==e.querySelector('a[name="login"]'))&&(t.visible_fields=1),e.parentNode);return(n&&n.classList.contains("proinput")||"options"===e.name&&e.classList.contains("asp-fss-flex"))&&(t.no_cookie=1),e&&e.classList.contains("woocommerce-form-login")&&(t.visible_fields=1,t.no_cookie=1),t}},{key:"prevCallExclude",value:function(e){return!!e.classList.contains("hb-booking-search-form")}},{key:"catchMain",value:function(t,e){t.onsubmit_prev=t.onsubmit,t.ctFormIndex=e,t.onsubmit=function(e){(new ApbctAttachData).attachVisibleFieldsDuringSubmit(e,t),e.target.onsubmit_prev instanceof Function&&!this.prevCallExclude(e.target)&&(void 0!==e.target.classList&&e.target.classList.contains("brave_form_form")&&e.preventDefault(),setTimeout(function(){e.target.onsubmit_prev.call(e.target,e)},0))}}},{key:"cronFormsHandler",value:function(){setTimeout(function(){setInterval(function(){ctPublic.settings__data__bot_detector_enabled||(new ApbctGatheringData).restartFieldsListening(),(new ApbctEventTokenTransport).restartBotDetectorEventTokenAttach()},2e3)},0<arguments.length&&void 0!==arguments[0]?arguments[0]:2e3)}},{key:"detectForcedAltCookiesForms",value:function(){var e=0<document.querySelectorAll("#tmpl-nf-layout").length,t=0<document.querySelectorAll(".uael-registration-form-wrapper").length,n=0<document.querySelectorAll('script[id*="smart-forms"]').length,o=0<document.querySelectorAll('iframe[name="jetpack_remote_comment"]').length,a=0<document.querySelectorAll(".cwginstock-subscribe-form").length,i=0<document.querySelectorAll('div[id^="user-registration-form"]').length,c=0<document.querySelectorAll('div[class^="et_pb_newsletter_form"]').length,r=0<document.querySelectorAll('div[class^="fluent_booking_app"]').length,l=0<document.querySelectorAll('div[class^="et_bloom_form_container"]').length,s=0<document.querySelectorAll('div[class*="pafe-form"]').length,u=0<document.querySelectorAll('div [class*="otter-form"]').length,d=0<document.querySelectorAll("form .sqbform, .fields_reorder_enabled").length;ctPublic.force_alt_cookies=n||e||o||t||a||i||c||r||s||l||u||d,setTimeout(function(){var e;ctPublic.force_alt_cookies||(e=0<document.querySelectorAll('main[id^="bookingpress_booking_form"]').length,ctPublic.force_alt_cookies=e)},1e3)}},{key:"catchXmlHttpRequest",value:function(){var o;null!==document.querySelector("div.wfu_container")&&(o=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(e){var t,n;return e&&"string"==typeof e&&-1!==e.indexOf("action=wfu_ajax_action_ask_server")?(t="",ctPublic.settings__data__bot_detector_enabled?(n=(new i).toolGetEventToken())&&(t+="&data%5Bct_bot_detector_event_token%5D="+n):t+="&data%5Bct_no_cookie_hidden_field%5D="+getNoCookieData(),o.apply(this,[e+=t])):o.apply(this,[e])})}},{key:"catchFetchRequest",value:function(){setTimeout(function(){0<document.forms.length&&0<Array.from(document.forms).map(function(e){return e.classList.contains("metform-form-content")}).length&&(window.fetch=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&t[0]&&"function"==typeof t[0].includes&&t[0].includes("/wp-json/metform/")&&t&&t[1]&&t[1].body&&(ctPublic.settings__data__bot_detector_enabled||t[1].body.append("ct_no_cookie_hidden_field",getNoCookieData()),ctPublic.settings__data__bot_detector_enabled)&&t[1].body.append("ct_bot_detector_event_token",apbctLocalStorage.get("bot_detector_event_token")),defaultFetch.apply(window,t)})},1e3)}},{key:"catchJqueryAjax",value:function(){"undefined"!=typeof jQuery&&"function"==typeof jQuery.ajaxSetup&&jQuery.ajaxSetup({beforeSend:function(e,t){var n,o,a=!1;"string"==typeof t.data&&(-1!==t.data.indexOf("twt_cc_signup")&&(a="twt_cc_signup"),-1!==t.data.indexOf("action=mailpoet")&&(a="action=mailpoet"),-1!==t.data.indexOf("action=user_registration")&&-1!==t.data.indexOf("ur_frontend_form_nonce")&&(a="action=user_registration"),-1!==t.data.indexOf("action=happyforms_message")&&(a="action=happyforms_message"),-1!==t.data.indexOf("action=new_activity_comment"))&&(a="action=new_activity_comment"),(a="string"==typeof t.url&&-1!==t.url.indexOf("wc-ajax=add_to_cart")?"wc-ajax=add_to_cart":a)&&(n=a="",ctPublic.settings__data__bot_detector_enabled?(o=(new i).toolGetEventToken())&&(a="data%5Bct_bot_detector_event_token%5D="+o+"&"):n="data%5Bct_no_cookie_hidden_field%5D="+(n=getNoCookieData())+"&",t.data=n+a+t.data)}})}},{key:"catchWCRestRequestAsMiddleware",value:function(){window.hasOwnProperty("wp")&&window.wp.hasOwnProperty("apiFetch")&&"function"==typeof window.wp.apiFetch.use&&window.wp.apiFetch.use(function(e,t){return"object"===_typeof(e)&&null!==e&&e.hasOwnProperty("data")&&e.hasOwnProperty("path")&&(e.data.hasOwnProperty("requests")&&0<e.data.requests.length&&e.data.requests[0].hasOwnProperty("path")&&"/wc/store/v1/cart/add-item"===e.data.requests[0].path&&(ctPublic.settings__data__bot_detector_enabled?e.data.requests[0].data.event_token=localStorage.getItem("bot_detector_event_token"):e.data.requests[0].data.ct_no_cookie_hidden_field=getNoCookieData()),"/wc/store/v1/checkout"===e.path)&&(ctPublic.settings__data__bot_detector_enabled?e.data.event_token=localStorage.getItem("bot_detector_event_token"):e.data.ct_no_cookie_hidden_field=getNoCookieData()),t(e)})}},{key:"searchFormHandler",value:function(){var e,t=_createForOfIteratorHelper(document.forms);try{var n=function(){var s=e.value;return s.querySelector("input.dgwt-wcas-search-input")||"hero-search-form"===s.getAttribute("id")||"hb-booking-search-form"===s.getAttribute("class")?0:void(("searchform"===s.getAttribute("id")||null!==s.getAttribute("class")&&-1!==s.getAttribute("class").indexOf("search-form")||null!==s.getAttribute("role")&&-1!==s.getAttribute("role").indexOf("search"))&&(s.apbctSearchPrevOnsubmit=s.onsubmit,s.onsubmit=function(e){var t=s;try{var n,o,a,i=t.querySelector('[name*="apbct_email_id__"]'),c=null,r=(null!==i&&null!==i.value&&(c=i.value),getCleanTalkStorageDataArray()),l=apbctLocalStorage.get("bot_detector_event_token");null===r&&null===i&&null===l||(e.preventDefault(),n=function(){null!==i&&i.parentNode.removeChild(i),"function"==typeof t.apbctSearchPrevOnsubmit?t.apbctSearchPrevOnsubmit():HTMLFormElement.prototype.submit.call(t)},o=r,null!==c&&(o.apbct_search_form__honeypot_value=c),o.ct_bot_detector_event_token=l,"string"==typeof o.apbct_pixel_url&&-1!==o.apbct_pixel_url.indexOf("%3A")&&(o.apbct_pixel_url=decodeURIComponent(o.apbct_pixel_url)),void 0!==(a=JSON.stringify(o))&&0!==a.length?ctSetAlternativeCookie(a,{callback:n,onErrorCallback:n,forceAltCookies:!0}):n())}catch(e){console.warn("APBCT search form onsubmit handler error. "+e)}}))};for(t.s();!(e=t.n()).done;)n()}catch(e){t.e(e)}finally{t.f()}}},{key:"toolForAntiCrawlerCheckDuringBotDetector",value:function(){var e=setInterval(function(){localStorage.bot_detector_event_token&&(ctSetCookie("apbct_bot_detector_exist","1","3600"),clearInterval(e))},500)}},{key:"toolGetEventToken",value:function(){var t=localStorage.getItem("bot_detector_event_token");try{t=JSON.parse(t)}catch(e){t=!1}return!(null===t||!1===t||!t.hasOwnProperty("value")||""===t.value)&&t.value}}])})(),ApbctShowForbidden=(()=>_createClass(function e(){_classCallCheck(this,e)},[{key:"prepareBlockForAjaxForms",value:function(){function o(e){if(e.responseText&&-1!==e.responseText.indexOf('"apbct')&&-1===e.responseText.indexOf("DOCTYPE"))try{this.parseBlockMessage(JSON.parse(e.responseText))}catch(e){console.log(e.toString())}}"undefined"!=typeof jQuery?"function"!=typeof jQuery(document).ajaxComplete()?jQuery(document).on("ajaxComplete",function(e,t,n){o(t)}):jQuery(document).ajaxComplete(function(e,t,n){o(t)}):"undefined"!=typeof XMLHttpRequest&&document.addEventListener("readystatechange",function(e){4===e.target.readyState&&o(e.target)})}},{key:"parseBlockMessage",value:function(e){var t="";void 0!==e.apbct&&(e=e.apbct).blocked&&(t=e.comment),(t=void 0!==e.data&&void 0!==(e=e.data).message?e.message:t)&&(document.dispatchEvent(new CustomEvent("apbctAjaxBockAlert",{bubbles:!0,detail:{message:t}})),cleantalkModal.loaded=t,cleantalkModal.open(),1==+e.stop_script)&&window.stop()}}]))();function apbct_ready(){(new ApbctShowForbidden).prepareBlockForAjaxForms();var e,a=new ApbctHandler;a.detectForcedAltCookiesForms(),ctPublic.settings__data__bot_detector_enabled||((e=new ApbctGatheringData).setSessionId(),e.writeReferrersToSessionStorage(),e.setCookiesType(),e.startFieldsListening(),e.listenAutocomplete(),e.gatheringTypoData(),e.initParams(),e.gatheringMouseData()),setTimeout(function(){ctPublic.settings__data__bot_detector_enabled&&((e=new ApbctEventTokenTransport).attachEventTokenToMultipageGravityForms(),e.attachEventTokenToWoocommerceGetRequestAddToCart());var e,t=new ApbctAttachData;ctPublic.settings__data__bot_detector_enabled||(t.attachHiddenFieldsToForms(),t.attachNoCookie());for(var n=0;n<document.forms.length;n++){var o=document.forms[n];a.excludeForm(o)||(t.attachVisibleFieldsToForm(o,n),a.catchMain(o,n))}},1e3),1==+ctPublic.settings__forms__search_test&&a.searchFormHandler(),a.catchXmlHttpRequest(),a.catchFetchRequest(),a.catchJqueryAjax(),a.catchWCRestRequestAsMiddleware(),ctPublic.settings__sfw__anti_crawler&&ctPublic.settings__data__bot_detector_enabled&&a.toolForAntiCrawlerCheckDuringBotDetector()}ctPublic.data__key_is_ok&&("loading"!==document.readyState?apbct_ready():apbct_attach_event_handler(document,"DOMContentLoaded",apbct_ready),"native"===ctPublic.data__cookies_type)&&ctSetCookie("ct_checkjs",ctPublic.ct_checkjs_key,!0);var ctProtectOutsideIframeCheck,defaultFetch=window.fetch,defaultSend=XMLHttpRequest.prototype.send;function ctProtectExternal(){for(var e,t,n=0;n<document.forms.length;n++)void 0!==document.forms[n].cleantalk_hidden_action||void 0!==document.forms[n].cleantalk_hidden_method||formIsExclusion(e=document.forms[n])||(isIntegratedForm(e)?apbctProcessExternalForm(e,n,document):void 0!==e.dataset.mailingListId||"string"==typeof e.action&&-1!==e.action.indexOf("webto.salesforce.com")||"string"==typeof e.action&&e.querySelector('[href*="activecampaign"]')||"string"==typeof e.action&&-1!==e.action.indexOf("hsforms.com")&&e.getAttribute("data-hs-cf-bound")?apbctProcessExternalFormByFakeButton(e,n,document):"string"!=typeof e.action||-1===e.action.indexOf("http://")&&-1===e.action.indexOf("https://")||e.action.split("//")[1].split("/")[0].toLowerCase()!==location.hostname.toLowerCase()&&((t=document.createElement("input")).name="cleantalk_hidden_action",t.value=e.action,t.type="hidden",e.appendChild(t),(t=document.createElement("input")).name="cleantalk_hidden_method",t.value=e.method,t.type="hidden",e.method="POST",e.appendChild(t),e.action=document.location));apbctProcessIframes(),1!=ctPublic.settings__data__bot_detector_enabled&&(new ApbctGatheringData).startFieldsListening()}function formIsExclusion(n){var o=!1;try{n.parentElement&&0<n.parentElement.classList.length&&-1!==n.parentElement.classList[0].indexOf("mewtwo")&&(o=!0),null!==n.getAttribute("action")&&["paypal.com/cgi-bin/webscr"].forEach(function(e){-1!==n.getAttribute("action").indexOf(e)&&(o=!0)}),["give-form","frmCalc","ihf-contact-request-form","wpforms"].forEach(function(e){var t=n.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(o=!0)}),["search-form","hs-form","ihc-form-create-edit","nf-form-content","elementor-form","wpforms","et_pb_searchform"].forEach(function(e){var t=n.getAttribute("class")?n.getAttribute("class"):apbctGetFormClass(n,e);null!=t&&-1!==t.indexOf(e)&&(o=!n.getAttribute("data-hs-cf-bound"))}),["search"].forEach(function(e){var t=n.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(o=!0)})}catch(e){console.table("APBCT ERROR: formIsExclusion() - ",e)}return o}function apbctGetFormClass(e,t){if("object"==_typeof(e)&&e.querySelector("."+t))return t}function apbctProcessIframes(){var e=document.getElementsByTagName("iframe");if(0<e.length)for(var t=0;t<e.length;t++)if(null!=e[t].contentDocument){var n=e[t].contentDocument.forms;if(0!==n.length)for(var o=0;o<n.length;o++){var a=n[o];formIsExclusion(a)||apbctProcessExternalForm(a,o,e[t].contentDocument)}}}function apbctProcessExternalForm(e,t,n){var o=document.createElement("i"),o=(o.className="cleantalk_placeholder",o.style="display: none",e.parentElement.insertBefore(o,e),e.previousSibling),a=e.outerHTML,i=e,e=(e.parentElement.removeChild(e),document.createElement("div")),a=(e.innerHTML=a,o.after(e.firstElementChild),document.createElement("input")),c=(a.name="action",a.value="cleantalk_force_ajax_check",a.type="hidden",n.forms[t]),r=(c.appendChild(a),c.apbctPrev=o,c.apbctFormOriginal=i,!1),e=(void 0!==c.classList&&["newsletterform","ml-block-form"].forEach(function(e){c.classList.contains(e)&&(r=e)}),null);r?null!=(e=c.querySelector('button[type="submit"]'))&&e.addEventListener("click",function(e){e.preventDefault(),sendAjaxCheckingFormData(c)}):n.forms[t].onsubmit=function(e){e.preventDefault(),sendAjaxCheckingFormData(e.currentTarget)}}function apbctProcessExternalFormByFakeButton(e,t,n){var o,a,i,c=e.querySelector('[type="submit"]'),e=e.querySelector('[type="submit"]').form.onsubmit;c&&(o=c.parentElement,a=c.outerHTML,c.remove(),(i=document.createElement("div")).innerHTML=a,o.appendChild(i.firstElementChild),(a=document.createElement("input")).name="action",a.value="cleantalk_force_ajax_check",a.type="hidden",(i=n.forms[t]).appendChild(a),i.apbctParent=o,i.submitButtonOriginal=c,i.onsubmitOriginal=e,n.forms[t].onsubmit=function(e){e.preventDefault(),apbctMoosendSpinnerToggle(e.currentTarget),sendAjaxCheckingFormData(e.currentTarget)})}function apbctMoosendSpinnerToggle(e){var t,e=e.querySelector('button[type="submit"]');e&&(t=e.querySelector("i"),e=e.querySelector("span"),t)&&e&&(1==t.style.zIndex?(e.style.opacity=1,t.style.zIndex=-1,t.style.opacity=0):(e.style.opacity=0,t.style.zIndex=1,t.style.opacity=1))}function apbctReplaceInputsValuesFromOtherForm(e,t){var n=e.querySelectorAll("button, input, textarea, select"),o=t.querySelectorAll("button, input, textarea, select");-1!==e.outerHTML.indexOf('action="https://www.kulahub.net')||isFormHasDiviRedirect(e)||-1!==e.outerHTML.indexOf('class="et_pb_contact_form')||-1!==e.outerHTML.indexOf('action="https://api.kit.com')||-1!==e.outerHTML.indexOf("activehosted.com")||-1!==e.outerHTML.indexOf('action="https://crm.zoho.com')?n.forEach(function(t){o.forEach(function(e){t.name===e.name&&("checkbox"===e.type||"radio"===e.type?e.checked=apbctVal(t):e.value=apbctVal(t))})}):n.forEach(function(t){o.forEach(function(e){t.outerHTML===e.outerHTML&&("checkbox"===e.type||"radio"===e.type?e.checked=apbctVal(t):e.value=apbctVal(t))})})}function ctProtectKlaviyoForm(){var t;document.querySelector('link[rel="dns-prefetch"][href="//static.klaviyo.com"]')&&(t=setInterval(function(){var e=document.querySelectorAll("form.klaviyo-form");e.length&&(clearInterval(t),e.forEach(function(e,t){apbctProcessExternalFormKlaviyo(e,t,document)}))},500))}function apbctProcessExternalFormKlaviyo(t,e,n){var o,a=t.querySelector('button[type="button"].needsclick');a&&(a.disabled=!0,(o=document.createElement("input")).name="action",o.value="cleantalk_force_ajax_check",o.type="hidden",t.appendChild(o),(o=document.createElement("div")).id="apbct-klaviyo-cover",o.style.width="100%",o.style.height="100%",o.style.background="black",o.style.opacity=0,o.style.position="absolute",o.style.top=0,o.style.cursor="pointer",o.onclick=function(e){sendAjaxCheckingFormData(t)},a.parentNode.style.position="relative",a.parentNode.appendChild(o))}function ctProtectOutsideIframe(){var e=document.querySelectorAll("iframe");0<e.length&&e.forEach(function(e){!(-1!==e.src.indexOf("form.typeform.com")||-1!==e.src.indexOf("forms.zohopublic.com")||-1!==e.src.indexOf("link.surepathconnect.com")||-1!==e.src.indexOf("hello.dubsado.com")||e.classList.contains("hs-form-iframe")||-1!==e.src.indexOf("facebook.com")&&-1!==e.src.indexOf("plugins/comments.php")||-1!==e.id.indexOf("chatway_widget_app"))||!1!==apbctLocalStorage.get("apbct_iframes_protected")&&0<apbctLocalStorage.get("apbct_iframes_protected").length&&void 0!==e.id&&-1!==apbctLocalStorage.get("apbct_iframes_protected").indexOf[e.id]||ctProtectOutsideIframeHandler(e)})}function ctProtectOutsideIframeHandler(e){var t,n=null;void 0!==e.parentNode&&(n=e.parentNode,(t=document.createElement("div")).style.width="100%",t.style.height="100%",t.style.background="black",t.style.opacity=0,t.style.position="absolute",t.style.top=0,t.setAttribute("name","apbct_cover"),t.onclick=function(e){var t,n,o;void 0===ctProtectOutsideIframeCheck&&((e=e.currentTarget).style.opacity=.5,t=document.createElement("div"),o=document.createElement("div"),n=document.createElement("span"),t.className="apbct-iframe-preloader",o.className="apbct-iframe-preloader-spin",n.innerText="CleanTalk Anti-Spam checking data..",n.className="apbct-iframe-preloader-text",t.appendChild(o),e.appendChild(t),e.appendChild(n),o=(o=null)||apbctLocalStorage.get("bot_detector_event_token"),apbct_public_sendAJAX({action:"cleantalk_outside_iframe_ajax_check",ct_no_cookie_hidden_field:getNoCookieData(),ct_bot_detector_event_token:o},{async:!1,callback:function(e){var t=!(ctProtectOutsideIframeCheck=!0),n=("object"===_typeof(e)&&e.hasOwnProperty("apbct")&&e.apbct.hasOwnProperty("blocked")||(console.warn("APBCT outside iframe check error, skip check."),t=!0),void 0!==e.apbct.comment?e.apbct.comment:"Blocked by CleanTalk Anti-Spam");!1===e.apbct.blocked||t?document.querySelectorAll("div.apbct-iframe-preloader").forEach(function(e){e.parentNode.remove()}):(document.querySelectorAll(".apbct-iframe-preloader-text").forEach(function(e){e.innerText=n}),document.querySelectorAll("div.apbct-iframe-preloader").forEach(function(e){e.remove()}))}}))},null!=n.style&&void 0!==n.style.position?n.style.position=null:n.style.position="relative",n.appendChild(t),!1===(n=apbctLocalStorage.get("apbct_iframes_protected"))&&(n=[]),void 0!==e.id)&&(n.push(e.id),apbctLocalStorage.set("apbct_iframes_protected",n))}function catchNextendSocialLoginForm(){var e=document.getElementById("nsl-custom-login-form-main");e&&blockBtnNextendSocialLogin(e)}function blockBtnNextendSocialLogin(e){var t=e.querySelectorAll(".nsl-container-buttons a"),e=e.querySelectorAll('a[data-plugin="nsl"] .nsl-button');t.forEach(function(e){e.setAttribute("data-oauth-login-blocked","true"),e.addEventListener("click",function(e){e.preventDefault()})}),e.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),ctCheckAjax(t)})})}function allowAjaxNextendSocialLogin(e){e.parentElement.setAttribute("data-oauth-login-blocked","false"),e.parentElement.click()}function forbiddenAjaxNextendSocialLogin(e,t){var n,e=e.parentElement;"false"==e.getAttribute("data-oauth-login-blocked")&&e.setAttribute("data-oauth-login-blocked","true"),document.querySelector(".ct-forbidden-msg")||((n=document.createElement("div")).className="ct-forbidden-msg",n.style.background="red",n.style.color="white",n.style.padding="5px",n.innerHTML=t,e.insertAdjacentElement("beforebegin",n))}function ctCheckAjax(t){apbct_public_sendAJAX({action:"cleantalk_nsl_ajax_check",ct_no_cookie_hidden_field:document.getElementsByName("ct_no_cookie_hidden_field")[0].value},{async:!1,callback:function(e){!1===e.apbct.blocked?allowAjaxNextendSocialLogin(t):forbiddenAjaxNextendSocialLogin(t,e.apbct.comment)}})}function isIntegratedForm(e){var t="string"==typeof e.action?e.action:"",n=null!==e.getAttribute("id")?e.getAttribute("id"):"",o="string"==typeof e.className?e.className:"";return!!(-1!==t.indexOf("app.convertkit.com")||-1!==t.indexOf("app.kit.com")||-1!==t.indexOf("api.kit.com")||void 0!==e.firstChild.classList&&e.firstChild.classList.contains("cb-form-group")||-1!==t.indexOf("mailerlite.com")||-1!==t.indexOf("colcolmail.co.uk")||-1!==t.indexOf("paypal.com")||-1!==t.indexOf("infusionsoft.com")||-1!==t.indexOf("secure2.convio.net")||-1!==t.indexOf("hookb.in")||-1!==t.indexOf("external.url")||-1!==t.indexOf("tp.media")||-1!==t.indexOf("flodesk.com")||-1!==t.indexOf("sendfox.com")||-1!==t.indexOf("aweber.com")||-1!==t.indexOf("secure.payu.com")||-1!==t.indexOf("mautic")||-1!==n.indexOf("mauticform_")||-1!==n.indexOf("ihf-contact-request-form")||-1!==t.indexOf("crm.zoho.com")||-1!==n.indexOf("delivra-external-form")||-1!==t.indexOf("eloqua.com")||-1!==t.indexOf("kulahub.net")||isFormHasDiviRedirect(e)||-1!==t.indexOf("eocampaign1.com")||-1!==t.indexOf("wufoo.com")||-1!==t.indexOf("activehosted.com")||-1!==t.indexOf("publisher.copernica.com")||-1!==t.indexOf("whatsapp.com")&&-1!==o.indexOf("chaty")||void 0!==e.classList&&e.classList.contains("sp-element-container")||apbctIsFormInDiv(e,"b24-form")||-1!==t.indexOf("list-manage.com"))}function isFormHasDiviRedirect(e){var t=!1,n=document.querySelector('div[id^="et_pb_contact_form"]');return t="object"===_typeof(e)&&null!==e&&null!==n&&n.hasAttribute("data-redirect_url")&&""!==n.getAttribute("data-redirect_url")&&null!==n.querySelector('form[class^="et_pb_contact_form"]')?e===n.querySelector('form[class^="et_pb_contact_form"]'):t}function sendAjaxCheckingFormData(v){var e={},t=new ApbctAttachData,n=(e[0]=t.collectVisibleFields(v),t.setVisibleFieldsCookie(e),{ct_bot_detector_event_token:apbctLocalStorage.get("bot_detector_event_token")}),t=v.elements;(t=Array.prototype.slice.call(t)).forEach(function(e,t){""===e.name?n["input_"+t]=e.value:n[e.name]=e.value}),apbct_public_sendAJAX(n,{async:!1,callback:function(e,t,n,o){apbctMoosendSpinnerToggle(v);var a=v.hasAttribute("action")&&-1!==v.getAttribute("action").indexOf("hsforms");if(void 0===e.apbct&&void 0===e.data||void 0!==e.apbct&&!+e.apbct.blocked){var i,c=_createForOfIteratorHelper(v.querySelectorAll('input[name="apbct_visible_fields"]'));try{for(c.s();!(i=c.n()).done;)i.value.remove()}catch(e){c.e(e)}finally{c.f()}var r,l=_createForOfIteratorHelper(v.querySelectorAll('input[value="cleantalk_force_ajax_check"]'));try{for(l.s();!(r=l.n()).done;)r.value.remove()}catch(e){l.e(e)}finally{l.f()}var s,u=_createForOfIteratorHelper(v.querySelectorAll('input[name="ct_no_cookie_hidden_field"]'));try{for(u.s();!(s=u.n()).done;)s.value.remove()}catch(e){u.e(e)}finally{u.f()}if(void 0!==v.classList&&v.classList.contains("klaviyo-form"))return(p=document.getElementById("apbct-klaviyo-cover"))&&p.remove(),void((p=v.querySelector('button[type="button"].needsclick'))&&(p.disabled=!1,p.click()));if(void 0!==v.dataset.mailingListId)return v.querySelector('[type="submit"]').remove(),v.apbctParent.appendChild(v.submitButtonOriginal),void v.querySelector('[type="submit"]').click();if(v.hasAttribute("action")&&-1!==v.getAttribute("action").indexOf("webto.salesforce.com"))return v.querySelector('[type="submit"]').remove(),v.apbctParent.appendChild(v.submitButtonOriginal),v.onsubmit=v.onsubmitOriginal,void v.querySelector('[type="submit"]').click();if(a)return v.querySelector('[type="submit"]').remove(),v.apbctParent.appendChild(v.submitButtonOriginal),v.onsubmit=v.onsubmitOriginal,void v.querySelector('[type="submit"]').click();var d,p=v,_=(v.parentElement.removeChild(v),v.apbctPrev),m=v.apbctFormOriginal,f=!1,b=(apbctReplaceInputsValuesFromOtherForm(p,m),m&&"string"==typeof m.id&&-1!==m.id.indexOf("mautic")&&(f=!0),_.after(m),_createForOfIteratorHelper(m.querySelectorAll('input[name="apbct_visible_fields"]')));try{for(b.s();!(d=b.n()).done;)d.value.remove()}catch(e){b.e(e)}finally{b.f()}var h,y=_createForOfIteratorHelper(m.querySelectorAll('input[value="cleantalk_force_ajax_check"]'));try{for(y.s();!(h=y.n()).done;)h.value.remove()}catch(e){y.e(e)}finally{y.f()}p=m.querySelectorAll("button[type=submit]");if(0!==p.length)return p[0].click(),void(f&&setTimeout(function(){ctProtectExternal()},1500));if(0!==(p=m.querySelectorAll("input[type=submit]")).length)return void p[0].click();if(0!==(p=m.querySelectorAll('button[data-element="submit"]')).length)return void p[0].click();if(0!==(p=m.querySelectorAll("button#ck_subscribe_button")).length)return void p[0].click();0!==(p=m.querySelectorAll('input[type="image"][name="submit"]')).length&&p[0].click()}(void 0!==e.apbct&&+e.apbct.blocked||void 0!==e.data&&void 0!==e.data.message)&&((new ApbctHandler).parseBlockMessage(e),a)&&setTimeout(function(){document.location.reload()},3e3)}})}function catchDynamicRenderedForm(){catchDynamicRenderedFormHandler(document.getElementsByTagName("form"));var e=document.getElementsByTagName("iframe");if(0<e.length)for(var t=0;t<e.length;t++)if(null!=e[t].contentDocument){var n=e[t].contentDocument.forms;if(0===n.length)return;catchDynamicRenderedFormHandler(n,e[t].contentDocument)}}function catchDynamicRenderedFormHandler(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,o=[],a=_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var i=t.value,c=i.getAttribute("id");c&&-1!==c.indexOf("hsForm")&&o.push(c),c&&-1!==c.indexOf("createuser")&&void 0!==i.classList&&i.classList.contains("ihc-form-create-edit")&&o.push(c)}}catch(e){a.e(e)}finally{a.f()}for(var r=0,l=o;r<l.length;r++){var s=n.getElementById(l[r]);s.apbct_external_onsubmit_prev=s.onsubmit,s.onsubmit=sendAjaxCheckingDynamicFormData}}function sendAjaxCheckingDynamicFormData(l){l.preventDefault(),l.stopImmediatePropagation();var s=l,e=(l=l.target,document.createElement("input")),e=(e.name="action",e.value="cleantalk_force_ajax_check",e.type="hidden",l.appendChild(e),{}),t=new ApbctAttachData,n=(e[0]=t.collectVisibleFields(l),t.setVisibleFieldsCookie(e),l.append(t.constructNoCookieHiddenField("hidden")),{}),e=l.elements;(e=Array.prototype.slice.call(e)).forEach(function(e,t){""===e.name?n["input_"+t]=e.value:n[e.name]=e.value}),apbct_public_sendAJAX(n,{async:!1,callback:function(e){if(void 0===e.apbct||!+e.apbct.blocked){l.onsubmit=null;var t,n=_createForOfIteratorHelper(l.querySelectorAll('input[name="apbct_visible_fields"]'));try{for(n.s();!(t=n.n()).done;)t.value.remove()}catch(e){n.e(e)}finally{n.f()}var o,a=_createForOfIteratorHelper(l.querySelectorAll('input[value="cleantalk_force_ajax_check"]'));try{for(a.s();!(o=a.n()).done;)o.value.remove()}catch(e){a.e(e)}finally{a.f()}var i,c=_createForOfIteratorHelper(l.querySelectorAll('input[name="ct_no_cookie_hidden_field"]'));try{for(c.s();!(i=c.n()).done;)i.value.remove()}catch(e){c.e(e)}finally{c.f()}l.apbct_external_onsubmit_prev instanceof Function&&(r=setTimeout(function(){l.apbct_external_onsubmit_prev.call(l,s)},500),clearTimeout(r));var r=l.querySelector('input[type="submit"]');if(r)return void r.click()}void 0!==e.apbct&&+e.apbct.blocked&&(new ApbctHandler).parseBlockMessage(e)}})}function apbctVal(e){return e.options&&e.multiple?e.options.filter(function(e){return e.selected}).map(function(e){return e.value}):"checkbox"===e.type||"radio"===e.type?e.checked||null:e.value}function apbctIsFormInDiv(e,t){for(var n=e.parentElement;n;){if(n.classList.contains(t))return!0;n=n.parentElement}return!1}(new ApbctHandler).cronFormsHandler(2e3),apbctLocalStorage.set("apbct_iframes_protected",[]),window.addEventListener("load",function(){+ctPublic.settings__forms__check_external&&(setTimeout(function(){ctProtectExternal(),catchDynamicRenderedForm(),catchNextendSocialLoginForm(),ctProtectOutsideIframe()},2e3),ctProtectKlaviyoForm())});var botDetectorLogLastUpdate=0,botDetectorLogEventTypesCollected=[];function sendBotDetectorLogToAltSessions(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3e3,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3;setTimeout(function(){setInterval(function(){var e=apbctLocalStorage.get("ct_bot_detector_frontend_data_log");needsSaveLogToAltSessions(e)&&(botDetectorLogLastUpdate=e.log_last_update,ctSetAlternativeCookie([],{forceAltCookies:!0}))},t)},e)}function needsSaveLogToAltSessions(e){if(e&&e.hasOwnProperty("log_last_update")&&botDetectorLogLastUpdate!==e.log_last_update)try{for(var t=0;t<e.records.length;t++){var n=e.records[t].frontend_data.js_event;if(void 0===n||!botDetectorLogEventTypesCollected.includes(n))return botDetectorLogEventTypesCollected.push(n),!0}}catch(e){console.log("APBCT: bot detector log collection error: ".e.toString())}return!1}function checkEmail(e){var t=e.target.value;!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||!t||t in ctCheckedEmails||("rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("check_email_before_post",{method:"POST",data:{email:t},callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct_checked_emails",JSON.stringify(ctCheckedEmails)))}}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_email_check_before_post",email:t},{callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct_checked_emails",JSON.stringify(ctCheckedEmails)))}}))}function checkEmailExist(t){var e,n=t.target.value;n&&n.length?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)&&(n in ctCheckedEmailsExist?(e=ctCheckedEmailsExist[n],getResultCheckEmailExist(t,e,n)):(viewCheckEmailExist(t,"load"),(ctPublicFunctions.data__ajax_type="rest")===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("check_email_exist_post",{method:"POST",data:{email:n},callback:function(e){getResultCheckEmailExist(t,e,n)}}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_email_check_exist_post",email:n},{callback:function(e){getResultCheckEmailExist(t,e,n)}}))):((e=document.getElementById("apbct-check_email_exist-block"))&&e.remove(),(e=document.getElementById("apbct-check_email_exist-popup_description"))&&e.remove())}function getResultCheckEmailExist(e,t,n){t&&t.result&&(t=t.result,ctCheckedEmailsExist[n]={result:t,timestamp:Date.now()/1e3|0},"EXISTS"==t.result?viewCheckEmailExist(e,"good_email",t.text_result):viewCheckEmailExist(e,"bad_email",t.text_result),ctSetCookie("ct_checked_emails_exist",JSON.stringify(ctCheckedEmailsExist)))}function viewCheckEmailExist(e,t,n){var o,a,e=e.target.parentElement,i=e.querySelector('[name*="email"]');if(i)switch(document.getElementById("apbct-check_email_exist-block")?o=document.getElementById("apbct-check_email_exist-block"):((o=document.createElement("div")).setAttribute("class","apbct-check_email_exist-block"),o.setAttribute("id","apbct-check_email_exist-block"),window.addEventListener("scroll",function(){o.style.top=i.getBoundingClientRect().top+"px"}),e.after(o)),document.getElementById("apbct-check_email_exist-popup_description")?a=document.getElementById("apbct-check_email_exist-popup_description"):((a=document.createElement("div")).setAttribute("class","apbct-check_email_exist-popup_description"),a.setAttribute("id","apbct-check_email_exist-popup_description"),window.addEventListener("scroll",function(){a.style.top=o.getBoundingClientRect().top+"px"}),o.after(a)),ctEmailExistSetElementsPositions(),window.addEventListener("resize",function(e){ctEmailExistSetElementsPositions()}),t){case"load":o.classList.remove("apbct-check_email_exist-good_email","apbct-check_email_exist-bad_email"),o.classList.add("apbct-check_email_exist-load");break;case"good_email":o.classList.remove("apbct-check_email_exist-load","apbct-check_email_exist-bad_email"),o.classList.add("apbct-check_email_exist-good_email"),o.onmouseover=function(){a.textContent=n,a.style.display="block",a.style.top=i.getBoundingClientRect().top-a.getBoundingClientRect().height+"px",a.style.color="#1C7129"},o.onmouseout=function(){a.style.display="none"};break;case"bad_email":o.classList.remove("apbct-check_email_exist-load","apbct-check_email_exist-good_email"),o.classList.add("apbct-check_email_exist-bad_email"),o.onmouseover=function(){a.textContent=n,a.style.display="block",a.style.top=i.getBoundingClientRect().top-a.getBoundingClientRect().height+"px",a.style.color="#E01111"},o.onmouseout=function(){a.style.display="none"}}}function ctEmailExistSetElementsPositions(){var e,t=document.querySelector('comment-form input[name*="email"], input#email');t&&((e=document.getElementById("apbct-check_email_exist-block"))&&(e.style.top=t.getBoundingClientRect().top+"px",e.style.left=t.getBoundingClientRect().right-35-10+"px",e.style.height=t.offsetHeight+"px",e.style.width="35px"),e=document.getElementById("apbct-check_email_exist-popup_description"))&&(e.style.width=t.offsetWidth+"px",e.style.left=t.getBoundingClientRect().left+"px")}function ctProcessError(e,t){var n={},e=(e&&e.message?n.err={msg:e.message,file:e.fileName||!1,ln:e.lineNumber||lineNo||!1,col:e.columnNumber||columnNo||!1,stacktrace:e.stack||!1,cause:!!t&&JSON.stringify(t),errorObj:error||!1}:(n.err={msg:e},t&&(n.err.file=t)),n.url=window.location.href,n.userAgent=window.navigator.userAgent,"ct_js_errors");null===(o=localStorage.getItem(e))&&(o="[]");for(var o=JSON.parse(o),a=0;a<o.length;a++)if(o[a].err.msg===n.err.msg)return;o.push(n),localStorage.setItem(e,JSON.stringify(o))}function closeAllPopupTRP(){var e=document.querySelectorAll(".apbct-real-user-popup.visible");0<e.length&&e.forEach(function(e){e.classList.remove("visible")})}ctPublicFunctions.hasOwnProperty("data__bot_detector_enabled")&&1==ctPublicFunctions.data__bot_detector_enabled&&ctPublicFunctions.hasOwnProperty("data__frontend_data_log_enabled")&&1==ctPublicFunctions.data__frontend_data_log_enabled&&sendBotDetectorLogToAltSessions(1e3),1===Math.floor(100*Math.random())&&(window.onerror=function(e,t){for(var n=["apbct","ctPublic"],o=n.length;o--;)-1!==e.indexOf(n[o])&&ctProcessError(e,t);return!1}),document.addEventListener("DOMContentLoaded",function(){var e,t=this,s=void 0,u=!1;"undefined"==typeof ctPublic&&"undefined"==typeof ctTrpAdminLocalize||void 0===(s="undefined"!=typeof ctPublic&&ctPublic.theRealPerson?ctPublic.theRealPerson:s)&&"undefined"!=typeof ctTrpAdminLocalize&&ctTrpAdminLocalize.theRealPerson&&(s=ctTrpAdminLocalize.theRealPerson,u=!0),s&&(e='.apbct-trp *[class*="comment-author"]',document.querySelector(".apbct-trp .comment-author .comment-author-link")&&(e='.apbct-trp *[class*="comment-author-link"]'),0!==(e=document.querySelectorAll(e+',.apbct-trp *[class*="review__author"],.apbct-trp td[class*="column-author"] > strong')).length)&&(e.forEach(function(e,t){var n,o,a,i,c,r,l;"undefined"==typeof pagenow&&e.parentElement.className.indexOf("group")<0&&"DIV"!=e.tagName||((n=document.createElement("div")).setAttribute("class","apbct-real-user-badge"),(o=document.createElement("img")).setAttribute("src",s.imgPersonUrl),o.setAttribute("class","apbct-real-user-popup-img"),(a=document.createElement("div")).setAttribute("class","apbct-real-user-popup"),(i=document.createElement("p")).setAttribute("class","apbct-real-user-popup-header"),i.append(s.phrases.trpHeading),(c=document.createElement("div")).setAttribute("class","apbct-real-user-popup-content_row"),(r=document.createElement("span")).append(s.phrases.trpContent1+" "),r.append(s.phrases.trpContent2),u&&((l=document.createElement("a")).setAttribute("href",s.trpContentLink),l.setAttribute("target","_blank"),l.text=s.phrases.trpContentLearnMore,r.append(" "),r.append(l)),c.append(r),a.append(i,c),n.append(o),e.append(n),e.append(a))}),document.querySelectorAll(".apbct-real-user-badge").forEach(function(o){var a=void 0,e=(t.body.addEventListener("click",function(e){-1==e.target.className.indexOf("apbct-real-user")&&-1==e.target.parentElement.className.indexOf("apbct-real-user")&&closeAllPopupTRP()}),o.addEventListener("click",function(){var e=this.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.toggle("visible")}),o.addEventListener("mouseenter",function(){closeAllPopupTRP();var e=this.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.add("visible")}),o.addEventListener("mouseleave",function(){var t=this;a=setTimeout(function(){var e=t.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},1e3)}),o.nextElementSibling);e.addEventListener("mouseenter",function(){clearTimeout(a),e.classList.add("visible")}),e.addEventListener("mouseleave",function(){a=setTimeout(function(){e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},1e3)}),o.addEventListener("touchend",function(){var n=this;a=setTimeout(function(){var e=n.nextElementSibling,t=window.getSelection();e&&t&&e.classList.contains("apbct-real-user-popup")&&0===t.toString().length?e.classList.remove("visible"):(clearTimeout(a),document.addEventListener("selectionchange",function e(){var t=window.getSelection();t&&0===t.toString().length&&(a=setTimeout(function(){var e=o.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},3e3),document.removeEventListener("selectionchange",e))}))},3e3)})}))});
=======
class ApbctCore{ajax_parameters={};restParameters={};selector=null;elements=[];eventCallback;eventSelector;event;constructor(e){this.select(e)}select(e){return e instanceof HTMLCollection?(this.selector=null,this.elements=[],this.elements=Array.prototype.slice.call(e)):"object"==typeof e?(this.selector=null,this.elements=[],this.elements[0]=e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect(),this}addElement(e){"object"==typeof e?this.elements.push(e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect()}push(e){this.elements.push(e)}reduce(){this.elements=this.elements.slice(0,-1)}deselect(){this.elements=[]}css(o,t){if(t=t||!1,"object"==typeof o){for(let t in o)if(Object.hasOwn(o,t)){var c=t.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace("-","").replace("_",""));for(let e=0;e<this.elements.length;e++)this.elements[e].style[c]=o[t]}return this}if("string"==typeof o){let e=getComputedStyle(this.elements[0])[o];return void 0===e||t?e:(e=e.replace(/(\d)(em|pt|%|px){1,2}$/,"$1"),e=Number(e)==e?Number(e):e)}}hide(){this.prop("prev-display",this.css("display")),this.css({display:"none"})}show(){this.css({display:this.prop("prev-display")})}addClass(){for(let e=0;e<this.elements.length;e++)this.elements[e].classList.add(className)}removeClass(){for(let e=0;e<this.elements.length;e++)this.elements[e].classList.remove(className)}toggleClass(t){for(let e=0;e<this.elements.length;e++)this.elements[e].classList.toggle(t)}ajax(e){return this.ajax_parameters=e,new ApbctAjax(e)}rest(e){return this.restParameters=e,new ApbctRest(e)}on(...e){this.event=e[0],this.eventCallback=e[2]||e[1],this.eventSelector="string"==typeof e[1]?e[1]:null;for(let e=0;e<this.elements.length;e++)this.elements[e].addEventListener(this.event,null!==this.eventSelector?this.onChecker.bind(this):this.eventCallback)}onChecker(e){if(e.target===document.querySelector(this.eventSelector))return e.stopPropagation(),this.eventCallback(e)}ready(e){document.addEventListener("DOMContentLoaded",e)}change(e){this.on("change",e)}attr(t){var o=[];for(let e=0;e<this.elements.length;e++)void 0!==this.elements[e][t]?o.push(this.elements[e][t]):o.push(this.elements[e].getAttribute(t));return 1===o.length?o[0]:o}prop(t,o){if(void 0!==o){for(let e=0;e<this.elements.length;e++)this.elements[e][t]=o;return this}var c=[];for(let e=0;e<this.elements.length;e++)c.push(this.elements[e][t]);return 1===c.length?c[0]:c}html(e){return void 0!==e?this.prop("innerHTML",e):this.prop("innerHTML")}val(e){return void 0!==e?this.prop("value",e):this.prop("value")}data(e,t){return void 0!==t?this.prop("apbct-data",e,t):this.prop("apbct-data")}is(e){let t=!1;for(var o of this.elements)t||=this.isElem(o,e);return t}isElem(e,t){let o=!1;return"function"==typeof t&&(o||=t.call(this,e)),"string"==typeof t&&(t.match(/^[a-z]/)&&(e=>(e=document.createElement(e).constructor,!Boolean(~[HTMLElement,HTMLUnknownElement].indexOf(e))))(t)?o||=e.tagName.toLowerCase()===t.toLowerCase():t.match(/^[a-z]/)?o||=Boolean(e[t]):o||=null!==this.selector?null!==document.querySelector(this.selector+t):this.isWithoutSelector(e,t)),o}isWithoutSelector(e,t){var o;let c=!1;for(o of document.querySelectorAll(t))c||=e===o;return c}filter(t){this.selector=null;for(let e=this.elements.length-1;0<=e;e--)this.isElem(this.elements[e],t)||this.elements.splice(Number(e),1);return this}parent(e){return this.select(this.elements[0].parentElement),void 0===e||this.is(e)||this.deselect(),this}parents(e){for(this.select(this.elements[0]);null!==this.elements[this.elements.length-1].parentElement;)this.push(this.elements[this.elements.length-1].parentElement);return this.elements.splice(0,1),void 0!==e&&this.filter(e),this}children(e){return this.select(this.elements[0].children),void 0!==e&&this.filter(e),this}siblings(e){var t=this.elements[0];return this.parent(),this.children(e),this.elements.splice(this.elements.indexOf(t),1),this}remove(){for(var e of this.elements)e.remove()}after(e){for(var t of this.elements)t.after(e)}append(e){for(var t of this.elements)t.append(e)}fadeIn(c){for(let o of this.elements){o.style.opacity=0,o.style.display="block";let e=+new Date,t=function(){o.style.opacity=+o.style.opacity+(new Date-e)/c,e=+new Date,+o.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(t)||setTimeout(t,16))};t()}}fadeOut(c){for(let o of this.elements){o.style.opacity=1;let e=+new Date,t=function(){o.style.opacity=+o.style.opacity-(new Date-e)/c,e=+new Date,0<+o.style.opacity?window.requestAnimationFrame&&requestAnimationFrame(t)||setTimeout(t,16):o.style.display="none"};t()}}}function ctProcessError(e,t){var o={},e=(e&&e.message?o.err={msg:e.message,file:e.fileName||!1,ln:e.lineNumber||lineNo||!1,col:e.columnNumber||columnNo||!1,stacktrace:e.stack||!1,cause:!!t&&JSON.stringify(t),errorObj:error||!1}:(o.err={msg:e},t&&(o.err.file=t)),o.url=window.location.href,o.userAgent=window.navigator.userAgent,"ct_js_errors");let c=localStorage.getItem(e);null===c&&(c="[]"),c=JSON.parse(c);for(let e=0;e<c.length;e++)if(c[e].err.msg===o.err.msg)return;c.push(o),localStorage.setItem(e,JSON.stringify(c))}function selectActualNonce(){let e="";return ctPublicFunctions.hasOwnProperty("_fresh_nonce")&&"string"==typeof ctPublicFunctions._fresh_nonce&&0<ctPublicFunctions._fresh_nonce.length?ctPublicFunctions._fresh_nonce:("admin_ajax"===ctPublicFunctions.data__ajax_type&&ctPublicFunctions.hasOwnProperty("_ajax_nonce")&&"string"==typeof ctPublicFunctions._ajax_nonce&&0<ctPublicFunctions._ajax_nonce.length&&(e=ctPublicFunctions._ajax_nonce),e="rest"===ctPublicFunctions.data__ajax_type&&ctPublicFunctions.hasOwnProperty("_rest_nonce")&&"string"==typeof ctPublicFunctions._rest_nonce&&0<ctPublicFunctions._rest_nonce.length?ctPublicFunctions._rest_nonce:e)}function apbct(e){return(new ApbctCore).select(e)}1===Math.floor(100*Math.random())&&(window.onerror=function(e,t){var o=["apbct","ctPublic"];let c=o.length;for(;c--;)-1!==e.indexOf(o[c])&&ctProcessError(e,t);return!1});class ApbctXhr{xhr=new XMLHttpRequest;method="POST";url="";async=!0;user=null;password=null;data={};button=null;spinner=null;progressbar=null;context=this;callback=null;onErrorCallback=null;responseType="json";headers={};timeout=15e3;methods_to_convert_data_to_URL=["GET","HEAD"];body=null;http_code=0;status_text="";constructor(e){for(var t in e)void 0!==this[t]&&(this[t]=e[t]);if(this.prepare(),Object.keys(this.data).length&&(this.deleteDoubleJSONEncoding(this.data),this.convertData()),!this.url)return console.log("%cXHR%c not URL provided","color: red; font-weight: bold;","color: grey; font-weight: normal;"),!1;this.xhr.open(this.method,this.url,this.async,this.user,this.password),this.setHeaders(),this.xhr.responseType=this.responseType,this.xhr.timeout=this.timeout,this.xhr.onreadystatechange=function(){this.isWpNonceError()?this.getFreshNonceAndRerunXHR(e):this.onReadyStateChange()}.bind(this),this.xhr.onload=function(){this.onLoad()}.bind(this),this.xhr.onprogress=function(e){this.onProgress(e)}.bind(this),this.xhr.onerror=function(){this.onError()}.bind(this),this.xhr.ontimeout=function(){this.onTimeout()}.bind(this),this.xhr.send(this.body)}prepare(){this.button&&(this.button.setAttribute("disabled","disabled"),this.button.style.cursor="not-allowed"),this.spinner&&(this.spinner.style.display="inline")}complete(){this.http_code=this.xhr.status,this.status_text=this.xhr.statusText,this.button&&(this.button.removeAttribute("disabled"),this.button.style.cursor="auto"),this.spinner&&(this.spinner.style.display="none"),this.progressbar&&this.progressbar.fadeOut("slow")}onReadyStateChange(){null!==this.on_ready_state_change&&"function"==typeof this.on_ready_state_change&&this.on_ready_state_change()}onProgress(e){null!==this.on_progress&&"function"==typeof this.on_progress&&this.on_progress()}onError(){console.log("error"),this.complete(),this.error(this.http_code,this.status_text),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback(this.status_text)}onTimeout(){this.complete(),this.error(0,"timeout"),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback("Timeout")}onLoad(){if(this.complete(),"json"===this.responseType){if(null===this.xhr.response)return this.error(this.http_code,this.status_text,"No response"),!1;if(void 0!==this.xhr.response.error)return this.error(this.http_code,this.status_text,this.xhr.response.error),!1}null!==this.callback&&"function"==typeof this.callback&&this.callback.call(this.context,this.xhr.response,this.data)}isWpNonceError(){let e=!1,t=!1;return 4==this.xhr.readyState&&(e="object"==typeof this.xhr.response&&null!==this.xhr.response&&this.xhr.response.hasOwnProperty("data")&&this.xhr.response.data.hasOwnProperty("status")&&403===this.xhr.response.data.status,t="-1"===this.xhr.response&&403===this.xhr.status),e||t}getFreshNonceAndRerunXHR(e){let t="";var o;e.hasOwnProperty("headers")&&e.headers.hasOwnProperty("X-WP-Nonce")&&(t=e.headers["X-WP-Nonce"]),""!==(t=e.hasOwnProperty("data")&&e.data.hasOwnProperty("_ajax_nonce")?e.data._ajax_nonce:t)&&((o={method:"POST"}).data={spbc_remote_call_action:"get_fresh_wpnonce",plugin_name:"antispam",nonce_prev:t,initial_request_params:e},o.notJson=!0,o.url=ctPublicFunctions.host_url,o.callback=function(...e){var t=e[0];let o=!1;(o=void 0!==e[1]&&e[1].hasOwnProperty("initial_request_params")?e[1].initial_request_params:o)&&t.hasOwnProperty("wpnonce")&&(ctPublicFunctions._fresh_nonce=t.wpnonce,"rest"===ctPublicFunctions.data__ajax_type?(new ApbctCore).rest(o):(new ApbctCore).ajax(o))},new ApbctXhr(o))}error(e,t,o){let c="";"timeout"===t?c+="Server response timeout":200===e?"parsererror"===t?c+="Unexpected response from server. See console for details.":(c+="Unexpected error. Status: "+t+".",void 0!==o&&(c+=" Additional error info: "+o)):c+=500===e?"Internal server error.":"Unexpected response code:"+e,this.errorOutput(c),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback(this.status_text)}errorOutput(e){console.log("%c ctXHR error: %c"+e,"color: red;","color: grey;")}setHeaders(){for(var e in this.headers)void 0!==this.headers[e]&&this.xhr.setRequestHeader(e,this.headers[e])}convertData(){return~this.methods_to_convert_data_to_URL.indexOf(this.method)?this.convertDataToURL():this.convertDataToBody()}convertDataToURL(){var e=new URLSearchParams(this.data).toString(),t=this.url.match(/^(https?:\/{2})?[a-z0-9.]+\?/)?"&":"?";return this.url+=t+e,this.url}convertDataToBody(){for(var e in this.body=new FormData,this.data)Object.hasOwn(this.data,e)&&this.body.append(e,"object"==typeof this.data[e]?JSON.stringify(this.data[e]):this.data[e]);return this.body}deleteDoubleJSONEncoding(e){if("object"==typeof e)for(var t in e){var o;Object.hasOwn(e,t)&&("object"==typeof e[t]&&(e[t]=this.deleteDoubleJSONEncoding(e[t])),"string"==typeof e[t])&&null!==e[t].match(/^[\[{].*?[\]}]$/)&&"object"==typeof(o=JSON.parse(e[t]))&&(e[t]=o)}return e}}class ApbctAjax extends ApbctXhr{constructor(...e){(e=e[0]).data._ajax_nonce=selectActualNonce(),super(e)}}class ApbctRest extends ApbctXhr{static default_route=ctPublicFunctions._rest_url+"cleantalk-antispam/v1/";route="";constructor(...e){e=e[0];var t=selectActualNonce();e.url=ApbctRest.default_route+e.route,e.headers={"X-WP-Nonce":t},super(e)}}Object.prototype.hasOwn||Object.defineProperty(Object.prototype,"hasOwn",{value:function(e){return Object.prototype.hasOwnProperty.call(this,e)},enumerable:!1,configurable:!0,writable:!0});class ApbctCollectingUserActivity{elementBody=document.querySelector("body");collectionForms=document.forms;constructor(){this.setListeners()}setListeners(){this.elementBody.addEventListener("click",e=>{this.checkElementInForms(e,"addClicks")}),this.elementBody.addEventListener("mouseup",e=>{"Range"==document.getSelection().type.toString()&&this.addSelected()}),this.elementBody.addEventListener("mousemove",e=>{this.checkElementInForms(e,"trackMouseMovement")})}checkElementInForms(t,e){let o;for(let e=0;e<this.collectionForms.length;e++)o=0<t.target.outerHTML.length&&0<this.collectionForms[e].innerHTML.length?this.collectionForms[e].innerHTML.indexOf(t.target.outerHTML):-1;switch(e){case"addClicks":o<0&&this.addClicks();break;case"trackMouseMovement":-1<o&&this.trackMouseMovement()}}addClicks(){document.ctCollectingUserActivityData?document.ctCollectingUserActivityData.clicks?document.ctCollectingUserActivityData.clicks++:document.ctCollectingUserActivityData.clicks=1:document.ctCollectingUserActivityData={clicks:1}}addSelected(){document.ctCollectingUserActivityData?document.ctCollectingUserActivityData.selected?document.ctCollectingUserActivityData.selected++:document.ctCollectingUserActivityData.selected=1:document.ctCollectingUserActivityData={selected:1}}trackMouseMovement(){document.ctCollectingUserActivityData||(document.ctCollectingUserActivityData={}),document.ctCollectingUserActivityData.mouseMovementsInsideForm||(document.ctCollectingUserActivityData.mouseMovementsInsideForm=!1),document.ctCollectingUserActivityData.mouseMovementsInsideForm=!0}}function ctSetCookie(e,t,c){let o=["ct_sfw_pass_key","ct_sfw_passed","wordpress_apbct_antibot","apbct_anticrawler_passed","apbct_bot_detector_exist","apbct_antiflood_passed","apbct_email_encoder_passed"],n=!1;if("string"==typeof e&&(n="ct_pointer_data"===e,"string"!=typeof t&&"number"!=typeof t||(e=[[e,t,c]])),"none"===ctPublicFunctions.data__cookies_type){let t=[];e.forEach(function(e){-1!==o.indexOf(e[0])?t.push(e):apbctLocalStorage.set(e[0],e[1])}),0<t.length&&ctSetAlternativeCookie(t),ctPublic.force_alt_cookies&&!n?ctSetAlternativeCookie(e,{forceAltCookies:!0}):ctNoCookieAttachHiddenFieldsToForms()}else"native"===ctPublicFunctions.data__cookies_type?(ctPublic.force_alt_cookies&&!n&&ctSetAlternativeCookie(e,{forceAltCookies:!0}),e.forEach(function(e){var t=void 0!==e[2]?"expires="+c+"; ":"",o="https:"===location.protocol?"; secure":"";document.cookie=ctPublicFunctions.cookiePrefix+e[0]+"="+encodeURIComponent(e[1])+"; "+t+"path=/; samesite=lax"+o})):"alternative"!==ctPublicFunctions.data__cookies_type||n||ctSetAlternativeCookie(e)}function ctDetectForcedAltCookiesForms(){var e=0<document.querySelectorAll("#tmpl-nf-layout").length,t=0<document.querySelectorAll(".uael-registration-form-wrapper").length,o=0<document.querySelectorAll('script[id*="smart-forms"]').length,c=0<document.querySelectorAll('iframe[name="jetpack_remote_comment"]').length,n=0<document.querySelectorAll(".cwginstock-subscribe-form").length,a=0<document.querySelectorAll('div[id^="user-registration-form"]').length,i=0<document.querySelectorAll('div[class^="et_pb_newsletter_form"]').length,r=0<document.querySelectorAll('div[class^="fluent_booking_app"]').length,l=0<document.querySelectorAll('div[class^="et_bloom_form_container"]').length,s=0<document.querySelectorAll('div[class*="pafe-form"]').length,d=0<document.querySelectorAll('div [class*="otter-form"]').length,u=0<document.querySelectorAll("form .sqbform, .fields_reorder_enabled").length;ctPublic.force_alt_cookies=o||e||c||t||n||a||i||r||s||l||d||u,setTimeout(function(){var e;ctPublic.force_alt_cookies||(e=0<document.querySelectorAll('main[id^="bookingpress_booking_form"]').length,ctPublic.force_alt_cookies=e)},1e3)}function ctSetAlternativeCookie(e,t){"function"==typeof getJavascriptClientData?Array.isArray(e)&&(e=getJavascriptClientData(e)):console.log("APBCT ERROR: getJavascriptClientData() is not loaded");try{e=JSON.parse(e)}catch(e){return void console.log("APBCT ERROR: JSON parse error:"+e)}var o=t&&t.callback||null,c=t&&t.onErrorCallback||null;t&&t.forceAltCookies&&(e.apbct_force_alt_cookies=!0),"rest"===ctPublicFunctions.data__ajax_type?("string"==typeof e.apbct_pixel_url&&-1!==e.apbct_pixel_url.indexOf("%3A")&&(e.apbct_pixel_url=decodeURIComponent(e.apbct_pixel_url)),apbct_public_sendREST("alt_sessions",{method:"POST",data:{cookies:e},callback:o,onErrorCallback:c})):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_alt_session__save__AJAX",cookies:e},{notJson:1,callback:o,onErrorCallback:c,beforeSend:function(e){e.setRequestHeader("X-Robots-Tag","noindex, nofollow")}})}function ctGetCookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function ctDeleteCookie(e){var t;"none"!==ctPublicFunctions.data__cookies_type&&("native"===ctPublicFunctions.data__cookies_type?(t="https:"===location.protocol?"; secure":"",document.cookie=e+'=""; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax'+t):ctPublicFunctions.data__cookies_type)}function apbct_public_sendAJAX(e,t,o){var c=[],o=(c.callback=t.callback||null,c.onErrorCallback=t.onErrorCallback||null,c.callback_context=t.callback_context||null,c.callback_params=t.callback_params||null,c.async=t.async||!0,c.notJson=t.notJson||null,c.responseType=t.notJson?"text":"json",c.timeout=t.timeout||15e3,c.obj=o||null,c.button=t.button||null,c.spinner=t.spinner||null,c.progressbar=t.progressbar||null,c.silent=t.silent||null,c.no_nonce=t.no_nonce||null,c.data=e,c.url=ctPublicFunctions._ajax_url,selectActualNonce());"string"==typeof e?(c.no_nonce||(c.data=c.data+"&_ajax_nonce="+o),c.data=c.data+"&no_cache="+Math.random()):(c.no_nonce||(c.data._ajax_nonce=o),c.data.no_cache=Math.random()),(new ApbctCore).ajax(c)}function apbct_public_sendREST(e,t){var o=[];o.route=e,o.callback=t.callback||null,o.onErrorCallback=t.onErrorCallback||null,o.data=t.data||[],o.method=t.method||"POST",(new ApbctCore).rest(o)}function apbctGenerateUniqueID(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)}let apbctLocalStorage={get:function(t,o){void 0===o&&(o="value");t=localStorage.getItem(t);if(null!==t)try{var c=JSON.parse(t);if(!c.hasOwnProperty(o))return c;try{return JSON.parse(c[o])}catch(e){return c[o].toString()}}catch(e){return t}return!1},set:function(e,t,o=!0){o?(o={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},localStorage.setItem(e,JSON.stringify(o))):localStorage.setItem(e,t)},isAlive:function(e,t){return void 0===t&&(t=86400),this.get(e,"timestamp")+t>Math.floor((new Date).getTime()/1e3)},isSet:function(e){return null!==localStorage.getItem(e)},delete:function(e){localStorage.removeItem(e)},getCleanTalkData:function(){var t={};for(let e=0;e<localStorage.length;e++){var o=localStorage.key(e);-1===o.indexOf("ct_")&&-1===o.indexOf("apbct_")||(t[o.toString()]=apbctLocalStorage.get(o))}return t}},apbctSessionStorage={get:function(t,e){void 0===e&&(e="value");t=sessionStorage.getItem(t);if(null!==t)try{var o=JSON.parse(t);return o.hasOwnProperty(e)?JSON.parse(o[e]):o}catch(e){return t}return!1},set:function(e,t,o=!0){o?(o={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},sessionStorage.setItem(e,JSON.stringify(o))):sessionStorage.setItem(e,t)},isSet:function(e){return null!==sessionStorage.getItem(e)},delete:function(e){sessionStorage.removeItem(e)},getCleanTalkData:function(){var t={};for(let e=0;e<sessionStorage.length;e++){var o=sessionStorage.key(e);-1===o.indexOf("ct_")&&-1===o.indexOf("apbct_")||(t[o.toString()]=apbctSessionStorage.get(o))}return t}};function apbctOnAnimationStart(e){("onautofillstart"===e.animationName?apbctAutocomplete:apbctCancelAutocomplete)(e.target)}function apbctOnInput(e){("insertReplacementText"!==e.inputType&&"data"in e?apbctCancelAutocomplete:apbctAutocomplete)(e.target)}function apbctAutocomplete(e){var t;e.hasAttribute("autocompleted")||(e.setAttribute("autocompleted",""),t=new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!0,detail:null}),e.dispatchEvent(t))||(e.value="")}function apbctCancelAutocomplete(e){e.hasAttribute("autocompleted")&&(e.removeAttribute("autocompleted"),e.dispatchEvent(new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!1,detail:null})))}class ApbctForceProtection{wrappers=[];constructor(){this.wrappers=this.findWrappers(),this.wrappers.length<1||this.checkBot()}findWrappers(){return document.querySelectorAll("div.ct-encoded-form-wrapper")}checkBot(){var e={event_javascript_data:getJavascriptClientData(),post_url:document.location.href,referrer:document.referrer};"rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("force_protection_check_bot",{data:e,method:"POST",callback:e=>this.checkBotCallback(e)}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&(e.action="apbct_force_protection_check_bot",apbct_public_sendAJAX(e,{callback:e=>this.checkBotCallback(e)}))}checkBotCallback(e){if(e.data&&e.data.status&&200!==e.data.status)console.log("ApbctForceProtection connection error occurred"),this.decodeForms();else{if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return console.log("ApbctForceProtection decodeForms error",e),void this.decodeForms()}"object"==typeof e&&e.allow&&1===e.allow?(this.decodeForms(),document.dispatchEvent(new Event("apbctForceProtectionAllowed"))):this.showMessageForBot(e.message)}}decodeForms(){let o;this.wrappers.forEach(e=>{o=e.querySelector("div.ct-encoded-form").dataset.encodedForm;try{var t;o&&"string"==typeof o&&(t=decodeURIComponent(o),e.outerHTML=atob(t))}catch(e){console.log(e)}})}showMessageForBot(t){let o;this.wrappers.forEach(e=>{(o=e.querySelector("div.ct-encoded-form").dataset.encodedForm)&&(e.outerHTML='<div class="ct-encoded-form-forbidden">'+t+"</div>")})}}function apbctForceProtect(){+ctPublic.settings__forms__force_protection&&void 0!==ApbctForceProtection&&new ApbctForceProtection}ctPublic.data__key_is_ok&&("loading"!==document.readyState?apbctForceProtect():apbct_attach_event_handler(document,"DOMContentLoaded",apbctForceProtect));class CTTypoData{fieldData={isAutoFill:!1,isUseBuffer:!1,speedDelta:0,firstKeyTimestamp:0,lastKeyTimestamp:0,lastDelta:0,countOfKey:0};fields=document.querySelectorAll("textarea[name=comment]");data=[];gatheringFields(){Array.prototype.slice.call(this.fields).forEach((e,t)=>{this.data.push(Object.assign({},this.fieldData))})}setListeners(){this.fields.forEach((e,t)=>{e.addEventListener("paste",()=>{this.data[t].isUseBuffer=!0})}),this.fields.forEach((e,t)=>{e.addEventListener("onautocomplete",()=>{this.data[t].isAutoFill=!0})}),this.fields.forEach((e,o)=>{e.addEventListener("input",()=>{this.data[o].countOfKey++;var e,t=+new Date;1===this.data[o].countOfKey?(this.data[o].lastKeyTimestamp=t,this.data[o].firstKeyTimestamp=t):(e=t-this.data[o].lastKeyTimestamp,2===this.data[o].countOfKey?(this.data[o].lastKeyTimestamp=t,this.data[o].lastDelta=e):2<this.data[o].countOfKey&&(this.data[o].speedDelta+=Math.abs(this.data[o].lastDelta-e),this.data[o].lastKeyTimestamp=t,this.data[o].lastDelta=e))})})}}let ctDate=new Date,ctTimeMs=(new Date).getTime(),ctMouseEventTimerFlag=!0,ctMouseData=[],ctMouseDataCounter=0,ctCheckedEmails={},ctCheckedEmailsExist={},ctMouseReadInterval,ctMouseWriteDataInterval,tokenCheckerIntervalId,botDetectorLogLastUpdate=0,botDetectorLogEventTypesCollected=[];function apbct_attach_event_handler(e,t,o){"function"==typeof window.addEventListener?e.addEventListener(t,o):e.attachEvent(t,o)}function apbct_remove_event_handler(e,t,o){"function"==typeof window.removeEventListener?e.removeEventListener(t,o):e.detachEvent(t,o)}let ctFunctionFirstKey=function(e){ctSetCookie("ct_fkp_timestamp",Math.floor((new Date).getTime()/1e3)),ctKeyStopStopListening()},ctFunctionMouseMove=(cronFormsHandler(2e3),ctPublicFunctions.hasOwnProperty("data__bot_detector_enabled")&&1==ctPublicFunctions.data__bot_detector_enabled&&ctPublicFunctions.hasOwnProperty("data__frontend_data_log_enabled")&&1==ctPublicFunctions.data__frontend_data_log_enabled&&sendBotDetectorLogToAltSessions(1e3),ctPublic.data__key_is_ok&&(ctMouseReadInterval=setInterval(function(){ctMouseEventTimerFlag=!0},150),ctMouseWriteDataInterval=setInterval(function(){ctSetCookie("ct_pointer_data",JSON.stringify(ctMouseData))},1200)),function(e){ctSetMouseMoved(),!0===ctMouseEventTimerFlag&&(ctMouseData.push([Math.round(e.clientY),Math.round(e.clientX),Math.round((new Date).getTime()-ctTimeMs)]),ctMouseDataCounter++,ctMouseEventTimerFlag=!1,50<=ctMouseDataCounter)&&ctMouseStopData()});function cronFormsHandler(e=2e3){setTimeout(function(){setInterval(function(){restartFieldsListening(),restartBotDetectorEventTokenAttach()},2e3)},e)}function sendBotDetectorLogToAltSessions(e=3e3,t=1e3){setTimeout(function(){setInterval(function(){var e=apbctLocalStorage.get("ct_bot_detector_frontend_data_log");needsSaveLogToAltSessions(e)&&(botDetectorLogLastUpdate=e.log_last_update,ctSetAlternativeCookie([],{forceAltCookies:!0}))},t)},e)}function needsSaveLogToAltSessions(t){if(t&&t.hasOwnProperty("log_last_update")&&botDetectorLogLastUpdate!==t.log_last_update)try{for(let e=0;e<t.records.length;e++){var o=t.records[e].frontend_data.js_event;if(void 0===o||!botDetectorLogEventTypesCollected.includes(o))return botDetectorLogEventTypesCollected.push(o),!0}}catch(e){console.log("APBCT: bot detector log collection error: ".e.toString())}return!1}function restartBotDetectorEventTokenAttach(){var e,t=0<document.getElementsByClassName("latepoint-form").length||0<document.getElementsByClassName("mec-booking-form-container").length||null!==document.getElementById("login-form-popup");try{t&&(e=apbctLocalStorage.get("bot_detector_event_token"),"function"==typeof setEventTokenField)&&void 0!==e&&64===e.length&&setEventTokenField(e)}catch(e){console.log(e.toString())}}function ctMouseStopData(){apbct_remove_event_handler(document,"mousemove",ctFunctionMouseMove),clearInterval(ctMouseReadInterval),clearInterval(ctMouseWriteDataInterval)}function ctKeyStopStopListening(){apbct_remove_event_handler(document,"mousedown",ctFunctionFirstKey),apbct_remove_event_handler(document,"keydown",ctFunctionFirstKey)}function checkEmail(e){let t=e.target.value;!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||!t||t in ctCheckedEmails||("rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("check_email_before_post",{method:"POST",data:{email:t},callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct_checked_emails",JSON.stringify(ctCheckedEmails)))}}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_email_check_before_post",email:t},{callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct_checked_emails",JSON.stringify(ctCheckedEmails)))}}))}function checkEmailExist(t){let o=t.target.value;var e;o&&o.length?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)&&(o in ctCheckedEmailsExist?(e=ctCheckedEmailsExist[o],getResultCheckEmailExist(t,e,o)):(viewCheckEmailExist(t,"load"),(ctPublicFunctions.data__ajax_type="rest")===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("check_email_exist_post",{method:"POST",data:{email:o},callback:function(e){getResultCheckEmailExist(t,e,o)}}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_email_check_exist_post",email:o},{callback:function(e){getResultCheckEmailExist(t,e,o)}}))):((e=document.getElementById("apbct-check_email_exist-block"))&&e.remove(),(e=document.getElementById("apbct-check_email_exist-popup_description"))&&e.remove())}function getResultCheckEmailExist(e,t,o){t&&t.result&&(t=t.result,ctCheckedEmailsExist[o]={result:t,timestamp:Date.now()/1e3|0},"EXISTS"==t.result?viewCheckEmailExist(e,"good_email",t.text_result):viewCheckEmailExist(e,"bad_email",t.text_result),ctSetCookie("ct_checked_emails_exist",JSON.stringify(ctCheckedEmailsExist)))}function viewCheckEmailExist(o,c,n){o=o.target.parentElement;let a=o.querySelector('[name*="email"]');if(a){let e,t;switch(document.getElementById("apbct-check_email_exist-block")?e=document.getElementById("apbct-check_email_exist-block"):((e=document.createElement("div")).setAttribute("class","apbct-check_email_exist-block"),e.setAttribute("id","apbct-check_email_exist-block"),window.addEventListener("scroll",function(){e.style.top=a.getBoundingClientRect().top+"px"}),o.after(e)),document.getElementById("apbct-check_email_exist-popup_description")?t=document.getElementById("apbct-check_email_exist-popup_description"):((t=document.createElement("div")).setAttribute("class","apbct-check_email_exist-popup_description"),t.setAttribute("id","apbct-check_email_exist-popup_description"),window.addEventListener("scroll",function(){t.style.top=e.getBoundingClientRect().top+"px"}),e.after(t)),ctEmailExistSetElementsPositions(),window.addEventListener("resize",function(e){ctEmailExistSetElementsPositions()}),c){case"load":e.classList.remove("apbct-check_email_exist-good_email","apbct-check_email_exist-bad_email"),e.classList.add("apbct-check_email_exist-load");break;case"good_email":e.classList.remove("apbct-check_email_exist-load","apbct-check_email_exist-bad_email"),e.classList.add("apbct-check_email_exist-good_email"),e.onmouseover=function(){t.textContent=n,t.style.display="block",t.style.top=a.getBoundingClientRect().top-t.getBoundingClientRect().height+"px",t.style.color="#1C7129"},e.onmouseout=function(){t.style.display="none"};break;case"bad_email":e.classList.remove("apbct-check_email_exist-load","apbct-check_email_exist-good_email"),e.classList.add("apbct-check_email_exist-bad_email"),e.onmouseover=function(){t.textContent=n,t.style.display="block",t.style.top=a.getBoundingClientRect().top-t.getBoundingClientRect().height+"px",t.style.color="#E01111"},e.onmouseout=function(){t.style.display="none"}}}}function ctEmailExistSetElementsPositions(){var e,t=document.querySelector('comment-form input[name*="email"], input#email');t&&((e=document.getElementById("apbct-check_email_exist-block"))&&(e.style.top=t.getBoundingClientRect().top+"px",e.style.left=t.getBoundingClientRect().right-35-10+"px",e.style.height=t.offsetHeight+"px",e.style.width="35px"),e=document.getElementById("apbct-check_email_exist-popup_description"))&&(e.style.width=t.offsetWidth+"px",e.style.left=t.getBoundingClientRect().left+"px")}function ctIsDrawPixel(){return("3"!=ctPublic.pixel__setting||"1"!=ctPublic.settings__data__bot_detector_enabled)&&(+ctPublic.pixel__enabled||"none"===ctPublic.data__cookies_type&&0===document.querySelectorAll("img#apbct_pixel").length||"alternative"===ctPublic.data__cookies_type&&0===document.querySelectorAll("img#apbct_pixel").length)}function ctSetPixelImg(e){if("3"==ctPublic.pixel__setting&&"1"==ctPublic.settings__data__bot_detector_enabled)return!1;var t;ctSetCookie("apbct_pixel_url",e),ctIsDrawPixel()&&!document.getElementById("apbct_pixel")&&((t=document.createElement("img")).setAttribute("alt","CleanTalk Pixel"),t.setAttribute("title","CleanTalk Pixel"),t.setAttribute("id","apbct_pixel"),t.setAttribute("style","display: none; left: 99999px;"),t.setAttribute("src",e),apbct("body").append(t))}function ctSetPixelImgFromLocalstorage(e){if("3"==ctPublic.pixel__setting&&"1"==ctPublic.settings__data__bot_detector_enabled)return!1;var t;ctIsDrawPixel()&&!document.getElementById("apbct_pixel")&&((t=document.createElement("img")).setAttribute("alt","CleanTalk Pixel"),t.setAttribute("title","CleanTalk Pixel"),t.setAttribute("id","apbct_pixel"),t.setAttribute("style","display: none; left: 99999px;"),t.setAttribute("src",decodeURIComponent(e)),apbct("body").append(t))}function ctGetPixelUrl(){if("3"==ctPublic.pixel__setting&&"1"==ctPublic.settings__data__bot_detector_enabled)return!1;var e=apbctLocalStorage.get("apbct_pixel_url");if(!1!==e){if(apbctLocalStorage.isAlive("apbct_pixel_url",10800))return void ctSetPixelImgFromLocalstorage(e);apbctLocalStorage.delete("apbct_pixel_url")}"rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("apbct_get_pixel_url",{method:"POST",callback:function(e){e&&("string"==typeof e||e instanceof String)&&0===e.indexOf("https")&&(apbctLocalStorage.get("apbct_pixel_url")||(apbctLocalStorage.set("apbct_pixel_url",e),ctNoCookieAttachHiddenFieldsToForms()),ctSetPixelImg(e))}}):apbct_public_sendAJAX({action:"apbct_get_pixel_url"},{notJson:!0,callback:function(e){e&&("string"==typeof e||e instanceof String)&&0===e.indexOf("https")&&(apbctLocalStorage.get("apbct_pixel_url")||(apbctLocalStorage.set("apbct_pixel_url",e),ctNoCookieAttachHiddenFieldsToForms()),ctSetPixelImg(e))},beforeSend:function(e){e.setRequestHeader("X-Robots-Tag","noindex, nofollow")}})}function ctSetHasScrolled(){apbctLocalStorage.isSet("ct_has_scrolled")&&apbctLocalStorage.get("ct_has_scrolled")||(ctSetCookie("ct_has_scrolled","true"),apbctLocalStorage.set("ct_has_scrolled",!0)),"native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_has_scrolled")&&ctSetCookie("ct_has_scrolled","true")}function ctSetMouseMoved(){apbctLocalStorage.isSet("ct_mouse_moved")&&apbctLocalStorage.get("ct_mouse_moved")||(ctSetCookie("ct_mouse_moved","true"),apbctLocalStorage.set("ct_mouse_moved",!0)),"native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_mouse_moved")&&ctSetCookie("ct_mouse_moved","true")}function restartFieldsListening(){apbctLocalStorage.isSet("ct_has_input_focused")||apbctLocalStorage.isSet("ct_has_key_up")||ctStartFieldsListening()}function ctStartFieldsListening(){if(!apbctLocalStorage.isSet("ct_has_key_up")&&!apbctLocalStorage.get("ct_has_key_up")||!apbctLocalStorage.isSet("ct_has_input_focused")&&!apbctLocalStorage.get("ct_has_input_focused")||"native"!==ctPublic.data__cookies_type||void 0===ctGetCookie("ct_has_input_focused")||void 0===ctGetCookie("ct_has_key_up")){var t=ctGetPageForms();if(ctPublic.handled_fields=[],0<t.length)for(let e=0;e<t.length;e++){var o=t[e].querySelectorAll("input,textarea");for(let e=0;e<o.length;e++)"hidden"!==o[e].type&&(ctPublic.handled_fields.push(o[e]),apbct_attach_event_handler(o[e],"focus",ctFunctionHasInputFocused),apbct_attach_event_handler(o[e],"keyup",ctFunctionHasKeyUp))}}}function ctStopFieldsListening(t,o){if(void 0!==ctPublic.handled_fields&&0<ctPublic.handled_fields.length)for(let e=0;e<ctPublic.handled_fields.length;e++)apbct_remove_event_handler(ctPublic.handled_fields[e],t,o)}let ctFunctionHasInputFocused=function(e){ctSetHasInputFocused(),ctStopFieldsListening("focus",ctFunctionHasInputFocused)},ctFunctionHasKeyUp=function(e){ctSetHasKeyUp(),ctStopFieldsListening("keyup",ctFunctionHasKeyUp)};function ctSetHasInputFocused(){apbctLocalStorage.isSet("ct_has_input_focused")&&apbctLocalStorage.get("ct_has_input_focused")||apbctLocalStorage.set("ct_has_input_focused",!0),("native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_has_input_focused")||"alternative"===ctPublic.data__cookies_type||"none"===ctPublic.data__cookies_type&&(void 0!==ctPublic.force_alt_cookies||void 0!==ctPublic.force_alt_cookies&&ctPublic.force_alt_cookies))&&ctSetCookie("ct_has_input_focused","true")}function ctSetHasKeyUp(){apbctLocalStorage.isSet("ct_has_key_up")&&apbctLocalStorage.get("ct_has_key_up")||apbctLocalStorage.set("ct_has_key_up",!0),("native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_has_key_up")||"alternative"===ctPublic.data__cookies_type||"none"===ctPublic.data__cookies_type&&(void 0!==ctPublic.force_alt_cookies||void 0!==ctPublic.force_alt_cookies&&ctPublic.force_alt_cookies))&&ctSetCookie("ct_has_key_up","true")}function apbctPrepareBlockForAjaxForms(){function c(e){if(e.responseText&&-1!==e.responseText.indexOf('"apbct')&&-1===e.responseText.indexOf("DOCTYPE"))try{ctParseBlockMessage(JSON.parse(e.responseText))}catch(e){console.log(e.toString())}}"undefined"!=typeof jQuery?"function"!=typeof jQuery(document).ajaxComplete()?jQuery(document).on("ajaxComplete",function(e,t,o){c(t)}):jQuery(document).ajaxComplete(function(e,t,o){c(t)}):"undefined"!=typeof XMLHttpRequest&&document.addEventListener("readystatechange",function(e){4===e.target.readyState&&c(e.target)})}function startForcedAltEventTokenChecker(){tokenCheckerIntervalId=setInterval(function(){var e;"1"===apbctLocalStorage.get("event_token_forced_set")?clearInterval(tokenCheckerIntervalId):(e=apbctLocalStorage.get("bot_detector_event_token"))&&(ctSetAlternativeCookie([["ct_bot_detector_event_token",e]],{forceAltCookies:!0}),apbctLocalStorage.set("event_token_forced_set","1"),clearInterval(tokenCheckerIntervalId))},1e3)}function apbct_ready(){document.addEventListener("gform_page_loaded",function(){void 0!==ctPublic.force_alt_cookies&&("undefined"===ctPublic.force_alt_cookies||ctPublic.force_alt_cookies)||(ctNoCookieAttachHiddenFieldsToForms(),"function"!=typeof setEventTokenField)||"function"!=typeof botDetectorLocalStorage||setEventTokenField(botDetectorLocalStorage.get("bot_detector_event_token"))}),ctPublic.wc_ajax_add_to_cart||apbctCheckAddToCartByGet(),apbctPrepareBlockForAjaxForms(),apbctSessionStorage.isSet("apbct_session_id")?apbctLocalStorage.set("apbct_page_hits",Number(apbctLocalStorage.get("apbct_page_hits"))+1):(e=apbctGenerateUniqueID(),apbctSessionStorage.set("apbct_session_id",e,!1),apbctLocalStorage.set("apbct_page_hits",1),document.referrer&&new URL(document.referrer).host!==location.host&&apbctSessionStorage.set("apbct_site_referer",document.referrer,!1)),apbctWriteReferrersToSessionStorage();var e=apbctLocalStorage.get("ct_cookies_type"),e=(e&&e===ctPublic.data__cookies_type||(apbctLocalStorage.set("ct_cookies_type",ctPublic.data__cookies_type),apbctLocalStorage.delete("ct_mouse_moved"),apbctLocalStorage.delete("ct_has_scrolled")),"alternative"!==ctPublic.data__cookies_type&&(ctStartFieldsListening(),setTimeout(ctStartFieldsListening,1e3)),window.addEventListener("animationstart",apbctOnAnimationStart,!0),window.addEventListener("input",apbctOnInput,!0),document.ctTypoData=new CTTypoData,document.ctTypoData.gatheringFields(),document.ctTypoData.setListeners(),[["ct_ps_timestamp",Math.floor((new Date).getTime()/1e3)],["ct_fkp_timestamp","0"],["ct_pointer_data","0"],["ct_timezone",ctDate.getTimezoneOffset()/60*-1],["ct_screen_info",apbctGetScreenInfo()],["apbct_headless",navigator.webdriver]]);if(apbctLocalStorage.set("ct_ps_timestamp",Math.floor((new Date).getTime()/1e3)),apbctLocalStorage.set("ct_fkp_timestamp","0"),apbctLocalStorage.set("ct_pointer_data","0"),apbctLocalStorage.set("ct_timezone",ctDate.getTimezoneOffset()/60*-1),apbctLocalStorage.set("ct_screen_info",apbctGetScreenInfo()),apbctLocalStorage.set("apbct_headless",navigator.webdriver),"native"!==ctPublic.data__cookies_type)e.push(["apbct_visible_fields","0"]);else{var t=document.cookie.split(";");if(0!==t.length)for(let e=0;e<t.length;e++){var o=t[e].trim().split("=")[0];0===o.indexOf("apbct_visible_fields_")&&ctDeleteCookie(o)}}!+ctPublic.pixel__setting||3==+ctPublic.pixel__setting&&1==ctPublic.settings__data__bot_detector_enabled||(ctIsDrawPixel()?ctGetPixelUrl():e.push(["apbct_pixel_url",ctPublic.pixel__url])),+ctPublic.data__email_check_before_post&&(e.push(["ct_checked_emails","0"]),apbct("input[type = 'email'], #email").on("blur",checkEmail)),+ctPublic.data__email_check_exist_post&&(e.push(["ct_checked_emails_exist","0"]),apbct("comment-form input[name = 'email'], input#email").on("blur",checkEmailExist)),apbctLocalStorage.isSet("ct_checkjs")?e.push(["ct_checkjs",apbctLocalStorage.get("ct_checkjs")]):e.push(["ct_checkjs",0]),ctDetectForcedAltCookiesForms();var c=apbctLocalStorage.get("bot_detector_event_token"),n=(void 0!==ctPublic.force_alt_cookies&&ctPublic.force_alt_cookies&&ctPublic.settings__data__bot_detector_enabled&&(apbctLocalStorage.set("event_token_forced_set","0"),c?(e.push(["ct_bot_detector_event_token",c]),apbctLocalStorage.set("event_token_forced_set","1")):startForcedAltEventTokenChecker()),ctSetCookie(e),setTimeout(function(){void 0!==ctPublic.force_alt_cookies&&("undefined"===ctPublic.force_alt_cookies||ctPublic.force_alt_cookies)||ctNoCookieAttachHiddenFieldsToForms(),void 0!==ctPublic.data__cookies_type&&"none"===ctPublic.data__cookies_type&&(ctAjaxSetupAddCleanTalkDataBeforeSendAjax(),ctAddWCMiddlewares());for(let e=0;e<document.forms.length;e++){var t,o,c=document.forms[e];ctCheckHiddenFieldsExclusions(document.forms[e],"visible_fields")||c.querySelector('input[name="wspsc_add_cart_submit"]')||c.querySelector('input[name="option"][value="com_vikrentcar"]')||c.querySelector('input[name="option"][value="com_vikbooking"]')||void 0!==document.forms[e].elements.apbct_visible_fields&&0<document.forms[e].elements.apbct_visible_fields.length||(c.querySelector('input[name="apbct_visible_fields"]')&&(t=c.querySelector('input[name="apbct_visible_fields"]'),c.removeChild(t)),(t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("id","apbct_visible_fields_"+e),t.setAttribute("name","apbct_visible_fields"),(o={})[0]=apbct_collect_visible_fields(c),t.value=btoa(JSON.stringify(o)),c.append(t),c.onsubmit_prev=c.onsubmit,c.ctFormIndex=e,c.onsubmit=function(e){"native"!==ctPublic.data__cookies_type&&void 0!==e.target.ctFormIndex&&apbct_visible_fields_set_cookie(apbct_collect_visible_fields(this),e.target.ctFormIndex),"none"===ctPublic.data__cookies_type&&isFormThatNeedCatchXhr(e.target)&&(window.XMLHttpRequest.prototype.send=function(e){var t="data%5Bct_no_cookie_hidden_field%5D="+getNoCookieData()+"&";defaultSend.call(this,t+e),setTimeout(()=>{window.XMLHttpRequest.prototype.send=defaultSend},0)}),e.target.onsubmit_prev instanceof Function&&!ctOnsubmitPrevCallExclude(e.target)&&(void 0!==e.target.classList&&e.target.classList.contains("brave_form_form")&&e.preventDefault(),setTimeout(function(){e.target.onsubmit_prev.call(e.target,e)},0))})}},1e3),document.querySelectorAll("[data-original-string]"));if((ctPublic.encodedEmailNodes=n).length)for(let e=0;e<n.length;++e)n[e].addEventListener("click",ctFillDecodedEmailHandler);for(let t of document.forms)"undefined"==typeof ctPublic||1!=+ctPublic.settings__forms__search_test||!("searchform"===t.getAttribute("id")||null!==t.getAttribute("class")&&-1!==t.getAttribute("class").indexOf("search-form")||null!==t.getAttribute("role")&&-1!==t.getAttribute("role").indexOf("search"))||t.querySelector("input.dgwt-wcas-search-input")||"hero-search-form"!==t.getAttribute("id")&&"hb-booking-search-form"!==t.getAttribute("class")&&(t.apbctSearchPrevOnsubmit=t.onsubmit,t.onsubmit=e=>ctSearchFormOnSubmitHandler(e,t));apbctCatchXmlHttpRequest(),new ApbctCollectingUserActivity,ctPublic.settings__sfw__anti_crawler&&checkBotDetectorExist()}function checkBotDetectorExist(){if(ctPublic.settings__data__bot_detector_enabled){let e=setInterval(()=>{!localStorage.bot_detector_event_token||(ctSetCookie("apbct_bot_detector_exist","1","3600"),clearInterval(e))},500)}}function ctAddWCMiddlewares(){window.hasOwnProperty("wp")&&window.wp.hasOwnProperty("apiFetch")&&"function"==typeof window.wp.apiFetch.use&&window.wp.apiFetch.use((e,t)=>("object"==typeof e&&null!==e&&e.hasOwnProperty("data")&&e.hasOwnProperty("path")&&(e.data.hasOwnProperty("requests")&&0<e.data.requests.length&&e.data.requests[0].hasOwnProperty("path")&&"/wc/store/v1/cart/add-item"===e.data.requests[0].path&&(e.data.requests[0].data.ct_no_cookie_hidden_field=getNoCookieData(),e.data.requests[0].data.event_token=localStorage.getItem("bot_detector_event_token")),"/wc/store/v1/checkout"===e.path)&&(e.data.ct_no_cookie_hidden_field=getNoCookieData(),e.data.event_token=localStorage.getItem("bot_detector_event_token")),t(e)))}function apbctCatchXmlHttpRequest(){if(null!==document.querySelector("div.wfu_container")){let e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(o){if(o&&"string"==typeof o&&-1!==o.indexOf("action=wfu_ajax_action_ask_server")){let e="",t=localStorage.getItem("bot_detector_event_token");try{t=JSON.parse(t)}catch{t=!1}null!==t&&!1!==t&&t.hasOwnProperty("value")&&""!==t.value&&(t=t.value,e+="&data%5Bct_bot_detector_event_token%5D="+t);var c=getNoCookieData();o+=e+="&data%5Bct_no_cookie_hidden_field%5D="+c}return e.apply(this,[o])}}}function apbctAjaxSetImportantParametersOnCacheExist(e){e&&("rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("apbct_set_important_parameters",{}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_set_important_parameters"},{}))}function ctAjaxSetupAddCleanTalkDataBeforeSendAjax(){let n=!1;"undefined"!=typeof jQuery&&"function"==typeof jQuery.ajaxSetup&&jQuery.ajaxSetup({beforeSend:function(e,t){let o=!1;if("string"==typeof t.data&&(-1!==t.data.indexOf("twt_cc_signup")&&(o="twt_cc_signup"),-1!==t.data.indexOf("action=mailpoet")&&(o="action=mailpoet"),-1!==t.data.indexOf("action=user_registration")&&-1!==t.data.indexOf("ur_frontend_form_nonce")&&(o="action=user_registration"),-1!==t.data.indexOf("action=happyforms_message")&&(o="action=happyforms_message"),-1!==t.data.indexOf("action=new_activity_comment"))&&(o="action=new_activity_comment"),"string"==typeof t.url&&-1!==t.url.indexOf("wc-ajax=add_to_cart")&&(o="wc-ajax=add_to_cart",null!==localStorage.getItem("bot_detector_event_token"))){n=localStorage.getItem("bot_detector_event_token");try{n=JSON.parse(n)}catch{n=!1}!1!==n&&n.hasOwnProperty("value")&&""!==n.value&&(n=n.value)}var c;o&&(c=getNoCookieData(),n="string"==typeof n?"data%5Bct_bot_detector_event_token%5D="+n+"&":"",t.data=(c="data%5Bct_no_cookie_hidden_field%5D="+c+"&")+n+t.data)}})}function ctOnsubmitPrevCallExclude(e){return!!e.classList.contains("hb-booking-search-form")}function ctSearchFormOnSubmitHandler(o,c){try{let e=c.querySelector('[name*="apbct_email_id__"]'),t=null;null!==e&&null!==e.value&&(t=e.value);var n,a,i,r=getCleanTalkStorageDataArray(),l=apbctLocalStorage.get("bot_detector_event_token");null===r&&null===e&&null===l||(o.preventDefault(),n=()=>{null!==e&&e.parentNode.removeChild(e),"function"==typeof c.apbctSearchPrevOnsubmit?c.apbctSearchPrevOnsubmit():HTMLFormElement.prototype.submit.call(c)},a=r,null!==t&&(a.apbct_search_form__honeypot_value=t),a.ct_bot_detector_event_token=l,"string"==typeof a.apbct_pixel_url&&-1!==a.apbct_pixel_url.indexOf("%3A")&&(a.apbct_pixel_url=decodeURIComponent(a.apbct_pixel_url)),void 0!==(i=JSON.stringify(a))&&0!==i.length?ctSetAlternativeCookie(i,{callback:n,onErrorCallback:n,forceAltCookies:!0}):n())}catch(e){console.warn("APBCT search form onsubmit handler error. "+e)}}function getJavascriptClientData(t=[]){let o={};o.ct_checked_emails=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_checked_emails"),o.ct_checked_emails_exist=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_checked_emails_exist"),o.ct_checkjs=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_checkjs"),o.ct_fkp_timestamp=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_fkp_timestamp"),o.ct_pointer_data=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_pointer_data"),o.ct_ps_timestamp=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_ps_timestamp"),o.ct_screen_info=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_screen_info"),o.ct_timezone=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_timezone");var e=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_mouse_moved"),c=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_has_scrolled"),n=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_cookies_type"),a=apbctLocalStorage.get("apbct_page_hits"),i=apbctSessionStorage.get("apbct_prev_referer"),r=apbctSessionStorage.get("apbct_site_referer"),l=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_js_errors"),s=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"apbct_pixel_url"),d=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"apbct_headless"),u=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_bot_detector_frontend_data_log"),p=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_mouse_moved"),_=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_has_scrolled"),m=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_cookies_type"),b=ctGetCookie(ctPublicFunctions.cookiePrefix+"apbct_pixel_url"),f=!!ctGetCookie(ctPublicFunctions.cookiePrefix+"apbct_headless");if(o.ct_mouse_moved=void 0!==e?e:p,o.ct_has_scrolled=void 0!==c?c:_,o.ct_cookies_type=void 0!==n?n:m,o.apbct_pixel_url=void 0!==s?s:b,o.apbct_headless=void 0!==d?d:f,o.ct_bot_detector_frontend_data_log=void 0!==u?u:"",o.apbct_pixel_url&&"string"==typeof o.apbct_pixel_url&&o.apbct_pixel_url.indexOf("%3A%2F")&&(o.apbct_pixel_url=decodeURIComponent(o.apbct_pixel_url)),o.apbct_page_hits=a,o.apbct_prev_referer=i,o.apbct_site_referer=r,o.apbct_ct_js_errors=l,o.apbct_pixel_url||(o.apbct_pixel_url=ctPublic.pixel__url),"object"==typeof t)for(let e=0;e<t.length;++e)"object"==typeof t[e][1]?o[t[e][1][0]]=t[e][1][1]:o[t[e][0]]=t[e][1];else console.log("APBCT JS ERROR: Collecting data type mismatch");return o=removeDoubleJsonEncoding(o),JSON.stringify(o)}function removeDoubleJsonEncoding(e){if("object"==typeof e)for(var t in e){var o;"object"==typeof e[t]&&(e[t]=removeDoubleJsonEncoding(e[t])),"string"==typeof e[t]&&null!==e[t].match(/^[\[{].*?[\]}]$/)&&"object"==typeof(o=JSON.parse(e[t]))&&(e[t]=o)}return e}function apbct_collect_visible_fields(e){let t=[],c="",n=0,a="",i=0,o=[];for(var r in e.elements)isNaN(+r)||(t[r]=e.elements[r]);return(t=t.filter(function(e){return-1===o.indexOf(e.getAttribute("name"))&&(-1===["radio","checkbox"].indexOf(e.getAttribute("type"))||(o.push(e.getAttribute("name")),!1))})).forEach(function(e,t,o){"submit"!==e.getAttribute("type")&&null!==e.getAttribute("name")&&"ct_checkjs"!==e.getAttribute("name")&&("none"!==getComputedStyle(e).display&&"hidden"!==getComputedStyle(e).visibility&&"0"!==getComputedStyle(e).opacity&&"hidden"!==e.getAttribute("type")||e.classList.contains("wp-editor-area")?(c+=" "+e.getAttribute("name"),n++):(a+=" "+e.getAttribute("name"),i++))}),a=a.trim(),{visible_fields:c=c.trim(),visible_fields_count:n,invisible_fields:a,invisible_fields_count:i}}function apbct_visible_fields_set_cookie(e,t){var o="object"==typeof e&&null!==e?e:{};if("native"===ctPublic.data__cookies_type)for(var c in o){if(10<c)return;ctSetCookie("apbct_visible_fields_"+(void 0!==t?t:c),JSON.stringify(o[c]))}else ctSetCookie("apbct_visible_fields",JSON.stringify(o))}function apbct_js_keys__set_input_value(t,e,o,c){if(0<document.querySelectorAll("[name^=ct_checkjs]").length){var n=document.querySelectorAll("[name^=ct_checkjs]");for(let e=0;e<n.length;e++)n[e].value=t.js_key}}function apbctGetScreenInfo(){return JSON.stringify({fullWidth:document.documentElement.scrollWidth,fullHeight:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),visibleWidth:document.documentElement.clientWidth,visibleHeight:document.documentElement.clientHeight})}function ctParseBlockMessage(e){let t="";void 0!==e.apbct&&(e=e.apbct).blocked&&(t=e.comment),(t=void 0!==e.data&&void 0!==(e=e.data).message?e.message:t)&&(document.dispatchEvent(new CustomEvent("apbctAjaxBockAlert",{bubbles:!0,detail:{message:t}})),cleantalkModal.loaded=t,cleantalkModal.open(),1==+e.stop_script)&&window.stop()}function ctSetPixelUrlLocalstorage(e){ctSetCookie("apbct_pixel_url",e)}function ctNoCookieConstructHiddenField(e){let t="hidden";"submit"===e&&(t="submit");var e="",o=getCleanTalkStorageDataArray(),o=JSON.stringify(o);return o="_ct_no_cookie_data_"+btoa(o),(e=document.createElement("input")).setAttribute("name","ct_no_cookie_hidden_field"),e.setAttribute("value",o),e.setAttribute("type",t),e.classList.add("apbct_special_field"),e.classList.add("ct_no_cookie_hidden_field"),e}function getCleanTalkStorageDataArray(){var e,t=apbctLocalStorage.getCleanTalkData(),o=apbctSessionStorage.getCleanTalkData();let c={typo:[]},n=(document.ctTypoData&&document.ctTypoData.data&&(c={typo:document.ctTypoData.data}),{collecting_user_activity_data:[]});return document.ctCollectingUserActivityData&&(e=JSON.parse(JSON.stringify(document.ctCollectingUserActivityData)),n={collecting_user_activity_data:e}),{...t,...o,...c,...n}}function ctGetPageForms(){var e=document.forms;return e||!1}function ctGetHiddenFieldExclusionsType(e){var t={no_cookie:0,visible_fields:0},o=((0==+ctPublic.data__visible_fields_required||"get"===e.method.toString().toLowerCase()&&0===e.querySelectorAll(".nf-form-content").length&&"twt_cc_signup"!==e.id||e.classList.contains("slp_search_form")||e.parentElement.classList.contains("mec-booking")||-1!==e.action.toString().indexOf("activehosted.com")||e.id&&"caspioform"===e.id||e.classList&&e.classList.contains("tinkoffPayRow")||e.classList&&e.classList.contains("give-form")||e.id&&"ult-forgot-password-form"===e.id||e.id&&-1!==e.id.toString().indexOf("calculatedfields")||e.id&&-1!==e.id.toString().indexOf("sac-form")||e.id&&-1!==e.id.toString().indexOf("cp_tslotsbooking_pform")||e.name&&-1!==e.name.toString().indexOf("cp_tslotsbooking_pform")||"https://epayment.epymtservice.com/epay.jhtml"===e.action.toString()||e.name&&-1!==e.name.toString().indexOf("tribe-bar-form")||e.id&&"ihf-login-form"===e.id||e.id&&"subscriberForm"===e.id&&-1!==e.action.toString().indexOf("actionType=update")||e.id&&"ihf-main-search-form"===e.id||e.id&&"frmCalc"===e.id||-1!==e.action.toString().indexOf("property-organizer-delete-saved-search-submit")||null!==e.querySelector('a[name="login"]'))&&(t.visible_fields=1),e.parentNode);return(o&&o.classList.contains("proinput")||"options"===e.name&&e.classList.contains("asp-fss-flex"))&&(t.no_cookie=1),e&&e.classList.contains("woocommerce-form-login")&&(t.visible_fields=1,t.no_cookie=1),t}function ctCheckHiddenFieldsExclusions(e,t){var o="string"==typeof e.action?e.action:"";return!!Boolean(e.querySelector("fieldset.asl_sett_scroll"))||!!e.classList.contains("swpf-instant-filtering")||-1!==o.indexOf("secure.payu.com")||-1!==o.indexOf("hsforms")||"string"==typeof t&&-1!==["visible_fields","no_cookie"].indexOf(t)&&1===ctGetHiddenFieldExclusionsType(e)[t]}function ctNoCookieAttachHiddenFieldsToForms(){if("none"===ctPublic.data__cookies_type){var t=ctGetPageForms();if(t)for(let e=0;e<t.length;e++)if(!ctCheckHiddenFieldsExclusions(document.forms[e],"no_cookie")&&(null===document.forms[e].getAttribute("method")||"post"===document.forms[e].getAttribute("method").toLowerCase())){var o=t[e].querySelectorAll(".ct_no_cookie_hidden_field");for(let e=0;e<o.length;e++)o[e].outerHTML="";document.forms[e].append(ctNoCookieConstructHiddenField())}}}ctPublic.data__key_is_ok&&(apbct_attach_event_handler(document,"mousemove",ctFunctionMouseMove),apbct_attach_event_handler(document,"mousedown",ctFunctionFirstKey),apbct_attach_event_handler(document,"keydown",ctFunctionFirstKey),apbct_attach_event_handler(document,"scroll",ctSetHasScrolled)),ctPublic.data__key_is_ok&&("loading"!==document.readyState?apbct_ready():apbct_attach_event_handler(document,"DOMContentLoaded",apbct_ready),apbctLocalStorage.set("ct_checkjs",ctPublic.ct_checkjs_key,!0));let defaultFetch=window.fetch,defaultSend=XMLHttpRequest.prototype.send;function checkFormsExistForCatching(){setTimeout(function(){isFormThatNeedCatch()&&(window.fetch=function(...e){var t;return e&&e[0]&&"function"==typeof e[0].includes&&e[0].includes("/wp-json/metform/")&&(t=getNoCookieData(),e)&&e[1]&&e[1].body&&e[1].body.append("ct_no_cookie_hidden_field",t),defaultFetch.apply(window,e)})},1e3)}function isFormThatNeedCatch(){var e=["metform-form-content"];let o=!1;for(let t of document.forms)e.forEach(function(e){t.classList.contains(e)&&(o=!0)});return o}function isFormThatNeedCatchXhr(e){return null==document.querySelector("div.elementor-widget[title='Login/Signup']")&&!(!e||!e.action||-1===e.action.toString().indexOf("mailpoet_subscription_form"))}function getNoCookieData(){var e=apbctLocalStorage.getCleanTalkData(),t=apbctSessionStorage.getCleanTalkData(),e={...e,...t},e=JSON.stringify(e);return"_ct_no_cookie_data_"+btoa(e)}function apbctWriteReferrersToSessionStorage(){var e=apbctSessionStorage.get("apbct_session_current_page");!1!==e&&document.location.href!==e&&apbctSessionStorage.set("apbct_prev_referer",e,!1),apbctSessionStorage.set("apbct_session_current_page",document.location.href,!1)}function apbctCheckAddToCartByGet(){document.querySelectorAll("a.add_to_cart_button:not(.product_type_variable):not(.wc-interactive)").forEach(c=>{c.addEventListener("click",function(e){let t=c.getAttribute("href");var o=apbctLocalStorage.get("bot_detector_event_token");o&&(-1===t.indexOf("?")?t+="?":t+="&",t+="ct_bot_detector_event_token="+o,c.setAttribute("href",t))})})}"loading"!==document.readyState?checkFormsExistForCatching():apbct_attach_event_handler(document,"DOMContentLoaded",checkFormsExistForCatching);let cleantalkModal={loaded:!1,loading:!1,opened:!1,opening:!1,ignoreURLConvert:!1,load:function(e){var t;this.loaded||(this.loading=!0,t=function(e,t,o,c){cleantalkModal.loading=!1,cleantalkModal.loaded=e,document.dispatchEvent(new CustomEvent("cleantalkModalContentLoaded",{bubbles:!0}))},("function"==typeof apbct_admin_sendAJAX?apbct_admin_sendAJAX:apbct_public_sendAJAX)({action:e},{callback:t,notJson:!0}))},open:function(){function e(){let e="";for(var t in this.styles)e+=t+":"+this.styles[t]+";";return e}var t={styles:{"z-index":"9999999999",position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",display:"flex","justify-content":"center","align-items":"center"},toString:e},o={styles:{position:"relative",padding:"30px",background:"#FFF",border:"1px solid rgba(0,0,0,0.75)","border-radius":"4px","box-shadow":"7px 7px 5px 0px rgba(50,50,50,0.75)"},toString:e},c={styles:{position:"absolute",background:"#FFF",width:"20px",height:"20px",border:"2px solid rgba(0,0,0,0.75)","border-radius":"15px",cursor:"pointer",top:"-8px",right:"-8px","box-sizing":"content-box"},toString:e},n={styles:{content:'""',display:"block",position:"absolute",background:"#000","border-radius":"1px",width:"2px",height:"16px",top:"2px",left:"9px",transform:"rotate(45deg)"},toString:e},a={styles:{content:'""',display:"block",position:"absolute",background:"#000","border-radius":"1px",width:"2px",height:"16px",top:"2px",left:"9px",transform:"rotate(-45deg)"},toString:e},i={styles:{overflow:"hidden"},toString:e},r=document.createElement("style"),i=(r.setAttribute("id","cleantalk-modal-styles"),r.innerHTML="body.cleantalk-modal-opened{"+i+"}",r.innerHTML+="#cleantalk-modal-overlay{"+t+"}",r.innerHTML+="#cleantalk-modal-close{"+c+"}",r.innerHTML+="#cleantalk-modal-close:before{"+n+"}",r.innerHTML+="#cleantalk-modal-close:after{"+a+"}",document.body.append(r),document.createElement("div")),t=(i.setAttribute("id","cleantalk-modal-overlay"),document.body.append(i),document.body.classList.add("cleantalk-modal-opened"),document.createElement("div")),c=(t.setAttribute("id","cleantalk-modal-inner"),t.setAttribute("style",o),i.append(t),document.createElement("div")),n=(c.setAttribute("id","cleantalk-modal-close"),t.append(c),document.createElement("div"));this.loaded?(a=/(https?:\/\/[^\s]+)/g,/.*\/inc/g.test(this.loaded)||this.ignoreURLConvert?n.innerHTML=this.loaded:n.innerHTML=this.loaded.replace(a,'<a href="$1" target="_blank">$1</a>')):(n.innerHTML="Loading...",this.load("get_options_template")),n.setAttribute("id","cleantalk-modal-content"),t.append(n),this.opened=!0},close:function(){document.body.classList.remove("cleantalk-modal-opened"),document.getElementById("cleantalk-modal-overlay").remove(),document.getElementById("cleantalk-modal-styles").remove(),document.dispatchEvent(new CustomEvent("cleantalkModalClosed",{bubbles:!0}))}};function closeAllPopupTRP(){var e=document.querySelectorAll(".apbct-real-user-popup.visible");0<e.length&&e.forEach(e=>{e.classList.remove("visible")})}function ctProtectExternal(){for(let e=0;e<document.forms.length;e++)if(void 0===document.forms[e].cleantalk_hidden_action&&void 0===document.forms[e].cleantalk_hidden_method){var t,o=document.forms[e];if(!formIsExclusion(o))if(isIntegratedForm(o))apbctProcessExternalForm(o,e,document);else if(void 0!==o.dataset.mailingListId||"string"==typeof o.action&&-1!==o.action.indexOf("webto.salesforce.com")||"string"==typeof o.action&&o.querySelector('[href*="activecampaign"]')||"string"==typeof o.action&&-1!==o.action.indexOf("hsforms.com")&&o.getAttribute("data-hs-cf-bound"))apbctProcessExternalFormByFakeButton(o,e,document);else if("string"==typeof o.action&&(-1!==o.action.indexOf("http://")||-1!==o.action.indexOf("https://"))){let e=o.action.split("//");(e=e[1].split("/"))[0].toLowerCase()!==location.hostname.toLowerCase()&&((t=document.createElement("input")).name="cleantalk_hidden_action",t.value=o.action,t.type="hidden",o.appendChild(t),(t=document.createElement("input")).name="cleantalk_hidden_method",t.value=o.method,t.type="hidden",o.method="POST",o.appendChild(t),o.action=document.location)}}apbctProcessIframes(),ctStartFieldsListening()}function formIsExclusion(c){let n=!1;try{c.parentElement&&0<c.parentElement.classList.length&&-1!==c.parentElement.classList[0].indexOf("mewtwo")&&(n=!0),null!==c.getAttribute("action")&&["paypal.com/cgi-bin/webscr"].forEach(function(e){-1!==c.getAttribute("action").indexOf(e)&&(n=!0)}),["give-form","frmCalc","ihf-contact-request-form","wpforms"].forEach(function(e){var t=c.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(n=!0)}),["search-form","hs-form","ihc-form-create-edit","nf-form-content","elementor-form","wpforms","et_pb_searchform"].forEach(function(e){let t="";var o=t=c.getAttribute("class")?c.getAttribute("class"):apbctGetFormClass(c,e);null!=o&&-1!==o.indexOf(e)&&(n=!c.getAttribute("data-hs-cf-bound"))}),["search"].forEach(function(e){var t=c.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(n=!0)})}catch(e){console.table("APBCT ERROR: formIsExclusion() - ",e)}return n}function apbctGetFormClass(e,t){if("object"==typeof e&&e.querySelector("."+t))return t}function apbctProcessIframes(){var o=document.getElementsByTagName("iframe");if(0<o.length)for(let t=0;t<o.length;t++)if(null!=o[t].contentDocument){var c=o[t].contentDocument.forms;if(0!==c.length)for(let e=0;e<c.length;e++){var n=c[e];formIsExclusion(n)||apbctProcessExternalForm(n,e,o[t].contentDocument)}}}function apbctProcessExternalForm(e,t,o){var c=document.createElement("i"),c=(c.className="cleantalk_placeholder",c.style="display: none",e.parentElement.insertBefore(c,e),e.previousSibling),n=e.outerHTML,a=e,e=(e.parentElement.removeChild(e),document.createElement("div")),n=(e.innerHTML=n,c.after(e.firstElementChild),document.createElement("input"));n.name="action",n.value="cleantalk_force_ajax_check",n.type="hidden";let i=o.forms[t],r=(i.appendChild(n),i.apbctPrev=c,i.apbctFormOriginal=a,!1);void 0!==i.classList&&["newsletterform","ml-block-form"].forEach(function(e){i.classList.contains(e)&&(r=e)});e=null;r?null!=(e=i.querySelector('button[type="submit"]'))&&e.addEventListener("click",function(e){e.preventDefault(),sendAjaxCheckingFormData(i)}):o.forms[t].onsubmit=function(e){e.preventDefault(),sendAjaxCheckingFormData(e.currentTarget)}}function apbctProcessExternalFormByFakeButton(e,t,o){var c,n,a,i=e.querySelector('[type="submit"]'),e=e.querySelector('[type="submit"]').form.onsubmit;i&&(c=i.parentElement,n=i.outerHTML,i.remove(),(a=document.createElement("div")).innerHTML=n,c.appendChild(a.firstElementChild),(n=document.createElement("input")).name="action",n.value="cleantalk_force_ajax_check",n.type="hidden",(a=o.forms[t]).appendChild(n),a.apbctParent=c,a.submitButtonOriginal=i,a.onsubmitOriginal=e,o.forms[t].onsubmit=function(e){e.preventDefault(),apbctMoosendSpinnerToggle(e.currentTarget),sendAjaxCheckingFormData(e.currentTarget)})}function apbctMoosendSpinnerToggle(e){var t,e=e.querySelector('button[type="submit"]');e&&(t=e.querySelector("i"),e=e.querySelector("span"),t)&&e&&(1==t.style.zIndex?(e.style.opacity=1,t.style.zIndex=-1,t.style.opacity=0):(e.style.opacity=0,t.style.zIndex=1,t.style.opacity=1))}function apbctReplaceInputsValuesFromOtherForm(e,t){var o=e.querySelectorAll("button, input, textarea, select");let c=t.querySelectorAll("button, input, textarea, select");-1!==e.outerHTML.indexOf('action="https://www.kulahub.net')||isFormHasDiviRedirect(e)||-1!==e.outerHTML.indexOf('class="et_pb_contact_form')||-1!==e.outerHTML.indexOf('action="https://api.kit.com')||-1!==e.outerHTML.indexOf("activehosted.com")||-1!==e.outerHTML.indexOf('action="https://crm.zoho.com')?o.forEach(t=>{c.forEach(e=>{t.name===e.name&&("checkbox"===e.type||"radio"===e.type?e.checked=apbctVal(t):e.value=apbctVal(t))})}):o.forEach(t=>{c.forEach(e=>{t.outerHTML===e.outerHTML&&("checkbox"===e.type||"radio"===e.type?e.checked=apbctVal(t):e.value=apbctVal(t))})})}document.addEventListener("click",function(e){!e.target||"cleantalk-modal-overlay"!==e.target.id&&"cleantalk-modal-close"!==e.target.id||cleantalkModal.close()}),document.addEventListener("cleantalkModalContentLoaded",function(e){cleantalkModal.opened&&cleantalkModal.loaded&&(document.getElementById("cleantalk-modal-content").innerHTML=cleantalkModal.loaded)}),document.addEventListener("DOMContentLoaded",function(){let s=void 0,d=!1;if("undefined"==typeof ctPublic&&"undefined"==typeof ctTrpAdminLocalize||void 0===(s="undefined"!=typeof ctPublic&&ctPublic.theRealPerson?ctPublic.theRealPerson:s)&&"undefined"!=typeof ctTrpAdminLocalize&&ctTrpAdminLocalize.theRealPerson&&(s=ctTrpAdminLocalize.theRealPerson,d=!0),s){let e='.apbct-trp *[class*="comment-author"]';document.querySelector(".apbct-trp .comment-author .comment-author-link")&&(e='.apbct-trp *[class*="comment-author-link"]');var t=document.querySelectorAll(e+',.apbct-trp *[class*="review__author"],.apbct-trp td[class*="column-author"] > strong');0!==t.length&&(t.forEach((e,t)=>{var o,c,n,a,i,r,l;"undefined"==typeof pagenow&&e.parentElement.className.indexOf("group")<0&&"DIV"!=e.tagName||((o=document.createElement("div")).setAttribute("class","apbct-real-user-badge"),(c=document.createElement("img")).setAttribute("src",s.imgPersonUrl),c.setAttribute("class","apbct-real-user-popup-img"),(n=document.createElement("div")).setAttribute("class","apbct-real-user-popup"),(a=document.createElement("p")).setAttribute("class","apbct-real-user-popup-header"),a.append(s.phrases.trpHeading),(i=document.createElement("div")).setAttribute("class","apbct-real-user-popup-content_row"),(r=document.createElement("span")).append(s.phrases.trpContent1+" "),r.append(s.phrases.trpContent2),d&&((l=document.createElement("a")).setAttribute("href",s.trpContentLink),l.setAttribute("target","_blank"),l.text=s.phrases.trpContentLearnMore,r.append(" "),r.append(l)),i.append(r),n.append(a,i),o.append(c),e.append(o),e.append(n))}),document.querySelectorAll(".apbct-real-user-badge").forEach(o=>{let c=void 0,e=(this.body.addEventListener("click",function(e){-1==e.target.className.indexOf("apbct-real-user")&&-1==e.target.parentElement.className.indexOf("apbct-real-user")&&closeAllPopupTRP()}),o.addEventListener("click",function(){var e=this.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.toggle("visible")}),o.addEventListener("mouseenter",function(){closeAllPopupTRP();var e=this.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.add("visible")}),o.addEventListener("mouseleave",function(){c=setTimeout(()=>{var e=this.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},1e3)}),o.nextElementSibling);e.addEventListener("mouseenter",function(){clearTimeout(c),e.classList.add("visible")}),e.addEventListener("mouseleave",function(){c=setTimeout(()=>{e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},1e3)}),o.addEventListener("touchend",function(){c=setTimeout(()=>{var e=this.nextElementSibling,t=window.getSelection();e&&t&&e.classList.contains("apbct-real-user-popup")&&0===t.toString().length?e.classList.remove("visible"):(clearTimeout(c),document.addEventListener("selectionchange",function e(){var t=window.getSelection();t&&0===t.toString().length&&(c=setTimeout(()=>{var e=o.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},3e3),document.removeEventListener("selectionchange",e))}))},3e3)})}))}}),ctProtectOutsideFunctionalClearLocalStorage(),window.addEventListener("load",function(){+ctPublic.settings__forms__check_external&&(setTimeout(function(){ctProtectExternal(),catchDynamicRenderedForm(),catchNextendSocialLoginForm(),ctProtectOutsideFunctionalOnTagsType("div"),ctProtectOutsideFunctionalOnTagsType("iframe")},2e3),ctProtectKlaviyoForm())});let ctProtectOutsideFunctionalCheckPerformed;function ctProtectOutsideFunctionalOnTagsType(e){e=document.querySelectorAll(e);0<e.length&&e.forEach(function(e){var t,o=ctProtectOutsideFunctionalIsTagIntegrated(e);!1!==o&&(o="apbct_outside_functional_protected_tags__"+o,!1===(t=!1===(t=""!==e.id&&e.id)&&""!==e.className?e.className:t)||!1!==apbctLocalStorage.get(o)&&0<apbctLocalStorage.get(o).length&&-1!==apbctLocalStorage.get(o)[0].indexOf(t)||ctProtectOutsideFunctionalHandler(e,o,t))})}function ctProtectOutsideFunctionalIsTagIntegrated(e){if(void 0!==e.tagName){if("IFRAME"===e.tagName&&(-1!==e.src.indexOf("form.typeform.com")||-1!==e.src.indexOf("forms.zohopublic.com")||-1!==e.src.indexOf("link.surepathconnect.com")||-1!==e.src.indexOf("hello.dubsado.com")||e.classList.contains("hs-form-iframe")||-1!==e.src.indexOf("facebook.com")&&-1!==e.src.indexOf("plugins/comments.php")||-1!==e.id.indexOf("chatway_widget_app")))return e.tagName;if("DIV"===e.tagName&&(-1!==e.className.indexOf("Window__Content-sc")||-1!==e.className.indexOf("WidgetBackground__Content-sc")))return e.tagName}return!1}function ctProtectOutsideFunctionalHandler(t,o,c){let n=null;if(void 0!==t.parentNode){null!=(n=t.parentNode).style&&void 0!==n.style.position?n.style.position=null:n.style.position="relative",n.appendChild(ctProtectOutsideFunctionalGenerateCover());let e=apbctLocalStorage.get(o);!1===e&&(e=[]),c&&(e.push(c),apbctLocalStorage.set(o,e))}}function ctProtectOutsideFunctionalClearLocalStorage(){apbctLocalStorage.set("apbct_outside_functional_protected_tags__DIV",[]),apbctLocalStorage.set("apbct_outside_functional_protected_tags__IFRAME",[])}function ctProtectOutsideFunctionalGenerateCover(){var e=document.createElement("div");return e.style.width="100%",e.style.height="100%",e.style.background="black",e.style.opacity=0,e.style.position="absolute",e.style.top=0,e.style.zIndex=9999,e.setAttribute("name","apbct_cover"),e.onclick=function(t){if(void 0===ctProtectOutsideFunctionalCheckPerformed){var t=t.currentTarget,o=(t.style.opacity=.5,document.createElement("div")),c=document.createElement("div"),n=document.createElement("span");o.className="apbct-iframe-preloader",c.className="apbct-iframe-preloader-spin",n.innerText="CleanTalk Anti-Spam checking data..",n.className="apbct-iframe-preloader-text",o.appendChild(c),t.appendChild(o),t.appendChild(n);let e=null;e=e||apbctLocalStorage.get("bot_detector_event_token"),apbct_public_sendAJAX({action:"cleantalk_outside_iframe_ajax_check",ct_no_cookie_hidden_field:getNoCookieData(),ct_bot_detector_event_token:e},{async:!1,callback:function(e){let t=!(ctProtectOutsideFunctionalCheckPerformed=!0),o=("object"!=typeof e&&(console.warn("APBCT outside functional check error, skip check."),t=!0),"Blocked by CleanTalk Anti-Spam");void 0!==e&&void 0!==e.apbct&&void 0!==e.apbct.comment&&(o=e.apbct.comment),"object"==typeof e&&void 0!==e.apbct&&!1===e.apbct.blocked||"object"==typeof e&&void 0!==e.success&&!0===e.success||t?document.querySelectorAll('div[name="apbct_cover"]').forEach(function(e){e.remove()}):(document.querySelectorAll(".apbct-iframe-preloader-text").forEach(e=>{e.innerText=o}),document.querySelectorAll("div.apbct-iframe-preloader").forEach(e=>{e.remove()}))}})}},e}function ctProtectKlaviyoForm(){if(document.querySelector('link[rel="dns-prefetch"][href="//static.klaviyo.com"]')){let t=setInterval(()=>{var e=document.querySelectorAll("form.klaviyo-form");e.length&&(clearInterval(t),e.forEach((e,t)=>{apbctProcessExternalFormKlaviyo(e,t,document)}))},500)}}function apbctProcessExternalFormKlaviyo(t,e,o){var c,n=t.querySelector('button[type="button"].needsclick');n&&(n.disabled=!0,(c=document.createElement("input")).name="action",c.value="cleantalk_force_ajax_check",c.type="hidden",t.appendChild(c),(c=document.createElement("div")).id="apbct-klaviyo-cover",c.style.width="100%",c.style.height="100%",c.style.background="black",c.style.opacity=0,c.style.position="absolute",c.style.top=0,c.style.cursor="pointer",c.onclick=function(e){sendAjaxCheckingFormData(t)},n.parentNode.style.position="relative",n.parentNode.appendChild(c))}function catchNextendSocialLoginForm(){var e=document.getElementById("nsl-custom-login-form-main");e&&blockBtnNextendSocialLogin(e)}function blockBtnNextendSocialLogin(e){var t=e.querySelectorAll(".nsl-container-buttons a"),e=e.querySelectorAll('a[data-plugin="nsl"] .nsl-button');t.forEach(e=>{e.setAttribute("data-oauth-login-blocked","true"),e.addEventListener("click",e=>{e.preventDefault()})}),e.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),ctCheckAjax(t)})})}function allowAjaxNextendSocialLogin(e){e.parentElement.setAttribute("data-oauth-login-blocked","false"),e.parentElement.click()}function forbiddenAjaxNextendSocialLogin(e,t){var o,e=e.parentElement;"false"==e.getAttribute("data-oauth-login-blocked")&&e.setAttribute("data-oauth-login-blocked","true"),document.querySelector(".ct-forbidden-msg")||((o=document.createElement("div")).className="ct-forbidden-msg",o.style.background="red",o.style.color="white",o.style.padding="5px",o.innerHTML=t,e.insertAdjacentElement("beforebegin",o))}function ctCheckAjax(t){apbct_public_sendAJAX({action:"cleantalk_nsl_ajax_check",ct_no_cookie_hidden_field:document.getElementsByName("ct_no_cookie_hidden_field")[0].value},{async:!1,callback:function(e){!1===e.apbct.blocked?allowAjaxNextendSocialLogin(t):forbiddenAjaxNextendSocialLogin(t,e.apbct.comment)}})}function isIntegratedForm(e){var t="string"==typeof e.action?e.action:"",o=null!==e.getAttribute("id")?e.getAttribute("id"):"",c="string"==typeof e.className?e.className:"";return!!(-1!==t.indexOf("app.convertkit.com")||-1!==t.indexOf("app.kit.com")||-1!==t.indexOf("api.kit.com")||void 0!==e.firstChild.classList&&e.firstChild.classList.contains("cb-form-group")||-1!==t.indexOf("mailerlite.com")||-1!==t.indexOf("colcolmail.co.uk")||-1!==t.indexOf("paypal.com")||-1!==t.indexOf("infusionsoft.com")||-1!==t.indexOf("secure2.convio.net")||-1!==t.indexOf("hookb.in")||-1!==t.indexOf("external.url")||-1!==t.indexOf("tp.media")||-1!==t.indexOf("flodesk.com")||-1!==t.indexOf("sendfox.com")||-1!==t.indexOf("aweber.com")||-1!==t.indexOf("secure.payu.com")||-1!==t.indexOf("mautic")||-1!==o.indexOf("mauticform_")||-1!==o.indexOf("ihf-contact-request-form")||-1!==t.indexOf("crm.zoho.com")||-1!==o.indexOf("delivra-external-form")||-1!==t.indexOf("eloqua.com")||-1!==t.indexOf("kulahub.net")||isFormHasDiviRedirect(e)||-1!==t.indexOf("eocampaign1.com")||-1!==t.indexOf("wufoo.com")||-1!==t.indexOf("activehosted.com")||-1!==t.indexOf("publisher.copernica.com")||-1!==t.indexOf("whatsapp.com")&&-1!==c.indexOf("chaty")||void 0!==e.classList&&e.classList.contains("sp-element-container")||apbctIsFormInDiv(e,"b24-form")||-1!==t.indexOf("list-manage.com"))}function isFormHasDiviRedirect(e){let t=!1;var o=document.querySelector('div[id^="et_pb_contact_form"]');return t="object"==typeof e&&null!==e&&null!==o&&o.hasAttribute("data-redirect_url")&&""!==o.getAttribute("data-redirect_url")&&null!==o.querySelector('form[class^="et_pb_contact_form"]')?e===o.querySelector('form[class^="et_pb_contact_form"]'):t}function sendAjaxCheckingFormData(_){var e={};e[0]=apbct_collect_visible_fields(_),apbct_visible_fields_set_cookie(e);let o={ct_bot_detector_event_token:apbctLocalStorage.get("bot_detector_event_token")};e=_.elements;(e=Array.prototype.slice.call(e)).forEach(function(e,t){""===e.name?o["input_"+t]=e.value:o[e.name]=e.value}),apbct_public_sendAJAX(o,{async:!1,callback:function(e,t,o,c){apbctMoosendSpinnerToggle(_);var n=_.hasAttribute("action")&&-1!==_.getAttribute("action").indexOf("hsforms");if(void 0===e.apbct&&void 0===e.data||void 0!==e.apbct&&!+e.apbct.blocked){for(var a of _.querySelectorAll('input[name="apbct_visible_fields"]'))a.remove();for(var i of _.querySelectorAll('input[value="cleantalk_force_ajax_check"]'))i.remove();for(var r of _.querySelectorAll('input[name="ct_no_cookie_hidden_field"]'))r.remove();if(void 0!==_.classList&&_.classList.contains("klaviyo-form"))return(d=document.getElementById("apbct-klaviyo-cover"))&&d.remove(),void((d=_.querySelector('button[type="button"].needsclick'))&&(d.disabled=!1,d.click()));if(void 0!==_.dataset.mailingListId){let e=_.querySelector('[type="submit"]');return e.remove(),_.apbctParent.appendChild(_.submitButtonOriginal),void(e=_.querySelector('[type="submit"]')).click()}if(_.hasAttribute("action")&&-1!==_.getAttribute("action").indexOf("webto.salesforce.com")){let e=_.querySelector('[type="submit"]');return e.remove(),_.apbctParent.appendChild(_.submitButtonOriginal),_.onsubmit=_.onsubmitOriginal,void(e=_.querySelector('[type="submit"]')).click()}if(n){let e=_.querySelector('[type="submit"]');return e.remove(),_.apbctParent.appendChild(_.submitButtonOriginal),_.onsubmit=_.onsubmitOriginal,void(e=_.querySelector('[type="submit"]')).click()}var l,s,d=_,u=(_.parentElement.removeChild(_),_.apbctPrev),p=_.apbctFormOriginal;let e=!1;apbctReplaceInputsValuesFromOtherForm(d,p),p&&"string"==typeof p.id&&-1!==p.id.indexOf("mautic")&&(e=!0),u.after(p);for(l of p.querySelectorAll('input[name="apbct_visible_fields"]'))l.remove();for(s of p.querySelectorAll('input[value="cleantalk_force_ajax_check"]'))s.remove();let t=p.querySelectorAll("button[type=submit]");if(0!==t.length)return t[0].click(),void(e&&setTimeout(function(){ctProtectExternal()},1500));if(0!==(t=p.querySelectorAll("input[type=submit]")).length)return void t[0].click();if(0!==(t=p.querySelectorAll('button[data-element="submit"]')).length)return void t[0].click();if(0!==(t=p.querySelectorAll("button#ck_subscribe_button")).length)return void t[0].click();0!==(t=p.querySelectorAll('input[type="image"][name="submit"]')).length&&t[0].click()}(void 0!==e.apbct&&+e.apbct.blocked||void 0!==e.data&&void 0!==e.data.message)&&(ctParseBlockMessage(e),n)&&setTimeout(function(){document.location.reload()},3e3)}})}function catchDynamicRenderedForm(){catchDynamicRenderedFormHandler(document.getElementsByTagName("form"));var t=document.getElementsByTagName("iframe");if(0<t.length)for(let e=0;e<t.length;e++)if(null!=t[e].contentDocument){var o=t[e].contentDocument.forms;if(0===o.length)return;catchDynamicRenderedFormHandler(o,t[e].contentDocument)}}function catchDynamicRenderedFormHandler(e,t=document){var o,c,n=[];for(o of e){var a=o.getAttribute("id");a&&-1!==a.indexOf("hsForm")&&n.push(a),a&&-1!==a.indexOf("createuser")&&void 0!==o.classList&&o.classList.contains("ihc-form-create-edit")&&n.push(a)}for(c of n){var i=t.getElementById(c);i.apbct_external_onsubmit_prev=i.onsubmit,i.onsubmit=sendAjaxCheckingDynamicFormData}}function sendAjaxCheckingDynamicFormData(a){a.preventDefault(),a.stopImmediatePropagation();let i=a;a=a.target;var e=document.createElement("input"),e=(e.name="action",e.value="cleantalk_force_ajax_check",e.type="hidden",a.appendChild(e),{});e[0]=apbct_collect_visible_fields(a),apbct_visible_fields_set_cookie(e),a.append(ctNoCookieConstructHiddenField("hidden"));let o={};e=a.elements;(e=Array.prototype.slice.call(e)).forEach(function(e,t){""===e.name?o["input_"+t]=e.value:o[e.name]=e.value}),apbct_public_sendAJAX(o,{async:!1,callback:function(e){if(void 0===e.apbct||!+e.apbct.blocked){a.onsubmit=null;for(var t of a.querySelectorAll('input[name="apbct_visible_fields"]'))t.remove();for(var o of a.querySelectorAll('input[value="cleantalk_force_ajax_check"]'))o.remove();for(var c of a.querySelectorAll('input[name="ct_no_cookie_hidden_field"]'))c.remove();a.apbct_external_onsubmit_prev instanceof Function&&(n=setTimeout(function(){a.apbct_external_onsubmit_prev.call(a,i)},500),clearTimeout(n));var n=a.querySelector('input[type="submit"]');if(n)return void n.click()}void 0!==e.apbct&&+e.apbct.blocked&&ctParseBlockMessage(e)}})}function apbctVal(e){return e.options&&e.multiple?e.options.filter(e=>e.selected).map(e=>e.value):"checkbox"===e.type||"radio"===e.type?e.checked||null:e.value}function apbctIsFormInDiv(e,t){let o=e.parentElement;for(;o;){if(o.classList.contains(t))return!0;o=o.parentElement}return!1}
=======
class ApbctCore{ajax_parameters={};restParameters={};selector=null;elements=[];eventCallback;eventSelector;event;constructor(e){this.select(e)}select(e){return e instanceof HTMLCollection?(this.selector=null,this.elements=[],this.elements=Array.prototype.slice.call(e)):"object"==typeof e?(this.selector=null,this.elements=[],this.elements[0]=e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect(),this}addElement(e){"object"==typeof e?this.elements.push(e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect()}push(e){this.elements.push(e)}reduce(){this.elements=this.elements.slice(0,-1)}deselect(){this.elements=[]}css(o,t){if(t=t||!1,"object"==typeof o){for(let t in o)if(Object.hasOwn(o,t)){var c=t.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace("-","").replace("_",""));for(let e=0;e<this.elements.length;e++)this.elements[e].style[c]=o[t]}return this}if("string"==typeof o){let e=getComputedStyle(this.elements[0])[o];return void 0===e||t?e:(e=e.replace(/(\d)(em|pt|%|px){1,2}$/,"$1"),e=Number(e)==e?Number(e):e)}}hide(){this.prop("prev-display",this.css("display")),this.css({display:"none"})}show(){this.css({display:this.prop("prev-display")})}addClass(){for(let e=0;e<this.elements.length;e++)this.elements[e].classList.add(className)}removeClass(){for(let e=0;e<this.elements.length;e++)this.elements[e].classList.remove(className)}toggleClass(t){for(let e=0;e<this.elements.length;e++)this.elements[e].classList.toggle(t)}ajax(e){return this.ajax_parameters=e,new ApbctAjax(e)}rest(e){return this.restParameters=e,new ApbctRest(e)}on(...e){this.event=e[0],this.eventCallback=e[2]||e[1],this.eventSelector="string"==typeof e[1]?e[1]:null;for(let e=0;e<this.elements.length;e++)this.elements[e].addEventListener(this.event,null!==this.eventSelector?this.onChecker.bind(this):this.eventCallback)}onChecker(e){if(e.target===document.querySelector(this.eventSelector))return e.stopPropagation(),this.eventCallback(e)}ready(e){document.addEventListener("DOMContentLoaded",e)}change(e){this.on("change",e)}attr(t){var o=[];for(let e=0;e<this.elements.length;e++)void 0!==this.elements[e][t]?o.push(this.elements[e][t]):o.push(this.elements[e].getAttribute(t));return 1===o.length?o[0]:o}prop(t,o){if(void 0!==o){for(let e=0;e<this.elements.length;e++)this.elements[e][t]=o;return this}var c=[];for(let e=0;e<this.elements.length;e++)c.push(this.elements[e][t]);return 1===c.length?c[0]:c}html(e){return void 0!==e?this.prop("innerHTML",e):this.prop("innerHTML")}val(e){return void 0!==e?this.prop("value",e):this.prop("value")}data(e,t){return void 0!==t?this.prop("apbct-data",e,t):this.prop("apbct-data")}is(e){let t=!1;for(var o of this.elements)t||=this.isElem(o,e);return t}isElem(e,t){let o=!1;return"function"==typeof t&&(o||=t.call(this,e)),"string"==typeof t&&(t.match(/^[a-z]/)&&(e=>(e=document.createElement(e).constructor,!Boolean(~[HTMLElement,HTMLUnknownElement].indexOf(e))))(t)?o||=e.tagName.toLowerCase()===t.toLowerCase():t.match(/^[a-z]/)?o||=Boolean(e[t]):o||=null!==this.selector?null!==document.querySelector(this.selector+t):this.isWithoutSelector(e,t)),o}isWithoutSelector(e,t){var o;let c=!1;for(o of document.querySelectorAll(t))c||=e===o;return c}filter(t){this.selector=null;for(let e=this.elements.length-1;0<=e;e--)this.isElem(this.elements[e],t)||this.elements.splice(Number(e),1);return this}parent(e){return this.select(this.elements[0].parentElement),void 0===e||this.is(e)||this.deselect(),this}parents(e){for(this.select(this.elements[0]);null!==this.elements[this.elements.length-1].parentElement;)this.push(this.elements[this.elements.length-1].parentElement);return this.elements.splice(0,1),void 0!==e&&this.filter(e),this}children(e){return this.select(this.elements[0].children),void 0!==e&&this.filter(e),this}siblings(e){var t=this.elements[0];return this.parent(),this.children(e),this.elements.splice(this.elements.indexOf(t),1),this}remove(){for(var e of this.elements)e.remove()}after(e){for(var t of this.elements)t.after(e)}append(e){for(var t of this.elements)t.append(e)}fadeIn(c){for(let o of this.elements){o.style.opacity=0,o.style.display="block";let e=+new Date,t=function(){o.style.opacity=+o.style.opacity+(new Date-e)/c,e=+new Date,+o.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(t)||setTimeout(t,16))};t()}}fadeOut(c){for(let o of this.elements){o.style.opacity=1;let e=+new Date,t=function(){o.style.opacity=+o.style.opacity-(new Date-e)/c,e=+new Date,0<+o.style.opacity?window.requestAnimationFrame&&requestAnimationFrame(t)||setTimeout(t,16):o.style.display="none"};t()}}}function ctProcessError(e,t){var o={},e=(e&&e.message?o.err={msg:e.message,file:e.fileName||!1,ln:e.lineNumber||lineNo||!1,col:e.columnNumber||columnNo||!1,stacktrace:e.stack||!1,cause:!!t&&JSON.stringify(t),errorObj:error||!1}:(o.err={msg:e},t&&(o.err.file=t)),o.url=window.location.href,o.userAgent=window.navigator.userAgent,"ct_js_errors");let c=localStorage.getItem(e);null===c&&(c="[]"),c=JSON.parse(c);for(let e=0;e<c.length;e++)if(c[e].err.msg===o.err.msg)return;c.push(o),localStorage.setItem(e,JSON.stringify(c))}function selectActualNonce(){let e="";return ctPublicFunctions.hasOwnProperty("_fresh_nonce")&&"string"==typeof ctPublicFunctions._fresh_nonce&&0<ctPublicFunctions._fresh_nonce.length?ctPublicFunctions._fresh_nonce:("admin_ajax"===ctPublicFunctions.data__ajax_type&&ctPublicFunctions.hasOwnProperty("_ajax_nonce")&&"string"==typeof ctPublicFunctions._ajax_nonce&&0<ctPublicFunctions._ajax_nonce.length&&(e=ctPublicFunctions._ajax_nonce),e="rest"===ctPublicFunctions.data__ajax_type&&ctPublicFunctions.hasOwnProperty("_rest_nonce")&&"string"==typeof ctPublicFunctions._rest_nonce&&0<ctPublicFunctions._rest_nonce.length?ctPublicFunctions._rest_nonce:e)}function apbct(e){return(new ApbctCore).select(e)}1===Math.floor(100*Math.random())&&(window.onerror=function(e,t){var o=["apbct","ctPublic"];let c=o.length;for(;c--;)-1!==e.indexOf(o[c])&&ctProcessError(e,t);return!1});class ApbctXhr{xhr=new XMLHttpRequest;method="POST";url="";async=!0;user=null;password=null;data={};button=null;spinner=null;progressbar=null;context=this;callback=null;onErrorCallback=null;responseType="json";headers={};timeout=15e3;methods_to_convert_data_to_URL=["GET","HEAD"];body=null;http_code=0;status_text="";constructor(e){for(var t in e)void 0!==this[t]&&(this[t]=e[t]);if(this.prepare(),Object.keys(this.data).length&&(this.deleteDoubleJSONEncoding(this.data),this.convertData()),!this.url)return console.log("%cXHR%c not URL provided","color: red; font-weight: bold;","color: grey; font-weight: normal;"),!1;this.xhr.open(this.method,this.url,this.async,this.user,this.password),this.setHeaders(),this.xhr.responseType=this.responseType,this.xhr.timeout=this.timeout,this.xhr.onreadystatechange=function(){this.isWpNonceError()?this.getFreshNonceAndRerunXHR(e):this.onReadyStateChange()}.bind(this),this.xhr.onload=function(){this.onLoad()}.bind(this),this.xhr.onprogress=function(e){this.onProgress(e)}.bind(this),this.xhr.onerror=function(){this.onError()}.bind(this),this.xhr.ontimeout=function(){this.onTimeout()}.bind(this),this.xhr.send(this.body)}prepare(){this.button&&(this.button.setAttribute("disabled","disabled"),this.button.style.cursor="not-allowed"),this.spinner&&(this.spinner.style.display="inline")}complete(){this.http_code=this.xhr.status,this.status_text=this.xhr.statusText,this.button&&(this.button.removeAttribute("disabled"),this.button.style.cursor="auto"),this.spinner&&(this.spinner.style.display="none"),this.progressbar&&this.progressbar.fadeOut("slow")}onReadyStateChange(){null!==this.on_ready_state_change&&"function"==typeof this.on_ready_state_change&&this.on_ready_state_change()}onProgress(e){null!==this.on_progress&&"function"==typeof this.on_progress&&this.on_progress()}onError(){console.log("error"),this.complete(),this.error(this.http_code,this.status_text),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback(this.status_text)}onTimeout(){this.complete(),this.error(0,"timeout"),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback("Timeout")}onLoad(){if(this.complete(),"json"===this.responseType){if(null===this.xhr.response)return this.error(this.http_code,this.status_text,"No response"),!1;if(void 0!==this.xhr.response.error)return this.error(this.http_code,this.status_text,this.xhr.response.error),!1}null!==this.callback&&"function"==typeof this.callback&&this.callback.call(this.context,this.xhr.response,this.data)}isWpNonceError(){let e=!1,t=!1;return 4==this.xhr.readyState&&(e="object"==typeof this.xhr.response&&null!==this.xhr.response&&this.xhr.response.hasOwnProperty("data")&&this.xhr.response.data.hasOwnProperty("status")&&403===this.xhr.response.data.status,t="-1"===this.xhr.response&&403===this.xhr.status),e||t}getFreshNonceAndRerunXHR(e){let t="";var o;e.hasOwnProperty("headers")&&e.headers.hasOwnProperty("X-WP-Nonce")&&(t=e.headers["X-WP-Nonce"]),""!==(t=e.hasOwnProperty("data")&&e.data.hasOwnProperty("_ajax_nonce")?e.data._ajax_nonce:t)&&((o={method:"POST"}).data={spbc_remote_call_action:"get_fresh_wpnonce",plugin_name:"antispam",nonce_prev:t,initial_request_params:e},o.notJson=!0,o.url=ctPublicFunctions.host_url,o.callback=function(...e){var t=e[0];let o=!1;(o=void 0!==e[1]&&e[1].hasOwnProperty("initial_request_params")?e[1].initial_request_params:o)&&t.hasOwnProperty("wpnonce")&&(ctPublicFunctions._fresh_nonce=t.wpnonce,"rest"===ctPublicFunctions.data__ajax_type?(new ApbctCore).rest(o):(new ApbctCore).ajax(o))},new ApbctXhr(o))}error(e,t,o){let c="";"timeout"===t?c+="Server response timeout":200===e?"parsererror"===t?c+="Unexpected response from server. See console for details.":(c+="Unexpected error. Status: "+t+".",void 0!==o&&(c+=" Additional error info: "+o)):c+=500===e?"Internal server error.":"Unexpected response code:"+e,this.errorOutput(c),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback(this.status_text)}errorOutput(e){console.log("%c ctXHR error: %c"+e,"color: red;","color: grey;")}setHeaders(){for(var e in this.headers)void 0!==this.headers[e]&&this.xhr.setRequestHeader(e,this.headers[e])}convertData(){return~this.methods_to_convert_data_to_URL.indexOf(this.method)?this.convertDataToURL():this.convertDataToBody()}convertDataToURL(){var e=new URLSearchParams(this.data).toString(),t=this.url.match(/^(https?:\/{2})?[a-z0-9.]+\?/)?"&":"?";return this.url+=t+e,this.url}convertDataToBody(){for(var e in this.body=new FormData,this.data)Object.hasOwn(this.data,e)&&this.body.append(e,"object"==typeof this.data[e]?JSON.stringify(this.data[e]):this.data[e]);return this.body}deleteDoubleJSONEncoding(e){if("object"==typeof e)for(var t in e){var o;Object.hasOwn(e,t)&&("object"==typeof e[t]&&(e[t]=this.deleteDoubleJSONEncoding(e[t])),"string"==typeof e[t])&&null!==e[t].match(/^[\[{].*?[\]}]$/)&&"object"==typeof(o=JSON.parse(e[t]))&&(e[t]=o)}return e}}class ApbctAjax extends ApbctXhr{constructor(...e){(e=e[0]).data._ajax_nonce=selectActualNonce(),super(e)}}class ApbctRest extends ApbctXhr{static default_route=ctPublicFunctions._rest_url+"cleantalk-antispam/v1/";route="";constructor(...e){e=e[0];var t=selectActualNonce();e.url=ApbctRest.default_route+e.route,e.headers={"X-WP-Nonce":t},super(e)}}Object.prototype.hasOwn||Object.defineProperty(Object.prototype,"hasOwn",{value:function(e){return Object.prototype.hasOwnProperty.call(this,e)},enumerable:!1,configurable:!0,writable:!0});class ApbctCollectingUserActivity{elementBody=document.querySelector("body");collectionForms=document.forms;constructor(){this.setListeners()}setListeners(){this.elementBody.addEventListener("click",e=>{this.checkElementInForms(e,"addClicks")}),this.elementBody.addEventListener("mouseup",e=>{"Range"==document.getSelection().type.toString()&&this.addSelected()}),this.elementBody.addEventListener("mousemove",e=>{this.checkElementInForms(e,"trackMouseMovement")})}checkElementInForms(t,e){let o;for(let e=0;e<this.collectionForms.length;e++)o=0<t.target.outerHTML.length&&0<this.collectionForms[e].innerHTML.length?this.collectionForms[e].innerHTML.indexOf(t.target.outerHTML):-1;switch(e){case"addClicks":o<0&&this.addClicks();break;case"trackMouseMovement":-1<o&&this.trackMouseMovement()}}addClicks(){document.ctCollectingUserActivityData?document.ctCollectingUserActivityData.clicks?document.ctCollectingUserActivityData.clicks++:document.ctCollectingUserActivityData.clicks=1:document.ctCollectingUserActivityData={clicks:1}}addSelected(){document.ctCollectingUserActivityData?document.ctCollectingUserActivityData.selected?document.ctCollectingUserActivityData.selected++:document.ctCollectingUserActivityData.selected=1:document.ctCollectingUserActivityData={selected:1}}trackMouseMovement(){document.ctCollectingUserActivityData||(document.ctCollectingUserActivityData={}),document.ctCollectingUserActivityData.mouseMovementsInsideForm||(document.ctCollectingUserActivityData.mouseMovementsInsideForm=!1),document.ctCollectingUserActivityData.mouseMovementsInsideForm=!0}}function ctSetCookie(e,t,c){let o=["ct_sfw_pass_key","ct_sfw_passed","wordpress_apbct_antibot","apbct_anticrawler_passed","apbct_bot_detector_exist","apbct_antiflood_passed","apbct_email_encoder_passed"],n=!1;if("string"==typeof e&&(n="ct_pointer_data"===e,"string"!=typeof t&&"number"!=typeof t||(e=[[e,t,c]])),"none"===ctPublicFunctions.data__cookies_type){let t=[];e.forEach(function(e){-1!==o.indexOf(e[0])?t.push(e):apbctLocalStorage.set(e[0],e[1])}),0<t.length&&ctSetAlternativeCookie(t),ctPublic.force_alt_cookies&&!n?ctSetAlternativeCookie(e,{forceAltCookies:!0}):ctNoCookieAttachHiddenFieldsToForms()}else"native"===ctPublicFunctions.data__cookies_type?(ctPublic.force_alt_cookies&&!n&&ctSetAlternativeCookie(e,{forceAltCookies:!0}),e.forEach(function(e){var t=void 0!==e[2]?"expires="+c+"; ":"",o="https:"===location.protocol?"; secure":"";document.cookie=ctPublicFunctions.cookiePrefix+e[0]+"="+encodeURIComponent(e[1])+"; "+t+"path=/; samesite=lax"+o})):"alternative"!==ctPublicFunctions.data__cookies_type||n||ctSetAlternativeCookie(e)}function ctDetectForcedAltCookiesForms(){var e=0<document.querySelectorAll("#tmpl-nf-layout").length,t=0<document.querySelectorAll(".uael-registration-form-wrapper").length,o=0<document.querySelectorAll('script[id*="smart-forms"]').length,c=0<document.querySelectorAll('iframe[name="jetpack_remote_comment"]').length,n=0<document.querySelectorAll(".cwginstock-subscribe-form").length,a=0<document.querySelectorAll('div[id^="user-registration-form"]').length,i=0<document.querySelectorAll('div[class^="et_pb_newsletter_form"]').length,r=0<document.querySelectorAll('div[class^="fluent_booking_app"]').length,l=0<document.querySelectorAll('div[class^="et_bloom_form_container"]').length,s=0<document.querySelectorAll('div[class*="pafe-form"]').length,d=0<document.querySelectorAll('div [class*="otter-form"]').length,u=0<document.querySelectorAll("form .sqbform, .fields_reorder_enabled").length;ctPublic.force_alt_cookies=o||e||c||t||n||a||i||r||s||l||d||u,setTimeout(function(){var e;ctPublic.force_alt_cookies||(e=0<document.querySelectorAll('main[id^="bookingpress_booking_form"]').length,ctPublic.force_alt_cookies=e)},1e3)}function ctSetAlternativeCookie(e,t){"function"==typeof getJavascriptClientData?Array.isArray(e)&&(e=getJavascriptClientData(e)):console.log("APBCT ERROR: getJavascriptClientData() is not loaded");try{e=JSON.parse(e)}catch(e){return void console.log("APBCT ERROR: JSON parse error:"+e)}var o=t&&t.callback||null,c=t&&t.onErrorCallback||null;t&&t.forceAltCookies&&(e.apbct_force_alt_cookies=!0),"rest"===ctPublicFunctions.data__ajax_type?("string"==typeof e.apbct_pixel_url&&-1!==e.apbct_pixel_url.indexOf("%3A")&&(e.apbct_pixel_url=decodeURIComponent(e.apbct_pixel_url)),apbct_public_sendREST("alt_sessions",{method:"POST",data:{cookies:e},callback:o,onErrorCallback:c})):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_alt_session__save__AJAX",cookies:e},{notJson:1,callback:o,onErrorCallback:c,beforeSend:function(e){e.setRequestHeader("X-Robots-Tag","noindex, nofollow")}})}function ctGetCookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function ctDeleteCookie(e){var t;"none"!==ctPublicFunctions.data__cookies_type&&("native"===ctPublicFunctions.data__cookies_type?(t="https:"===location.protocol?"; secure":"",document.cookie=e+'=""; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax'+t):ctPublicFunctions.data__cookies_type)}function apbct_public_sendAJAX(e,t,o){var c=[],o=(c.callback=t.callback||null,c.onErrorCallback=t.onErrorCallback||null,c.callback_context=t.callback_context||null,c.callback_params=t.callback_params||null,c.async=t.async||!0,c.notJson=t.notJson||null,c.responseType=t.notJson?"text":"json",c.timeout=t.timeout||15e3,c.obj=o||null,c.button=t.button||null,c.spinner=t.spinner||null,c.progressbar=t.progressbar||null,c.silent=t.silent||null,c.no_nonce=t.no_nonce||null,c.data=e,c.url=ctPublicFunctions._ajax_url,selectActualNonce());"string"==typeof e?(c.no_nonce||(c.data=c.data+"&_ajax_nonce="+o),c.data=c.data+"&no_cache="+Math.random()):(c.no_nonce||(c.data._ajax_nonce=o),c.data.no_cache=Math.random()),(new ApbctCore).ajax(c)}function apbct_public_sendREST(e,t){var o=[];o.route=e,o.callback=t.callback||null,o.onErrorCallback=t.onErrorCallback||null,o.data=t.data||[],o.method=t.method||"POST",(new ApbctCore).rest(o)}function apbctGenerateUniqueID(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)}let apbctLocalStorage={get:function(t,o){void 0===o&&(o="value");t=localStorage.getItem(t);if(null!==t)try{var c=JSON.parse(t);if(!c.hasOwnProperty(o))return c;try{return JSON.parse(c[o])}catch(e){return c[o].toString()}}catch(e){return t}return!1},set:function(e,t,o=!0){o?(o={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},localStorage.setItem(e,JSON.stringify(o))):localStorage.setItem(e,t)},isAlive:function(e,t){return void 0===t&&(t=86400),this.get(e,"timestamp")+t>Math.floor((new Date).getTime()/1e3)},isSet:function(e){return null!==localStorage.getItem(e)},delete:function(e){localStorage.removeItem(e)},getCleanTalkData:function(){var t={};for(let e=0;e<localStorage.length;e++){var o=localStorage.key(e);-1===o.indexOf("ct_")&&-1===o.indexOf("apbct_")||(t[o.toString()]=apbctLocalStorage.get(o))}return t}},apbctSessionStorage={get:function(t,e){void 0===e&&(e="value");t=sessionStorage.getItem(t);if(null!==t)try{var o=JSON.parse(t);return o.hasOwnProperty(e)?JSON.parse(o[e]):o}catch(e){return t}return!1},set:function(e,t,o=!0){o?(o={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},sessionStorage.setItem(e,JSON.stringify(o))):sessionStorage.setItem(e,t)},isSet:function(e){return null!==sessionStorage.getItem(e)},delete:function(e){sessionStorage.removeItem(e)},getCleanTalkData:function(){var t={};for(let e=0;e<sessionStorage.length;e++){var o=sessionStorage.key(e);-1===o.indexOf("ct_")&&-1===o.indexOf("apbct_")||(t[o.toString()]=apbctSessionStorage.get(o))}return t}};function apbctOnAnimationStart(e){("onautofillstart"===e.animationName?apbctAutocomplete:apbctCancelAutocomplete)(e.target)}function apbctOnInput(e){("insertReplacementText"!==e.inputType&&"data"in e?apbctCancelAutocomplete:apbctAutocomplete)(e.target)}function apbctAutocomplete(e){var t;e.hasAttribute("autocompleted")||(e.setAttribute("autocompleted",""),t=new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!0,detail:null}),e.dispatchEvent(t))||(e.value="")}function apbctCancelAutocomplete(e){e.hasAttribute("autocompleted")&&(e.removeAttribute("autocompleted"),e.dispatchEvent(new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!1,detail:null})))}class ApbctForceProtection{wrappers=[];constructor(){this.wrappers=this.findWrappers(),this.wrappers.length<1||this.checkBot()}findWrappers(){return document.querySelectorAll("div.ct-encoded-form-wrapper")}checkBot(){var e={event_javascript_data:getJavascriptClientData(),post_url:document.location.href,referrer:document.referrer};"rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("force_protection_check_bot",{data:e,method:"POST",callback:e=>this.checkBotCallback(e)}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&(e.action="apbct_force_protection_check_bot",apbct_public_sendAJAX(e,{callback:e=>this.checkBotCallback(e)}))}checkBotCallback(e){if(e.data&&e.data.status&&200!==e.data.status)console.log("ApbctForceProtection connection error occurred"),this.decodeForms();else{if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return console.log("ApbctForceProtection decodeForms error",e),void this.decodeForms()}"object"==typeof e&&e.allow&&1===e.allow?(this.decodeForms(),document.dispatchEvent(new Event("apbctForceProtectionAllowed"))):this.showMessageForBot(e.message)}}decodeForms(){let o;this.wrappers.forEach(e=>{o=e.querySelector("div.ct-encoded-form").dataset.encodedForm;try{var t;o&&"string"==typeof o&&(t=decodeURIComponent(o),e.outerHTML=atob(t))}catch(e){console.log(e)}})}showMessageForBot(t){let o;this.wrappers.forEach(e=>{(o=e.querySelector("div.ct-encoded-form").dataset.encodedForm)&&(e.outerHTML='<div class="ct-encoded-form-forbidden">'+t+"</div>")})}}function apbctForceProtect(){+ctPublic.settings__forms__force_protection&&void 0!==ApbctForceProtection&&new ApbctForceProtection}ctPublic.data__key_is_ok&&("loading"!==document.readyState?apbctForceProtect():apbct_attach_event_handler(document,"DOMContentLoaded",apbctForceProtect));class CTTypoData{fieldData={isAutoFill:!1,isUseBuffer:!1,speedDelta:0,firstKeyTimestamp:0,lastKeyTimestamp:0,lastDelta:0,countOfKey:0};fields=document.querySelectorAll("textarea[name=comment]");data=[];gatheringFields(){Array.prototype.slice.call(this.fields).forEach((e,t)=>{this.data.push(Object.assign({},this.fieldData))})}setListeners(){this.fields.forEach((e,t)=>{e.addEventListener("paste",()=>{this.data[t].isUseBuffer=!0})}),this.fields.forEach((e,t)=>{e.addEventListener("onautocomplete",()=>{this.data[t].isAutoFill=!0})}),this.fields.forEach((e,o)=>{e.addEventListener("input",()=>{this.data[o].countOfKey++;var e,t=+new Date;1===this.data[o].countOfKey?(this.data[o].lastKeyTimestamp=t,this.data[o].firstKeyTimestamp=t):(e=t-this.data[o].lastKeyTimestamp,2===this.data[o].countOfKey?(this.data[o].lastKeyTimestamp=t,this.data[o].lastDelta=e):2<this.data[o].countOfKey&&(this.data[o].speedDelta+=Math.abs(this.data[o].lastDelta-e),this.data[o].lastKeyTimestamp=t,this.data[o].lastDelta=e))})})}}let ctDate=new Date,ctTimeMs=(new Date).getTime(),ctMouseEventTimerFlag=!0,ctMouseData=[],ctMouseDataCounter=0,ctCheckedEmails={},ctCheckedEmailsExist={},ctMouseReadInterval,ctMouseWriteDataInterval,tokenCheckerIntervalId,botDetectorLogLastUpdate=0,botDetectorLogEventTypesCollected=[];function apbct_attach_event_handler(e,t,o){"function"==typeof window.addEventListener?e.addEventListener(t,o):e.attachEvent(t,o)}function apbct_remove_event_handler(e,t,o){"function"==typeof window.removeEventListener?e.removeEventListener(t,o):e.detachEvent(t,o)}let ctFunctionFirstKey=function(e){ctSetCookie("ct_fkp_timestamp",Math.floor((new Date).getTime()/1e3)),ctKeyStopStopListening()},ctFunctionMouseMove=(cronFormsHandler(2e3),ctPublicFunctions.hasOwnProperty("data__bot_detector_enabled")&&1==ctPublicFunctions.data__bot_detector_enabled&&ctPublicFunctions.hasOwnProperty("data__frontend_data_log_enabled")&&1==ctPublicFunctions.data__frontend_data_log_enabled&&sendBotDetectorLogToAltSessions(1e3),ctPublic.data__key_is_ok&&(ctMouseReadInterval=setInterval(function(){ctMouseEventTimerFlag=!0},150),ctMouseWriteDataInterval=setInterval(function(){ctSetCookie("ct_pointer_data",JSON.stringify(ctMouseData))},1200)),function(e){ctSetMouseMoved(),!0===ctMouseEventTimerFlag&&(ctMouseData.push([Math.round(e.clientY),Math.round(e.clientX),Math.round((new Date).getTime()-ctTimeMs)]),ctMouseDataCounter++,ctMouseEventTimerFlag=!1,50<=ctMouseDataCounter)&&ctMouseStopData()});function cronFormsHandler(e=2e3){setTimeout(function(){setInterval(function(){restartFieldsListening(),restartBotDetectorEventTokenAttach()},2e3)},e)}function sendBotDetectorLogToAltSessions(e=3e3,t=1e3){setTimeout(function(){setInterval(function(){var e=apbctLocalStorage.get("ct_bot_detector_frontend_data_log");needsSaveLogToAltSessions(e)&&(botDetectorLogLastUpdate=e.log_last_update,ctSetAlternativeCookie([],{forceAltCookies:!0}))},t)},e)}function needsSaveLogToAltSessions(t){if(t&&t.hasOwnProperty("log_last_update")&&botDetectorLogLastUpdate!==t.log_last_update)try{for(let e=0;e<t.records.length;e++){var o=t.records[e].frontend_data.js_event;if(void 0===o||!botDetectorLogEventTypesCollected.includes(o))return botDetectorLogEventTypesCollected.push(o),!0}}catch(e){console.log("APBCT: bot detector log collection error: ".e.toString())}return!1}function restartBotDetectorEventTokenAttach(){var e,t=0<document.getElementsByClassName("latepoint-form").length||0<document.getElementsByClassName("mec-booking-form-container").length||null!==document.getElementById("login-form-popup");try{t&&(e=apbctLocalStorage.get("bot_detector_event_token"),"function"==typeof setEventTokenField)&&void 0!==e&&64===e.length&&setEventTokenField(e)}catch(e){console.log(e.toString())}}function ctMouseStopData(){apbct_remove_event_handler(document,"mousemove",ctFunctionMouseMove),clearInterval(ctMouseReadInterval),clearInterval(ctMouseWriteDataInterval)}function ctKeyStopStopListening(){apbct_remove_event_handler(document,"mousedown",ctFunctionFirstKey),apbct_remove_event_handler(document,"keydown",ctFunctionFirstKey)}function checkEmail(e){let t=e.target.value;!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||!t||t in ctCheckedEmails||("rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("check_email_before_post",{method:"POST",data:{email:t},callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct_checked_emails",JSON.stringify(ctCheckedEmails)))}}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_email_check_before_post",email:t},{callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct_checked_emails",JSON.stringify(ctCheckedEmails)))}}))}function checkEmailExist(t){let o=t.target.value;var e;o&&o.length?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)&&(o in ctCheckedEmailsExist?(e=ctCheckedEmailsExist[o],getResultCheckEmailExist(t,e,o)):(viewCheckEmailExist(t,"load"),(ctPublicFunctions.data__ajax_type="rest")===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("check_email_exist_post",{method:"POST",data:{email:o},callback:function(e){getResultCheckEmailExist(t,e,o)}}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_email_check_exist_post",email:o},{callback:function(e){getResultCheckEmailExist(t,e,o)}}))):((e=document.getElementById("apbct-check_email_exist-block"))&&e.remove(),(e=document.getElementById("apbct-check_email_exist-popup_description"))&&e.remove())}function getResultCheckEmailExist(e,t,o){t&&t.result&&(t=t.result,ctCheckedEmailsExist[o]={result:t,timestamp:Date.now()/1e3|0},"EXISTS"==t.result?viewCheckEmailExist(e,"good_email",t.text_result):viewCheckEmailExist(e,"bad_email",t.text_result),ctSetCookie("ct_checked_emails_exist",JSON.stringify(ctCheckedEmailsExist)))}function viewCheckEmailExist(o,c,n){o=o.target.parentElement;let a=o.querySelector('[name*="email"]');if(a){let e,t;switch(document.getElementById("apbct-check_email_exist-block")?e=document.getElementById("apbct-check_email_exist-block"):((e=document.createElement("div")).setAttribute("class","apbct-check_email_exist-block"),e.setAttribute("id","apbct-check_email_exist-block"),window.addEventListener("scroll",function(){e.style.top=a.getBoundingClientRect().top+"px"}),o.after(e)),document.getElementById("apbct-check_email_exist-popup_description")?t=document.getElementById("apbct-check_email_exist-popup_description"):((t=document.createElement("div")).setAttribute("class","apbct-check_email_exist-popup_description"),t.setAttribute("id","apbct-check_email_exist-popup_description"),window.addEventListener("scroll",function(){t.style.top=e.getBoundingClientRect().top+"px"}),e.after(t)),ctEmailExistSetElementsPositions(),window.addEventListener("resize",function(e){ctEmailExistSetElementsPositions()}),c){case"load":e.classList.remove("apbct-check_email_exist-good_email","apbct-check_email_exist-bad_email"),e.classList.add("apbct-check_email_exist-load");break;case"good_email":e.classList.remove("apbct-check_email_exist-load","apbct-check_email_exist-bad_email"),e.classList.add("apbct-check_email_exist-good_email"),e.onmouseover=function(){t.textContent=n,t.style.display="block",t.style.top=a.getBoundingClientRect().top-t.getBoundingClientRect().height+"px",t.style.color="#1C7129"},e.onmouseout=function(){t.style.display="none"};break;case"bad_email":e.classList.remove("apbct-check_email_exist-load","apbct-check_email_exist-good_email"),e.classList.add("apbct-check_email_exist-bad_email"),e.onmouseover=function(){t.textContent=n,t.style.display="block",t.style.top=a.getBoundingClientRect().top-t.getBoundingClientRect().height+"px",t.style.color="#E01111"},e.onmouseout=function(){t.style.display="none"}}}}function ctEmailExistSetElementsPositions(){var e,t=document.querySelector('comment-form input[name*="email"], input#email');t&&((e=document.getElementById("apbct-check_email_exist-block"))&&(e.style.top=t.getBoundingClientRect().top+"px",e.style.left=t.getBoundingClientRect().right-35-10+"px",e.style.height=t.offsetHeight+"px",e.style.width="35px"),e=document.getElementById("apbct-check_email_exist-popup_description"))&&(e.style.width=t.offsetWidth+"px",e.style.left=t.getBoundingClientRect().left+"px")}function ctIsDrawPixel(){return("3"!=ctPublic.pixel__setting||"1"!=ctPublic.settings__data__bot_detector_enabled)&&(+ctPublic.pixel__enabled||"none"===ctPublic.data__cookies_type&&0===document.querySelectorAll("img#apbct_pixel").length||"alternative"===ctPublic.data__cookies_type&&0===document.querySelectorAll("img#apbct_pixel").length)}function ctSetPixelImg(e){if("3"==ctPublic.pixel__setting&&"1"==ctPublic.settings__data__bot_detector_enabled)return!1;var t;ctSetCookie("apbct_pixel_url",e),ctIsDrawPixel()&&!document.getElementById("apbct_pixel")&&((t=document.createElement("img")).setAttribute("alt","CleanTalk Pixel"),t.setAttribute("title","CleanTalk Pixel"),t.setAttribute("id","apbct_pixel"),t.setAttribute("style","display: none; left: 99999px;"),t.setAttribute("src",e),apbct("body").append(t))}function ctSetPixelImgFromLocalstorage(e){if("3"==ctPublic.pixel__setting&&"1"==ctPublic.settings__data__bot_detector_enabled)return!1;var t;ctIsDrawPixel()&&!document.getElementById("apbct_pixel")&&((t=document.createElement("img")).setAttribute("alt","CleanTalk Pixel"),t.setAttribute("title","CleanTalk Pixel"),t.setAttribute("id","apbct_pixel"),t.setAttribute("style","display: none; left: 99999px;"),t.setAttribute("src",decodeURIComponent(e)),apbct("body").append(t))}function ctGetPixelUrl(){if("3"==ctPublic.pixel__setting&&"1"==ctPublic.settings__data__bot_detector_enabled)return!1;var e=apbctLocalStorage.get("apbct_pixel_url");if(!1!==e){if(apbctLocalStorage.isAlive("apbct_pixel_url",10800))return void ctSetPixelImgFromLocalstorage(e);apbctLocalStorage.delete("apbct_pixel_url")}"rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("apbct_get_pixel_url",{method:"POST",callback:function(e){e&&("string"==typeof e||e instanceof String)&&0===e.indexOf("https")&&(apbctLocalStorage.get("apbct_pixel_url")||(apbctLocalStorage.set("apbct_pixel_url",e),ctNoCookieAttachHiddenFieldsToForms()),ctSetPixelImg(e))}}):apbct_public_sendAJAX({action:"apbct_get_pixel_url"},{notJson:!0,callback:function(e){e&&("string"==typeof e||e instanceof String)&&0===e.indexOf("https")&&(apbctLocalStorage.get("apbct_pixel_url")||(apbctLocalStorage.set("apbct_pixel_url",e),ctNoCookieAttachHiddenFieldsToForms()),ctSetPixelImg(e))},beforeSend:function(e){e.setRequestHeader("X-Robots-Tag","noindex, nofollow")}})}function ctSetHasScrolled(){apbctLocalStorage.isSet("ct_has_scrolled")&&apbctLocalStorage.get("ct_has_scrolled")||(ctSetCookie("ct_has_scrolled","true"),apbctLocalStorage.set("ct_has_scrolled",!0)),"native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_has_scrolled")&&ctSetCookie("ct_has_scrolled","true")}function ctSetMouseMoved(){apbctLocalStorage.isSet("ct_mouse_moved")&&apbctLocalStorage.get("ct_mouse_moved")||(ctSetCookie("ct_mouse_moved","true"),apbctLocalStorage.set("ct_mouse_moved",!0)),"native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_mouse_moved")&&ctSetCookie("ct_mouse_moved","true")}function restartFieldsListening(){apbctLocalStorage.isSet("ct_has_input_focused")||apbctLocalStorage.isSet("ct_has_key_up")||ctStartFieldsListening()}function ctStartFieldsListening(){if(!apbctLocalStorage.isSet("ct_has_key_up")&&!apbctLocalStorage.get("ct_has_key_up")||!apbctLocalStorage.isSet("ct_has_input_focused")&&!apbctLocalStorage.get("ct_has_input_focused")||"native"!==ctPublic.data__cookies_type||void 0===ctGetCookie("ct_has_input_focused")||void 0===ctGetCookie("ct_has_key_up")){var t=ctGetPageForms();if(ctPublic.handled_fields=[],0<t.length)for(let e=0;e<t.length;e++){var o=t[e].querySelectorAll("input,textarea");for(let e=0;e<o.length;e++)"hidden"!==o[e].type&&(ctPublic.handled_fields.push(o[e]),apbct_attach_event_handler(o[e],"focus",ctFunctionHasInputFocused),apbct_attach_event_handler(o[e],"keyup",ctFunctionHasKeyUp))}}}function ctStopFieldsListening(t,o){if(void 0!==ctPublic.handled_fields&&0<ctPublic.handled_fields.length)for(let e=0;e<ctPublic.handled_fields.length;e++)apbct_remove_event_handler(ctPublic.handled_fields[e],t,o)}let ctFunctionHasInputFocused=function(e){ctSetHasInputFocused(),ctStopFieldsListening("focus",ctFunctionHasInputFocused)},ctFunctionHasKeyUp=function(e){ctSetHasKeyUp(),ctStopFieldsListening("keyup",ctFunctionHasKeyUp)};function ctSetHasInputFocused(){apbctLocalStorage.isSet("ct_has_input_focused")&&apbctLocalStorage.get("ct_has_input_focused")||apbctLocalStorage.set("ct_has_input_focused",!0),("native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_has_input_focused")||"alternative"===ctPublic.data__cookies_type||"none"===ctPublic.data__cookies_type&&(void 0!==ctPublic.force_alt_cookies||void 0!==ctPublic.force_alt_cookies&&ctPublic.force_alt_cookies))&&ctSetCookie("ct_has_input_focused","true")}function ctSetHasKeyUp(){apbctLocalStorage.isSet("ct_has_key_up")&&apbctLocalStorage.get("ct_has_key_up")||apbctLocalStorage.set("ct_has_key_up",!0),("native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_has_key_up")||"alternative"===ctPublic.data__cookies_type||"none"===ctPublic.data__cookies_type&&(void 0!==ctPublic.force_alt_cookies||void 0!==ctPublic.force_alt_cookies&&ctPublic.force_alt_cookies))&&ctSetCookie("ct_has_key_up","true")}function apbctPrepareBlockForAjaxForms(){function c(e){if(e.responseText&&-1!==e.responseText.indexOf('"apbct')&&-1===e.responseText.indexOf("DOCTYPE"))try{ctParseBlockMessage(JSON.parse(e.responseText))}catch(e){console.log(e.toString())}}"undefined"!=typeof jQuery?"function"!=typeof jQuery(document).ajaxComplete()?jQuery(document).on("ajaxComplete",function(e,t,o){c(t)}):jQuery(document).ajaxComplete(function(e,t,o){c(t)}):"undefined"!=typeof XMLHttpRequest&&document.addEventListener("readystatechange",function(e){4===e.target.readyState&&c(e.target)})}function startForcedAltEventTokenChecker(){tokenCheckerIntervalId=setInterval(function(){var e;"1"===apbctLocalStorage.get("event_token_forced_set")?clearInterval(tokenCheckerIntervalId):(e=apbctLocalStorage.get("bot_detector_event_token"))&&(ctSetAlternativeCookie([["ct_bot_detector_event_token",e]],{forceAltCookies:!0}),apbctLocalStorage.set("event_token_forced_set","1"),clearInterval(tokenCheckerIntervalId))},1e3)}function apbct_ready(){document.addEventListener("gform_page_loaded",function(){void 0!==ctPublic.force_alt_cookies&&("undefined"===ctPublic.force_alt_cookies||ctPublic.force_alt_cookies)||(ctNoCookieAttachHiddenFieldsToForms(),"function"!=typeof setEventTokenField)||"function"!=typeof botDetectorLocalStorage||setEventTokenField(botDetectorLocalStorage.get("bot_detector_event_token"))}),ctPublic.wc_ajax_add_to_cart||apbctCheckAddToCartByGet(),apbctPrepareBlockForAjaxForms(),apbctSessionStorage.isSet("apbct_session_id")?apbctLocalStorage.set("apbct_page_hits",Number(apbctLocalStorage.get("apbct_page_hits"))+1):(e=apbctGenerateUniqueID(),apbctSessionStorage.set("apbct_session_id",e,!1),apbctLocalStorage.set("apbct_page_hits",1),document.referrer&&new URL(document.referrer).host!==location.host&&apbctSessionStorage.set("apbct_site_referer",document.referrer,!1)),apbctWriteReferrersToSessionStorage();var e=apbctLocalStorage.get("ct_cookies_type"),e=(e&&e===ctPublic.data__cookies_type||(apbctLocalStorage.set("ct_cookies_type",ctPublic.data__cookies_type),apbctLocalStorage.delete("ct_mouse_moved"),apbctLocalStorage.delete("ct_has_scrolled")),"alternative"!==ctPublic.data__cookies_type&&(ctStartFieldsListening(),setTimeout(ctStartFieldsListening,1e3)),window.addEventListener("animationstart",apbctOnAnimationStart,!0),window.addEventListener("input",apbctOnInput,!0),document.ctTypoData=new CTTypoData,document.ctTypoData.gatheringFields(),document.ctTypoData.setListeners(),[["ct_ps_timestamp",Math.floor((new Date).getTime()/1e3)],["ct_fkp_timestamp","0"],["ct_pointer_data","0"],["ct_timezone",ctDate.getTimezoneOffset()/60*-1],["ct_screen_info",apbctGetScreenInfo()],["apbct_headless",navigator.webdriver]]);if(apbctLocalStorage.set("ct_ps_timestamp",Math.floor((new Date).getTime()/1e3)),apbctLocalStorage.set("ct_fkp_timestamp","0"),apbctLocalStorage.set("ct_pointer_data","0"),apbctLocalStorage.set("ct_timezone",ctDate.getTimezoneOffset()/60*-1),apbctLocalStorage.set("ct_screen_info",apbctGetScreenInfo()),apbctLocalStorage.set("apbct_headless",navigator.webdriver),"native"!==ctPublic.data__cookies_type)e.push(["apbct_visible_fields","0"]);else{var t=document.cookie.split(";");if(0!==t.length)for(let e=0;e<t.length;e++){var o=t[e].trim().split("=")[0];0===o.indexOf("apbct_visible_fields_")&&ctDeleteCookie(o)}}!+ctPublic.pixel__setting||3==+ctPublic.pixel__setting&&1==ctPublic.settings__data__bot_detector_enabled||(ctIsDrawPixel()?ctGetPixelUrl():e.push(["apbct_pixel_url",ctPublic.pixel__url])),+ctPublic.data__email_check_before_post&&(e.push(["ct_checked_emails","0"]),apbct("input[type = 'email'], #email").on("blur",checkEmail)),+ctPublic.data__email_check_exist_post&&(e.push(["ct_checked_emails_exist","0"]),apbct("comment-form input[name = 'email'], input#email").on("blur",checkEmailExist)),apbctLocalStorage.isSet("ct_checkjs")?e.push(["ct_checkjs",apbctLocalStorage.get("ct_checkjs")]):e.push(["ct_checkjs",0]),ctDetectForcedAltCookiesForms();var c=apbctLocalStorage.get("bot_detector_event_token"),n=(void 0!==ctPublic.force_alt_cookies&&ctPublic.force_alt_cookies&&ctPublic.settings__data__bot_detector_enabled&&(apbctLocalStorage.set("event_token_forced_set","0"),c?(e.push(["ct_bot_detector_event_token",c]),apbctLocalStorage.set("event_token_forced_set","1")):startForcedAltEventTokenChecker()),ctSetCookie(e),setTimeout(function(){void 0!==ctPublic.force_alt_cookies&&("undefined"===ctPublic.force_alt_cookies||ctPublic.force_alt_cookies)||ctNoCookieAttachHiddenFieldsToForms(),void 0!==ctPublic.data__cookies_type&&"none"===ctPublic.data__cookies_type&&(ctAjaxSetupAddCleanTalkDataBeforeSendAjax(),ctAddWCMiddlewares());for(let e=0;e<document.forms.length;e++){var t,o,c=document.forms[e];ctCheckHiddenFieldsExclusions(document.forms[e],"visible_fields")||c.querySelector('input[name="wspsc_add_cart_submit"]')||c.querySelector('input[name="option"][value="com_vikrentcar"]')||c.querySelector('input[name="option"][value="com_vikbooking"]')||void 0!==document.forms[e].elements.apbct_visible_fields&&0<document.forms[e].elements.apbct_visible_fields.length||(c.querySelector('input[name="apbct_visible_fields"]')&&(t=c.querySelector('input[name="apbct_visible_fields"]'),c.removeChild(t)),(t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("id","apbct_visible_fields_"+e),t.setAttribute("name","apbct_visible_fields"),(o={})[0]=apbct_collect_visible_fields(c),t.value=btoa(JSON.stringify(o)),c.append(t),c.onsubmit_prev=c.onsubmit,c.ctFormIndex=e,c.onsubmit=function(e){"native"!==ctPublic.data__cookies_type&&void 0!==e.target.ctFormIndex&&apbct_visible_fields_set_cookie(apbct_collect_visible_fields(this),e.target.ctFormIndex),"none"===ctPublic.data__cookies_type&&isFormThatNeedCatchXhr(e.target)&&(window.XMLHttpRequest.prototype.send=function(e){var t="data%5Bct_no_cookie_hidden_field%5D="+getNoCookieData()+"&";defaultSend.call(this,t+e),setTimeout(()=>{window.XMLHttpRequest.prototype.send=defaultSend},0)}),e.target.onsubmit_prev instanceof Function&&!ctOnsubmitPrevCallExclude(e.target)&&(void 0!==e.target.classList&&e.target.classList.contains("brave_form_form")&&e.preventDefault(),setTimeout(function(){e.target.onsubmit_prev.call(e.target,e)},0))})}},1e3),document.querySelectorAll("[data-original-string]"));if((ctPublic.encodedEmailNodes=n).length)for(let e=0;e<n.length;++e)n[e].addEventListener("click",ctFillDecodedEmailHandler);for(let t of document.forms)"undefined"==typeof ctPublic||1!=+ctPublic.settings__forms__search_test||!("searchform"===t.getAttribute("id")||null!==t.getAttribute("class")&&-1!==t.getAttribute("class").indexOf("search-form")||null!==t.getAttribute("role")&&-1!==t.getAttribute("role").indexOf("search"))||t.querySelector("input.dgwt-wcas-search-input")||"hero-search-form"!==t.getAttribute("id")&&"hb-booking-search-form"!==t.getAttribute("class")&&(t.apbctSearchPrevOnsubmit=t.onsubmit,t.onsubmit=e=>ctSearchFormOnSubmitHandler(e,t));apbctCatchXmlHttpRequest(),new ApbctCollectingUserActivity,ctPublic.settings__sfw__anti_crawler&&checkBotDetectorExist()}function checkBotDetectorExist(){if(ctPublic.settings__data__bot_detector_enabled){let e=setInterval(()=>{!localStorage.bot_detector_event_token||(ctSetCookie("apbct_bot_detector_exist","1","3600"),clearInterval(e))},500)}}function ctAddWCMiddlewares(){window.hasOwnProperty("wp")&&window.wp.hasOwnProperty("apiFetch")&&"function"==typeof window.wp.apiFetch.use&&window.wp.apiFetch.use((e,t)=>("object"==typeof e&&null!==e&&e.hasOwnProperty("data")&&e.hasOwnProperty("path")&&(e.data.hasOwnProperty("requests")&&0<e.data.requests.length&&e.data.requests[0].hasOwnProperty("path")&&"/wc/store/v1/cart/add-item"===e.data.requests[0].path&&(e.data.requests[0].data.ct_no_cookie_hidden_field=getNoCookieData(),e.data.requests[0].data.event_token=localStorage.getItem("bot_detector_event_token")),"/wc/store/v1/checkout"===e.path)&&(e.data.ct_no_cookie_hidden_field=getNoCookieData(),e.data.event_token=localStorage.getItem("bot_detector_event_token")),t(e)))}function apbctCatchXmlHttpRequest(){if(null!==document.querySelector("div.wfu_container")){let e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(o){if(o&&"string"==typeof o&&-1!==o.indexOf("action=wfu_ajax_action_ask_server")){let e="",t=localStorage.getItem("bot_detector_event_token");try{t=JSON.parse(t)}catch{t=!1}null!==t&&!1!==t&&t.hasOwnProperty("value")&&""!==t.value&&(t=t.value,e+="&data%5Bct_bot_detector_event_token%5D="+t);var c=getNoCookieData();o+=e+="&data%5Bct_no_cookie_hidden_field%5D="+c}return e.apply(this,[o])}}}function apbctAjaxSetImportantParametersOnCacheExist(e){e&&("rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("apbct_set_important_parameters",{}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_set_important_parameters"},{}))}function ctAjaxSetupAddCleanTalkDataBeforeSendAjax(){let n=!1;"undefined"!=typeof jQuery&&"function"==typeof jQuery.ajaxSetup&&jQuery.ajaxSetup({beforeSend:function(e,t){let o=!1;if("string"==typeof t.data&&(-1!==t.data.indexOf("twt_cc_signup")&&(o="twt_cc_signup"),-1!==t.data.indexOf("action=mailpoet")&&(o="action=mailpoet"),-1!==t.data.indexOf("action=user_registration")&&-1!==t.data.indexOf("ur_frontend_form_nonce")&&(o="action=user_registration"),-1!==t.data.indexOf("action=happyforms_message")&&(o="action=happyforms_message"),-1!==t.data.indexOf("action=new_activity_comment"))&&(o="action=new_activity_comment"),"string"==typeof t.url&&-1!==t.url.indexOf("wc-ajax=add_to_cart")&&(o="wc-ajax=add_to_cart",null!==localStorage.getItem("bot_detector_event_token"))){n=localStorage.getItem("bot_detector_event_token");try{n=JSON.parse(n)}catch{n=!1}!1!==n&&n.hasOwnProperty("value")&&""!==n.value&&(n=n.value)}var c;o&&(c=getNoCookieData(),n="string"==typeof n?"data%5Bct_bot_detector_event_token%5D="+n+"&":"",t.data=(c="data%5Bct_no_cookie_hidden_field%5D="+c+"&")+n+t.data)}})}function ctOnsubmitPrevCallExclude(e){return!!e.classList.contains("hb-booking-search-form")}function ctSearchFormOnSubmitHandler(o,c){try{let e=c.querySelector('[name*="apbct_email_id__"]'),t=null;null!==e&&null!==e.value&&(t=e.value);var n,a,i,r=getCleanTalkStorageDataArray(),l=apbctLocalStorage.get("bot_detector_event_token");null===r&&null===e&&null===l||(o.preventDefault(),n=()=>{null!==e&&e.parentNode.removeChild(e),"function"==typeof c.apbctSearchPrevOnsubmit?c.apbctSearchPrevOnsubmit():HTMLFormElement.prototype.submit.call(c)},a=r,null!==t&&(a.apbct_search_form__honeypot_value=t),a.ct_bot_detector_event_token=l,"string"==typeof a.apbct_pixel_url&&-1!==a.apbct_pixel_url.indexOf("%3A")&&(a.apbct_pixel_url=decodeURIComponent(a.apbct_pixel_url)),void 0!==(i=JSON.stringify(a))&&0!==i.length?ctSetAlternativeCookie(i,{callback:n,onErrorCallback:n,forceAltCookies:!0}):n())}catch(e){console.warn("APBCT search form onsubmit handler error. "+e)}}function getJavascriptClientData(t=[]){let o={};o.ct_checked_emails=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_checked_emails"),o.ct_checked_emails_exist=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_checked_emails_exist"),o.ct_checkjs=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_checkjs"),o.ct_fkp_timestamp=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_fkp_timestamp"),o.ct_pointer_data=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_pointer_data"),o.ct_ps_timestamp=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_ps_timestamp"),o.ct_screen_info=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_screen_info"),o.ct_timezone=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_timezone");var e=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_mouse_moved"),c=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_has_scrolled"),n=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_cookies_type"),a=apbctLocalStorage.get("apbct_page_hits"),i=apbctSessionStorage.get("apbct_prev_referer"),r=apbctSessionStorage.get("apbct_site_referer"),l=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_js_errors"),s=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"apbct_pixel_url"),d=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"apbct_headless"),u=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_bot_detector_frontend_data_log"),p=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_mouse_moved"),_=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_has_scrolled"),m=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_cookies_type"),b=ctGetCookie(ctPublicFunctions.cookiePrefix+"apbct_pixel_url"),f=!!ctGetCookie(ctPublicFunctions.cookiePrefix+"apbct_headless");if(o.ct_mouse_moved=void 0!==e?e:p,o.ct_has_scrolled=void 0!==c?c:_,o.ct_cookies_type=void 0!==n?n:m,o.apbct_pixel_url=void 0!==s?s:b,o.apbct_headless=void 0!==d?d:f,o.ct_bot_detector_frontend_data_log=void 0!==u?u:"",o.apbct_pixel_url&&"string"==typeof o.apbct_pixel_url&&o.apbct_pixel_url.indexOf("%3A%2F")&&(o.apbct_pixel_url=decodeURIComponent(o.apbct_pixel_url)),o.apbct_page_hits=a,o.apbct_prev_referer=i,o.apbct_site_referer=r,o.apbct_ct_js_errors=l,o.apbct_pixel_url||(o.apbct_pixel_url=ctPublic.pixel__url),"object"==typeof t)for(let e=0;e<t.length;++e)"object"==typeof t[e][1]?o[t[e][1][0]]=t[e][1][1]:o[t[e][0]]=t[e][1];else console.log("APBCT JS ERROR: Collecting data type mismatch");return o=removeDoubleJsonEncoding(o),JSON.stringify(o)}function removeDoubleJsonEncoding(e){if("object"==typeof e)for(var t in e){var o;"object"==typeof e[t]&&(e[t]=removeDoubleJsonEncoding(e[t])),"string"==typeof e[t]&&null!==e[t].match(/^[\[{].*?[\]}]$/)&&"object"==typeof(o=JSON.parse(e[t]))&&(e[t]=o)}return e}function apbct_collect_visible_fields(e){let t=[],c="",n=0,a="",i=0,o=[];for(var r in e.elements)isNaN(+r)||(t[r]=e.elements[r]);return(t=t.filter(function(e){return-1===o.indexOf(e.getAttribute("name"))&&(-1===["radio","checkbox"].indexOf(e.getAttribute("type"))||(o.push(e.getAttribute("name")),!1))})).forEach(function(e,t,o){"submit"!==e.getAttribute("type")&&null!==e.getAttribute("name")&&"ct_checkjs"!==e.getAttribute("name")&&("none"!==getComputedStyle(e).display&&"hidden"!==getComputedStyle(e).visibility&&"0"!==getComputedStyle(e).opacity&&"hidden"!==e.getAttribute("type")||e.classList.contains("wp-editor-area")?(c+=" "+e.getAttribute("name"),n++):(a+=" "+e.getAttribute("name"),i++))}),a=a.trim(),{visible_fields:c=c.trim(),visible_fields_count:n,invisible_fields:a,invisible_fields_count:i}}function apbct_visible_fields_set_cookie(e,t){var o="object"==typeof e&&null!==e?e:{};if("native"===ctPublic.data__cookies_type)for(var c in o){if(10<c)return;ctSetCookie("apbct_visible_fields_"+(void 0!==t?t:c),JSON.stringify(o[c]))}else ctSetCookie("apbct_visible_fields",JSON.stringify(o))}function apbct_js_keys__set_input_value(t,e,o,c){if(0<document.querySelectorAll("[name^=ct_checkjs]").length){var n=document.querySelectorAll("[name^=ct_checkjs]");for(let e=0;e<n.length;e++)n[e].value=t.js_key}}function apbctGetScreenInfo(){return JSON.stringify({fullWidth:document.documentElement.scrollWidth,fullHeight:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),visibleWidth:document.documentElement.clientWidth,visibleHeight:document.documentElement.clientHeight})}function ctParseBlockMessage(e){let t="";void 0!==e.apbct&&(e=e.apbct).blocked&&(t=e.comment),(t=void 0!==e.data&&void 0!==(e=e.data).message?e.message:t)&&(document.dispatchEvent(new CustomEvent("apbctAjaxBockAlert",{bubbles:!0,detail:{message:t}})),cleantalkModal.loaded=t,cleantalkModal.open(),1==+e.stop_script)&&window.stop()}function ctSetPixelUrlLocalstorage(e){ctSetCookie("apbct_pixel_url",e)}function ctNoCookieConstructHiddenField(e){let t="hidden";"submit"===e&&(t="submit");var e="",o=getCleanTalkStorageDataArray(),o=JSON.stringify(o);return o="_ct_no_cookie_data_"+btoa(o),(e=document.createElement("input")).setAttribute("name","ct_no_cookie_hidden_field"),e.setAttribute("value",o),e.setAttribute("type",t),e.classList.add("apbct_special_field"),e.classList.add("ct_no_cookie_hidden_field"),e}function getCleanTalkStorageDataArray(){var e,t=apbctLocalStorage.getCleanTalkData(),o=apbctSessionStorage.getCleanTalkData();let c={typo:[]},n=(document.ctTypoData&&document.ctTypoData.data&&(c={typo:document.ctTypoData.data}),{collecting_user_activity_data:[]});return document.ctCollectingUserActivityData&&(e=JSON.parse(JSON.stringify(document.ctCollectingUserActivityData)),n={collecting_user_activity_data:e}),{...t,...o,...c,...n}}function ctGetPageForms(){var e=document.forms;return e||!1}function ctGetHiddenFieldExclusionsType(e){var t={no_cookie:0,visible_fields:0},o=((0==+ctPublic.data__visible_fields_required||"get"===e.method.toString().toLowerCase()&&0===e.querySelectorAll(".nf-form-content").length&&"twt_cc_signup"!==e.id||e.classList.contains("slp_search_form")||e.parentElement.classList.contains("mec-booking")||-1!==e.action.toString().indexOf("activehosted.com")||e.id&&"caspioform"===e.id||e.classList&&e.classList.contains("tinkoffPayRow")||e.classList&&e.classList.contains("give-form")||e.id&&"ult-forgot-password-form"===e.id||e.id&&-1!==e.id.toString().indexOf("calculatedfields")||e.id&&-1!==e.id.toString().indexOf("sac-form")||e.id&&-1!==e.id.toString().indexOf("cp_tslotsbooking_pform")||e.name&&-1!==e.name.toString().indexOf("cp_tslotsbooking_pform")||"https://epayment.epymtservice.com/epay.jhtml"===e.action.toString()||e.name&&-1!==e.name.toString().indexOf("tribe-bar-form")||e.id&&"ihf-login-form"===e.id||e.id&&"subscriberForm"===e.id&&-1!==e.action.toString().indexOf("actionType=update")||e.id&&"ihf-main-search-form"===e.id||e.id&&"frmCalc"===e.id||-1!==e.action.toString().indexOf("property-organizer-delete-saved-search-submit")||null!==e.querySelector('a[name="login"]'))&&(t.visible_fields=1),e.parentNode);return(o&&o.classList.contains("proinput")||"options"===e.name&&e.classList.contains("asp-fss-flex"))&&(t.no_cookie=1),e&&e.classList.contains("woocommerce-form-login")&&(t.visible_fields=1,t.no_cookie=1),t}function ctCheckHiddenFieldsExclusions(e,t){var o="string"==typeof e.action?e.action:"";return!!Boolean(e.querySelector("fieldset.asl_sett_scroll"))||!!e.classList.contains("swpf-instant-filtering")||-1!==o.indexOf("secure.payu.com")||-1!==o.indexOf("hsforms")||-1!==o.indexOf("secureinternetbank.com")||"string"==typeof t&&-1!==["visible_fields","no_cookie"].indexOf(t)&&1===ctGetHiddenFieldExclusionsType(e)[t]}function ctNoCookieAttachHiddenFieldsToForms(){if("none"===ctPublic.data__cookies_type){var t=ctGetPageForms();if(t)for(let e=0;e<t.length;e++)if(!ctCheckHiddenFieldsExclusions(document.forms[e],"no_cookie")&&(null===document.forms[e].getAttribute("method")||"post"===document.forms[e].getAttribute("method").toLowerCase())){var o=t[e].querySelectorAll(".ct_no_cookie_hidden_field");for(let e=0;e<o.length;e++)o[e].outerHTML="";document.forms[e].append(ctNoCookieConstructHiddenField())}}}ctPublic.data__key_is_ok&&(apbct_attach_event_handler(document,"mousemove",ctFunctionMouseMove),apbct_attach_event_handler(document,"mousedown",ctFunctionFirstKey),apbct_attach_event_handler(document,"keydown",ctFunctionFirstKey),apbct_attach_event_handler(document,"scroll",ctSetHasScrolled)),ctPublic.data__key_is_ok&&("loading"!==document.readyState?apbct_ready():apbct_attach_event_handler(document,"DOMContentLoaded",apbct_ready),apbctLocalStorage.set("ct_checkjs",ctPublic.ct_checkjs_key,!0));let defaultFetch=window.fetch,defaultSend=XMLHttpRequest.prototype.send;function checkFormsExistForCatching(){setTimeout(function(){isFormThatNeedCatch()&&(window.fetch=function(...e){var t;return e&&e[0]&&"function"==typeof e[0].includes&&e[0].includes("/wp-json/metform/")&&(t=getNoCookieData(),e)&&e[1]&&e[1].body&&e[1].body.append("ct_no_cookie_hidden_field",t),defaultFetch.apply(window,e)})},1e3)}function isFormThatNeedCatch(){var e=["metform-form-content"];let o=!1;for(let t of document.forms)e.forEach(function(e){t.classList.contains(e)&&(o=!0)});return o}function isFormThatNeedCatchXhr(e){return null==document.querySelector("div.elementor-widget[title='Login/Signup']")&&!(!e||!e.action||-1===e.action.toString().indexOf("mailpoet_subscription_form"))}function getNoCookieData(){var e=apbctLocalStorage.getCleanTalkData(),t=apbctSessionStorage.getCleanTalkData(),e={...e,...t},e=JSON.stringify(e);return"_ct_no_cookie_data_"+btoa(e)}function apbctWriteReferrersToSessionStorage(){var e=apbctSessionStorage.get("apbct_session_current_page");!1!==e&&document.location.href!==e&&apbctSessionStorage.set("apbct_prev_referer",e,!1),apbctSessionStorage.set("apbct_session_current_page",document.location.href,!1)}function apbctCheckAddToCartByGet(){document.querySelectorAll("a.add_to_cart_button:not(.product_type_variable):not(.wc-interactive)").forEach(c=>{c.addEventListener("click",function(e){let t=c.getAttribute("href");var o=apbctLocalStorage.get("bot_detector_event_token");o&&(-1===t.indexOf("?")?t+="?":t+="&",t+="ct_bot_detector_event_token="+o,c.setAttribute("href",t))})})}"loading"!==document.readyState?checkFormsExistForCatching():apbct_attach_event_handler(document,"DOMContentLoaded",checkFormsExistForCatching);let cleantalkModal={loaded:!1,loading:!1,opened:!1,opening:!1,ignoreURLConvert:!1,load:function(e){var t;this.loaded||(this.loading=!0,t=function(e,t,o,c){cleantalkModal.loading=!1,cleantalkModal.loaded=e,document.dispatchEvent(new CustomEvent("cleantalkModalContentLoaded",{bubbles:!0}))},("function"==typeof apbct_admin_sendAJAX?apbct_admin_sendAJAX:apbct_public_sendAJAX)({action:e},{callback:t,notJson:!0}))},open:function(){function e(){let e="";for(var t in this.styles)e+=t+":"+this.styles[t]+";";return e}var t={styles:{"z-index":"9999999999",position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",display:"flex","justify-content":"center","align-items":"center"},toString:e},o={styles:{position:"relative",padding:"30px",background:"#FFF",border:"1px solid rgba(0,0,0,0.75)","border-radius":"4px","box-shadow":"7px 7px 5px 0px rgba(50,50,50,0.75)"},toString:e},c={styles:{position:"absolute",background:"#FFF",width:"20px",height:"20px",border:"2px solid rgba(0,0,0,0.75)","border-radius":"15px",cursor:"pointer",top:"-8px",right:"-8px","box-sizing":"content-box"},toString:e},n={styles:{content:'""',display:"block",position:"absolute",background:"#000","border-radius":"1px",width:"2px",height:"16px",top:"2px",left:"9px",transform:"rotate(45deg)"},toString:e},a={styles:{content:'""',display:"block",position:"absolute",background:"#000","border-radius":"1px",width:"2px",height:"16px",top:"2px",left:"9px",transform:"rotate(-45deg)"},toString:e},i={styles:{overflow:"hidden"},toString:e},r=document.createElement("style"),i=(r.setAttribute("id","cleantalk-modal-styles"),r.innerHTML="body.cleantalk-modal-opened{"+i+"}",r.innerHTML+="#cleantalk-modal-overlay{"+t+"}",r.innerHTML+="#cleantalk-modal-close{"+c+"}",r.innerHTML+="#cleantalk-modal-close:before{"+n+"}",r.innerHTML+="#cleantalk-modal-close:after{"+a+"}",document.body.append(r),document.createElement("div")),t=(i.setAttribute("id","cleantalk-modal-overlay"),document.body.append(i),document.body.classList.add("cleantalk-modal-opened"),document.createElement("div")),c=(t.setAttribute("id","cleantalk-modal-inner"),t.setAttribute("style",o),i.append(t),document.createElement("div")),n=(c.setAttribute("id","cleantalk-modal-close"),t.append(c),document.createElement("div"));this.loaded?(a=/(https?:\/\/[^\s]+)/g,/.*\/inc/g.test(this.loaded)||this.ignoreURLConvert?n.innerHTML=this.loaded:n.innerHTML=this.loaded.replace(a,'<a href="$1" target="_blank">$1</a>')):(n.innerHTML="Loading...",this.load("get_options_template")),n.setAttribute("id","cleantalk-modal-content"),t.append(n),this.opened=!0},close:function(){document.body.classList.remove("cleantalk-modal-opened"),document.getElementById("cleantalk-modal-overlay").remove(),document.getElementById("cleantalk-modal-styles").remove(),document.dispatchEvent(new CustomEvent("cleantalkModalClosed",{bubbles:!0}))}};function closeAllPopupTRP(){var e=document.querySelectorAll(".apbct-real-user-popup.visible");0<e.length&&e.forEach(e=>{e.classList.remove("visible")})}function ctProtectExternal(){for(let e=0;e<document.forms.length;e++)if(void 0===document.forms[e].cleantalk_hidden_action&&void 0===document.forms[e].cleantalk_hidden_method){var t,o=document.forms[e];if(!formIsExclusion(o))if(isIntegratedForm(o))apbctProcessExternalForm(o,e,document);else if(void 0!==o.dataset.mailingListId||"string"==typeof o.action&&-1!==o.action.indexOf("webto.salesforce.com")||"string"==typeof o.action&&o.querySelector('[href*="activecampaign"]')||"string"==typeof o.action&&-1!==o.action.indexOf("hsforms.com")&&o.getAttribute("data-hs-cf-bound"))apbctProcessExternalFormByFakeButton(o,e,document);else if("string"==typeof o.action&&(-1!==o.action.indexOf("http://")||-1!==o.action.indexOf("https://"))){let e=o.action.split("//");(e=e[1].split("/"))[0].toLowerCase()!==location.hostname.toLowerCase()&&((t=document.createElement("input")).name="cleantalk_hidden_action",t.value=o.action,t.type="hidden",o.appendChild(t),(t=document.createElement("input")).name="cleantalk_hidden_method",t.value=o.method,t.type="hidden",o.method="POST",o.appendChild(t),o.action=document.location)}}apbctProcessIframes(),ctStartFieldsListening()}function formIsExclusion(c){let n=!1;try{c.parentElement&&0<c.parentElement.classList.length&&-1!==c.parentElement.classList[0].indexOf("mewtwo")&&(n=!0),null!==c.getAttribute("action")&&["paypal.com/cgi-bin/webscr"].forEach(function(e){-1!==c.getAttribute("action").indexOf(e)&&(n=!0)}),["give-form","frmCalc","ihf-contact-request-form","wpforms"].forEach(function(e){var t=c.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(n=!0)}),["search-form","hs-form","ihc-form-create-edit","nf-form-content","elementor-form","wpforms","et_pb_searchform"].forEach(function(e){let t="";var o=t=c.getAttribute("class")?c.getAttribute("class"):apbctGetFormClass(c,e);null!=o&&-1!==o.indexOf(e)&&(n=!c.getAttribute("data-hs-cf-bound"))}),["search"].forEach(function(e){var t=c.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(n=!0)})}catch(e){console.table("APBCT ERROR: formIsExclusion() - ",e)}return n}function apbctGetFormClass(e,t){if("object"==typeof e&&e.querySelector("."+t))return t}function apbctProcessIframes(){var o=document.getElementsByTagName("iframe");if(0<o.length)for(let t=0;t<o.length;t++)if(null!=o[t].contentDocument){var c=o[t].contentDocument.forms;if(0!==c.length)for(let e=0;e<c.length;e++){var n=c[e];formIsExclusion(n)||apbctProcessExternalForm(n,e,o[t].contentDocument)}}}function apbctProcessExternalForm(e,t,o){var c=document.createElement("i"),c=(c.className="cleantalk_placeholder",c.style="display: none",e.parentElement.insertBefore(c,e),e.previousSibling),n=e.outerHTML,a=e,e=(e.parentElement.removeChild(e),document.createElement("div")),n=(e.innerHTML=n,c.after(e.firstElementChild),document.createElement("input"));n.name="action",n.value="cleantalk_force_ajax_check",n.type="hidden";let i=o.forms[t],r=(i.appendChild(n),i.apbctPrev=c,i.apbctFormOriginal=a,!1);void 0!==i.classList&&["newsletterform","ml-block-form"].forEach(function(e){i.classList.contains(e)&&(r=e)});e=null;r?null!=(e=i.querySelector('button[type="submit"]'))&&e.addEventListener("click",function(e){e.preventDefault(),sendAjaxCheckingFormData(i)}):o.forms[t].onsubmit=function(e){e.preventDefault(),sendAjaxCheckingFormData(e.currentTarget)}}function apbctProcessExternalFormByFakeButton(e,t,o){var c,n,a,i=e.querySelector('[type="submit"]'),e=e.querySelector('[type="submit"]').form.onsubmit;i&&(c=i.parentElement,n=i.outerHTML,i.remove(),(a=document.createElement("div")).innerHTML=n,c.appendChild(a.firstElementChild),(n=document.createElement("input")).name="action",n.value="cleantalk_force_ajax_check",n.type="hidden",(a=o.forms[t]).appendChild(n),a.apbctParent=c,a.submitButtonOriginal=i,a.onsubmitOriginal=e,o.forms[t].onsubmit=function(e){e.preventDefault(),apbctMoosendSpinnerToggle(e.currentTarget),sendAjaxCheckingFormData(e.currentTarget)})}function apbctMoosendSpinnerToggle(e){var t,e=e.querySelector('button[type="submit"]');e&&(t=e.querySelector("i"),e=e.querySelector("span"),t)&&e&&(1==t.style.zIndex?(e.style.opacity=1,t.style.zIndex=-1,t.style.opacity=0):(e.style.opacity=0,t.style.zIndex=1,t.style.opacity=1))}function apbctReplaceInputsValuesFromOtherForm(e,t){var o=e.querySelectorAll("button, input, textarea, select");let c=t.querySelectorAll("button, input, textarea, select");-1!==e.outerHTML.indexOf('action="https://www.kulahub.net')||isFormHasDiviRedirect(e)||-1!==e.outerHTML.indexOf('class="et_pb_contact_form')||-1!==e.outerHTML.indexOf('action="https://api.kit.com')||-1!==e.outerHTML.indexOf("activehosted.com")||-1!==e.outerHTML.indexOf('action="https://crm.zoho.com')?o.forEach(t=>{c.forEach(e=>{t.name===e.name&&("checkbox"===e.type||"radio"===e.type?e.checked=apbctVal(t):e.value=apbctVal(t))})}):o.forEach(t=>{c.forEach(e=>{t.outerHTML===e.outerHTML&&("checkbox"===e.type||"radio"===e.type?e.checked=apbctVal(t):e.value=apbctVal(t))})})}document.addEventListener("click",function(e){!e.target||"cleantalk-modal-overlay"!==e.target.id&&"cleantalk-modal-close"!==e.target.id||cleantalkModal.close()}),document.addEventListener("cleantalkModalContentLoaded",function(e){cleantalkModal.opened&&cleantalkModal.loaded&&(document.getElementById("cleantalk-modal-content").innerHTML=cleantalkModal.loaded)}),document.addEventListener("DOMContentLoaded",function(){let s=void 0,d=!1;if("undefined"==typeof ctPublic&&"undefined"==typeof ctTrpAdminLocalize||void 0===(s="undefined"!=typeof ctPublic&&ctPublic.theRealPerson?ctPublic.theRealPerson:s)&&"undefined"!=typeof ctTrpAdminLocalize&&ctTrpAdminLocalize.theRealPerson&&(s=ctTrpAdminLocalize.theRealPerson,d=!0),s){let e='.apbct-trp *[class*="comment-author"]';document.querySelector(".apbct-trp .comment-author .comment-author-link")&&(e='.apbct-trp *[class*="comment-author-link"]');var t=document.querySelectorAll(e+',.apbct-trp *[class*="review__author"],.apbct-trp td[class*="column-author"] > strong');0!==t.length&&(t.forEach((e,t)=>{var o,c,n,a,i,r,l;"undefined"==typeof pagenow&&e.parentElement.className.indexOf("group")<0&&"DIV"!=e.tagName||((o=document.createElement("div")).setAttribute("class","apbct-real-user-badge"),(c=document.createElement("img")).setAttribute("src",s.imgPersonUrl),c.setAttribute("class","apbct-real-user-popup-img"),(n=document.createElement("div")).setAttribute("class","apbct-real-user-popup"),(a=document.createElement("p")).setAttribute("class","apbct-real-user-popup-header"),a.append(s.phrases.trpHeading),(i=document.createElement("div")).setAttribute("class","apbct-real-user-popup-content_row"),(r=document.createElement("span")).append(s.phrases.trpContent1+" "),r.append(s.phrases.trpContent2),d&&((l=document.createElement("a")).setAttribute("href",s.trpContentLink),l.setAttribute("target","_blank"),l.text=s.phrases.trpContentLearnMore,r.append(" "),r.append(l)),i.append(r),n.append(a,i),o.append(c),e.append(o),e.append(n))}),document.querySelectorAll(".apbct-real-user-badge").forEach(o=>{let c=void 0,e=(this.body.addEventListener("click",function(e){-1==e.target.className.indexOf("apbct-real-user")&&-1==e.target.parentElement.className.indexOf("apbct-real-user")&&closeAllPopupTRP()}),o.addEventListener("click",function(){var e=this.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.toggle("visible")}),o.addEventListener("mouseenter",function(){closeAllPopupTRP();var e=this.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.add("visible")}),o.addEventListener("mouseleave",function(){c=setTimeout(()=>{var e=this.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},1e3)}),o.nextElementSibling);e.addEventListener("mouseenter",function(){clearTimeout(c),e.classList.add("visible")}),e.addEventListener("mouseleave",function(){c=setTimeout(()=>{e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},1e3)}),o.addEventListener("touchend",function(){c=setTimeout(()=>{var e=this.nextElementSibling,t=window.getSelection();e&&t&&e.classList.contains("apbct-real-user-popup")&&0===t.toString().length?e.classList.remove("visible"):(clearTimeout(c),document.addEventListener("selectionchange",function e(){var t=window.getSelection();t&&0===t.toString().length&&(c=setTimeout(()=>{var e=o.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},3e3),document.removeEventListener("selectionchange",e))}))},3e3)})}))}}),ctProtectOutsideFunctionalClearLocalStorage(),window.addEventListener("load",function(){+ctPublic.settings__forms__check_external&&(setTimeout(function(){ctProtectExternal(),catchDynamicRenderedForm(),catchNextendSocialLoginForm(),ctProtectOutsideFunctionalOnTagsType("div"),ctProtectOutsideFunctionalOnTagsType("iframe")},2e3),ctProtectKlaviyoForm())});let ctProtectOutsideFunctionalCheckPerformed;function ctProtectOutsideFunctionalOnTagsType(e){e=document.querySelectorAll(e);0<e.length&&e.forEach(function(e){var t,o=ctProtectOutsideFunctionalIsTagIntegrated(e);!1!==o&&(o="apbct_outside_functional_protected_tags__"+o,!1===(t=!1===(t=""!==e.id&&e.id)&&""!==e.className?e.className:t)||!1!==apbctLocalStorage.get(o)&&0<apbctLocalStorage.get(o).length&&-1!==apbctLocalStorage.get(o)[0].indexOf(t)||ctProtectOutsideFunctionalHandler(e,o,t))})}function ctProtectOutsideFunctionalIsTagIntegrated(e){if(void 0!==e.tagName){if("IFRAME"===e.tagName&&(-1!==e.src.indexOf("form.typeform.com")||-1!==e.src.indexOf("forms.zohopublic.com")||-1!==e.src.indexOf("link.surepathconnect.com")||-1!==e.src.indexOf("hello.dubsado.com")||e.classList.contains("hs-form-iframe")||-1!==e.src.indexOf("facebook.com")&&-1!==e.src.indexOf("plugins/comments.php")||-1!==e.id.indexOf("chatway_widget_app")))return e.tagName;if("DIV"===e.tagName&&(-1!==e.className.indexOf("Window__Content-sc")||-1!==e.className.indexOf("WidgetBackground__Content-sc")))return e.tagName}return!1}function ctProtectOutsideFunctionalHandler(t,o,c){let n=null;if(void 0!==t.parentNode){null!=(n=t.parentNode).style&&void 0!==n.style.position?n.style.position=null:n.style.position="relative",n.appendChild(ctProtectOutsideFunctionalGenerateCover());let e=apbctLocalStorage.get(o);!1===e&&(e=[]),c&&(e.push(c),apbctLocalStorage.set(o,e))}}function ctProtectOutsideFunctionalClearLocalStorage(){apbctLocalStorage.set("apbct_outside_functional_protected_tags__DIV",[]),apbctLocalStorage.set("apbct_outside_functional_protected_tags__IFRAME",[])}function ctProtectOutsideFunctionalGenerateCover(){var e=document.createElement("div");return e.style.width="100%",e.style.height="100%",e.style.background="black",e.style.opacity=0,e.style.position="absolute",e.style.top=0,e.style.zIndex=9999,e.setAttribute("name","apbct_cover"),e.onclick=function(t){if(void 0===ctProtectOutsideFunctionalCheckPerformed){var t=t.currentTarget,o=(t.style.opacity=.5,document.createElement("div")),c=document.createElement("div"),n=document.createElement("span");o.className="apbct-iframe-preloader",c.className="apbct-iframe-preloader-spin",n.innerText="CleanTalk Anti-Spam checking data..",n.className="apbct-iframe-preloader-text",o.appendChild(c),t.appendChild(o),t.appendChild(n);let e=null;e=e||apbctLocalStorage.get("bot_detector_event_token"),apbct_public_sendAJAX({action:"cleantalk_outside_iframe_ajax_check",ct_no_cookie_hidden_field:getNoCookieData(),ct_bot_detector_event_token:e},{async:!1,callback:function(e){let t=!(ctProtectOutsideFunctionalCheckPerformed=!0),o=("object"!=typeof e&&(console.warn("APBCT outside functional check error, skip check."),t=!0),"Blocked by CleanTalk Anti-Spam");void 0!==e&&void 0!==e.apbct&&void 0!==e.apbct.comment&&(o=e.apbct.comment),"object"==typeof e&&void 0!==e.apbct&&!1===e.apbct.blocked||"object"==typeof e&&void 0!==e.success&&!0===e.success||t?document.querySelectorAll('div[name="apbct_cover"]').forEach(function(e){e.remove()}):(document.querySelectorAll(".apbct-iframe-preloader-text").forEach(e=>{e.innerText=o}),document.querySelectorAll("div.apbct-iframe-preloader").forEach(e=>{e.remove()}))}})}},e}function ctProtectKlaviyoForm(){if(document.querySelector('link[rel="dns-prefetch"][href="//static.klaviyo.com"]')){let t=setInterval(()=>{var e=document.querySelectorAll("form.klaviyo-form");e.length&&(clearInterval(t),e.forEach((e,t)=>{apbctProcessExternalFormKlaviyo(e,t,document)}))},500)}}function apbctProcessExternalFormKlaviyo(t,e,o){var c,n=t.querySelector('button[type="button"].needsclick');n&&(n.disabled=!0,(c=document.createElement("input")).name="action",c.value="cleantalk_force_ajax_check",c.type="hidden",t.appendChild(c),(c=document.createElement("div")).id="apbct-klaviyo-cover",c.style.width="100%",c.style.height="100%",c.style.background="black",c.style.opacity=0,c.style.position="absolute",c.style.top=0,c.style.cursor="pointer",c.onclick=function(e){sendAjaxCheckingFormData(t)},n.parentNode.style.position="relative",n.parentNode.appendChild(c))}function catchNextendSocialLoginForm(){var e=document.getElementById("nsl-custom-login-form-main");e&&blockBtnNextendSocialLogin(e)}function blockBtnNextendSocialLogin(e){var t=e.querySelectorAll(".nsl-container-buttons a"),e=e.querySelectorAll('a[data-plugin="nsl"] .nsl-button');t.forEach(e=>{e.setAttribute("data-oauth-login-blocked","true"),e.addEventListener("click",e=>{e.preventDefault()})}),e.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),ctCheckAjax(t)})})}function allowAjaxNextendSocialLogin(e){e.parentElement.setAttribute("data-oauth-login-blocked","false"),e.parentElement.click()}function forbiddenAjaxNextendSocialLogin(e,t){var o,e=e.parentElement;"false"==e.getAttribute("data-oauth-login-blocked")&&e.setAttribute("data-oauth-login-blocked","true"),document.querySelector(".ct-forbidden-msg")||((o=document.createElement("div")).className="ct-forbidden-msg",o.style.background="red",o.style.color="white",o.style.padding="5px",o.innerHTML=t,e.insertAdjacentElement("beforebegin",o))}function ctCheckAjax(t){apbct_public_sendAJAX({action:"cleantalk_nsl_ajax_check",ct_no_cookie_hidden_field:document.getElementsByName("ct_no_cookie_hidden_field")[0].value},{async:!1,callback:function(e){!1===e.apbct.blocked?allowAjaxNextendSocialLogin(t):forbiddenAjaxNextendSocialLogin(t,e.apbct.comment)}})}function isIntegratedForm(e){var t="string"==typeof e.action?e.action:"",o=null!==e.getAttribute("id")?e.getAttribute("id"):"",c="string"==typeof e.className?e.className:"";return!!(-1!==t.indexOf("app.convertkit.com")||-1!==t.indexOf("app.kit.com")||-1!==t.indexOf("api.kit.com")||void 0!==e.firstChild.classList&&e.firstChild.classList.contains("cb-form-group")||-1!==t.indexOf("mailerlite.com")||-1!==t.indexOf("colcolmail.co.uk")||-1!==t.indexOf("paypal.com")||-1!==t.indexOf("infusionsoft.com")||-1!==t.indexOf("secure2.convio.net")||-1!==t.indexOf("hookb.in")||-1!==t.indexOf("external.url")||-1!==t.indexOf("tp.media")||-1!==t.indexOf("flodesk.com")||-1!==t.indexOf("sendfox.com")||-1!==t.indexOf("aweber.com")||-1!==t.indexOf("secure.payu.com")||-1!==t.indexOf("mautic")||-1!==o.indexOf("mauticform_")||-1!==o.indexOf("ihf-contact-request-form")||-1!==t.indexOf("crm.zoho.com")||-1!==o.indexOf("delivra-external-form")||-1!==t.indexOf("eloqua.com")||-1!==t.indexOf("kulahub.net")||isFormHasDiviRedirect(e)||-1!==t.indexOf("eocampaign1.com")||-1!==t.indexOf("wufoo.com")||-1!==t.indexOf("activehosted.com")||-1!==t.indexOf("publisher.copernica.com")||-1!==t.indexOf("whatsapp.com")&&-1!==c.indexOf("chaty")||void 0!==e.classList&&e.classList.contains("sp-element-container")||apbctIsFormInDiv(e,"b24-form")||-1!==t.indexOf("list-manage.com"))}function isFormHasDiviRedirect(e){let t=!1;var o=document.querySelector('div[id^="et_pb_contact_form"]');return t="object"==typeof e&&null!==e&&null!==o&&o.hasAttribute("data-redirect_url")&&""!==o.getAttribute("data-redirect_url")&&null!==o.querySelector('form[class^="et_pb_contact_form"]')?e===o.querySelector('form[class^="et_pb_contact_form"]'):t}function sendAjaxCheckingFormData(_){var e={};e[0]=apbct_collect_visible_fields(_),apbct_visible_fields_set_cookie(e);let o={ct_bot_detector_event_token:apbctLocalStorage.get("bot_detector_event_token")};e=_.elements;(e=Array.prototype.slice.call(e)).forEach(function(e,t){""===e.name?o["input_"+t]=e.value:o[e.name]=e.value}),apbct_public_sendAJAX(o,{async:!1,callback:function(e,t,o,c){apbctMoosendSpinnerToggle(_);var n=_.hasAttribute("action")&&-1!==_.getAttribute("action").indexOf("hsforms");if(void 0===e.apbct&&void 0===e.data||void 0!==e.apbct&&!+e.apbct.blocked){for(var a of _.querySelectorAll('input[name="apbct_visible_fields"]'))a.remove();for(var i of _.querySelectorAll('input[value="cleantalk_force_ajax_check"]'))i.remove();for(var r of _.querySelectorAll('input[name="ct_no_cookie_hidden_field"]'))r.remove();if(void 0!==_.classList&&_.classList.contains("klaviyo-form"))return(d=document.getElementById("apbct-klaviyo-cover"))&&d.remove(),void((d=_.querySelector('button[type="button"].needsclick'))&&(d.disabled=!1,d.click()));if(void 0!==_.dataset.mailingListId){let e=_.querySelector('[type="submit"]');return e.remove(),_.apbctParent.appendChild(_.submitButtonOriginal),void(e=_.querySelector('[type="submit"]')).click()}if(_.hasAttribute("action")&&-1!==_.getAttribute("action").indexOf("webto.salesforce.com")){let e=_.querySelector('[type="submit"]');return e.remove(),_.apbctParent.appendChild(_.submitButtonOriginal),_.onsubmit=_.onsubmitOriginal,void(e=_.querySelector('[type="submit"]')).click()}if(n){let e=_.querySelector('[type="submit"]');return e.remove(),_.apbctParent.appendChild(_.submitButtonOriginal),_.onsubmit=_.onsubmitOriginal,void(e=_.querySelector('[type="submit"]')).click()}var l,s,d=_,u=(_.parentElement.removeChild(_),_.apbctPrev),p=_.apbctFormOriginal;let e=!1;apbctReplaceInputsValuesFromOtherForm(d,p),p&&"string"==typeof p.id&&-1!==p.id.indexOf("mautic")&&(e=!0),u.after(p);for(l of p.querySelectorAll('input[name="apbct_visible_fields"]'))l.remove();for(s of p.querySelectorAll('input[value="cleantalk_force_ajax_check"]'))s.remove();let t=p.querySelectorAll("button[type=submit]");if(0!==t.length)return t[0].click(),void(e&&setTimeout(function(){ctProtectExternal()},1500));if(0!==(t=p.querySelectorAll("input[type=submit]")).length)return void t[0].click();if(0!==(t=p.querySelectorAll('button[data-element="submit"]')).length)return void t[0].click();if(0!==(t=p.querySelectorAll("button#ck_subscribe_button")).length)return void t[0].click();0!==(t=p.querySelectorAll('input[type="image"][name="submit"]')).length&&t[0].click()}(void 0!==e.apbct&&+e.apbct.blocked||void 0!==e.data&&void 0!==e.data.message)&&(ctParseBlockMessage(e),n)&&setTimeout(function(){document.location.reload()},3e3)}})}function catchDynamicRenderedForm(){catchDynamicRenderedFormHandler(document.getElementsByTagName("form"));var t=document.getElementsByTagName("iframe");if(0<t.length)for(let e=0;e<t.length;e++)if(null!=t[e].contentDocument){var o=t[e].contentDocument.forms;if(0===o.length)return;catchDynamicRenderedFormHandler(o,t[e].contentDocument)}}function catchDynamicRenderedFormHandler(e,t=document){var o,c,n=[];for(o of e){var a=o.getAttribute("id");a&&-1!==a.indexOf("hsForm")&&n.push(a),a&&-1!==a.indexOf("createuser")&&void 0!==o.classList&&o.classList.contains("ihc-form-create-edit")&&n.push(a)}for(c of n){var i=t.getElementById(c);i.apbct_external_onsubmit_prev=i.onsubmit,i.onsubmit=sendAjaxCheckingDynamicFormData}}function sendAjaxCheckingDynamicFormData(a){a.preventDefault(),a.stopImmediatePropagation();let i=a;a=a.target;var e=document.createElement("input"),e=(e.name="action",e.value="cleantalk_force_ajax_check",e.type="hidden",a.appendChild(e),{});e[0]=apbct_collect_visible_fields(a),apbct_visible_fields_set_cookie(e),a.append(ctNoCookieConstructHiddenField("hidden"));let o={};e=a.elements;(e=Array.prototype.slice.call(e)).forEach(function(e,t){""===e.name?o["input_"+t]=e.value:o[e.name]=e.value}),apbct_public_sendAJAX(o,{async:!1,callback:function(e){if(void 0===e.apbct||!+e.apbct.blocked){a.onsubmit=null;for(var t of a.querySelectorAll('input[name="apbct_visible_fields"]'))t.remove();for(var o of a.querySelectorAll('input[value="cleantalk_force_ajax_check"]'))o.remove();for(var c of a.querySelectorAll('input[name="ct_no_cookie_hidden_field"]'))c.remove();a.apbct_external_onsubmit_prev instanceof Function&&(n=setTimeout(function(){a.apbct_external_onsubmit_prev.call(a,i)},500),clearTimeout(n));var n=a.querySelector('input[type="submit"]');if(n)return void n.click()}void 0!==e.apbct&&+e.apbct.blocked&&ctParseBlockMessage(e)}})}function apbctVal(e){return e.options&&e.multiple?e.options.filter(e=>e.selected).map(e=>e.value):"checkbox"===e.type||"radio"===e.type?e.checked||null:e.value}function apbctIsFormInDiv(e,t){let o=e.parentElement;for(;o;){if(o.classList.contains(t))return!0;o=o.parentElement}return!1}
>>>>>>> tag-6.58
=======
class ApbctCore{ajax_parameters={};restParameters={};selector=null;elements=[];eventCallback;eventSelector;event;constructor(e){this.select(e)}select(e){return e instanceof HTMLCollection?(this.selector=null,this.elements=[],this.elements=Array.prototype.slice.call(e)):"object"==typeof e?(this.selector=null,this.elements=[],this.elements[0]=e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect(),this}addElement(e){"object"==typeof e?this.elements.push(e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect()}push(e){this.elements.push(e)}reduce(){this.elements=this.elements.slice(0,-1)}deselect(){this.elements=[]}css(o,t){if(t=t||!1,"object"==typeof o){for(let t in o)if(Object.hasOwn(o,t)){var c=t.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace("-","").replace("_",""));for(let e=0;e<this.elements.length;e++)this.elements[e].style[c]=o[t]}return this}if("string"==typeof o){let e=getComputedStyle(this.elements[0])[o];return void 0===e||t?e:(e=e.replace(/(\d)(em|pt|%|px){1,2}$/,"$1"),e=Number(e)==e?Number(e):e)}}hide(){this.prop("prev-display",this.css("display")),this.css({display:"none"})}show(){this.css({display:this.prop("prev-display")})}addClass(){for(let e=0;e<this.elements.length;e++)this.elements[e].classList.add(className)}removeClass(){for(let e=0;e<this.elements.length;e++)this.elements[e].classList.remove(className)}toggleClass(t){for(let e=0;e<this.elements.length;e++)this.elements[e].classList.toggle(t)}ajax(e){return this.ajax_parameters=e,new ApbctAjax(e)}rest(e){return this.restParameters=e,new ApbctRest(e)}on(...e){this.event=e[0],this.eventCallback=e[2]||e[1],this.eventSelector="string"==typeof e[1]?e[1]:null;for(let e=0;e<this.elements.length;e++)this.elements[e].addEventListener(this.event,null!==this.eventSelector?this.onChecker.bind(this):this.eventCallback)}onChecker(e){if(e.target===document.querySelector(this.eventSelector))return e.stopPropagation(),this.eventCallback(e)}ready(e){document.addEventListener("DOMContentLoaded",e)}change(e){this.on("change",e)}attr(t){var o=[];for(let e=0;e<this.elements.length;e++)void 0!==this.elements[e][t]?o.push(this.elements[e][t]):o.push(this.elements[e].getAttribute(t));return 1===o.length?o[0]:o}prop(t,o){if(void 0!==o){for(let e=0;e<this.elements.length;e++)this.elements[e][t]=o;return this}var c=[];for(let e=0;e<this.elements.length;e++)c.push(this.elements[e][t]);return 1===c.length?c[0]:c}html(e){return void 0!==e?this.prop("innerHTML",e):this.prop("innerHTML")}val(e){return void 0!==e?this.prop("value",e):this.prop("value")}data(e,t){return void 0!==t?this.prop("apbct-data",e,t):this.prop("apbct-data")}is(e){let t=!1;for(var o of this.elements)t||=this.isElem(o,e);return t}isElem(e,t){let o=!1;return"function"==typeof t&&(o||=t.call(this,e)),"string"==typeof t&&(t.match(/^[a-z]/)&&(e=>(e=document.createElement(e).constructor,!Boolean(~[HTMLElement,HTMLUnknownElement].indexOf(e))))(t)?o||=e.tagName.toLowerCase()===t.toLowerCase():t.match(/^[a-z]/)?o||=Boolean(e[t]):o||=null!==this.selector?null!==document.querySelector(this.selector+t):this.isWithoutSelector(e,t)),o}isWithoutSelector(e,t){var o;let c=!1;for(o of document.querySelectorAll(t))c||=e===o;return c}filter(t){this.selector=null;for(let e=this.elements.length-1;0<=e;e--)this.isElem(this.elements[e],t)||this.elements.splice(Number(e),1);return this}parent(e){return this.select(this.elements[0].parentElement),void 0===e||this.is(e)||this.deselect(),this}parents(e){for(this.select(this.elements[0]);null!==this.elements[this.elements.length-1].parentElement;)this.push(this.elements[this.elements.length-1].parentElement);return this.elements.splice(0,1),void 0!==e&&this.filter(e),this}children(e){return this.select(this.elements[0].children),void 0!==e&&this.filter(e),this}siblings(e){var t=this.elements[0];return this.parent(),this.children(e),this.elements.splice(this.elements.indexOf(t),1),this}remove(){for(var e of this.elements)e.remove()}after(e){for(var t of this.elements)t.after(e)}append(e){for(var t of this.elements)t.append(e)}fadeIn(c){for(let o of this.elements){o.style.opacity=0,o.style.display="block";let e=+new Date,t=function(){o.style.opacity=+o.style.opacity+(new Date-e)/c,e=+new Date,+o.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(t)||setTimeout(t,16))};t()}}fadeOut(c){for(let o of this.elements){o.style.opacity=1;let e=+new Date,t=function(){o.style.opacity=+o.style.opacity-(new Date-e)/c,e=+new Date,0<+o.style.opacity?window.requestAnimationFrame&&requestAnimationFrame(t)||setTimeout(t,16):o.style.display="none"};t()}}}function ctProcessError(e,t){var o={},e=(e&&e.message?o.err={msg:e.message,file:e.fileName||!1,ln:e.lineNumber||lineNo||!1,col:e.columnNumber||columnNo||!1,stacktrace:e.stack||!1,cause:!!t&&JSON.stringify(t),errorObj:error||!1}:(o.err={msg:e},t&&(o.err.file=t)),o.url=window.location.href,o.userAgent=window.navigator.userAgent,"ct_js_errors");let c=localStorage.getItem(e);null===c&&(c="[]"),c=JSON.parse(c);for(let e=0;e<c.length;e++)if(c[e].err.msg===o.err.msg)return;c.push(o),localStorage.setItem(e,JSON.stringify(c))}function selectActualNonce(){let e="";return ctPublicFunctions.hasOwnProperty("_fresh_nonce")&&"string"==typeof ctPublicFunctions._fresh_nonce&&0<ctPublicFunctions._fresh_nonce.length?ctPublicFunctions._fresh_nonce:("admin_ajax"===ctPublicFunctions.data__ajax_type&&ctPublicFunctions.hasOwnProperty("_ajax_nonce")&&"string"==typeof ctPublicFunctions._ajax_nonce&&0<ctPublicFunctions._ajax_nonce.length&&(e=ctPublicFunctions._ajax_nonce),e="rest"===ctPublicFunctions.data__ajax_type&&ctPublicFunctions.hasOwnProperty("_rest_nonce")&&"string"==typeof ctPublicFunctions._rest_nonce&&0<ctPublicFunctions._rest_nonce.length?ctPublicFunctions._rest_nonce:e)}function apbct(e){return(new ApbctCore).select(e)}1===Math.floor(100*Math.random())&&(window.onerror=function(e,t){var o=["apbct","ctPublic"];let c=o.length;for(;c--;)-1!==e.indexOf(o[c])&&ctProcessError(e,t);return!1});class ApbctXhr{xhr=new XMLHttpRequest;method="POST";url="";async=!0;user=null;password=null;data={};button=null;spinner=null;progressbar=null;context=this;callback=null;onErrorCallback=null;responseType="json";headers={};timeout=15e3;methods_to_convert_data_to_URL=["GET","HEAD"];body=null;http_code=0;status_text="";constructor(e){for(var t in e)void 0!==this[t]&&(this[t]=e[t]);if(this.prepare(),Object.keys(this.data).length&&(this.deleteDoubleJSONEncoding(this.data),this.convertData()),!this.url)return console.log("%cXHR%c not URL provided","color: red; font-weight: bold;","color: grey; font-weight: normal;"),!1;this.xhr.open(this.method,this.url,this.async,this.user,this.password),this.setHeaders(),this.xhr.responseType=this.responseType,this.xhr.timeout=this.timeout,this.xhr.onreadystatechange=function(){this.isWpNonceError()?this.getFreshNonceAndRerunXHR(e):this.onReadyStateChange()}.bind(this),this.xhr.onload=function(){this.onLoad()}.bind(this),this.xhr.onprogress=function(e){this.onProgress(e)}.bind(this),this.xhr.onerror=function(){this.onError()}.bind(this),this.xhr.ontimeout=function(){this.onTimeout()}.bind(this),this.xhr.send(this.body)}prepare(){this.button&&(this.button.setAttribute("disabled","disabled"),this.button.style.cursor="not-allowed"),this.spinner&&(this.spinner.style.display="inline")}complete(){this.http_code=this.xhr.status,this.status_text=this.xhr.statusText,this.button&&(this.button.removeAttribute("disabled"),this.button.style.cursor="auto"),this.spinner&&(this.spinner.style.display="none"),this.progressbar&&this.progressbar.fadeOut("slow")}onReadyStateChange(){null!==this.on_ready_state_change&&"function"==typeof this.on_ready_state_change&&this.on_ready_state_change()}onProgress(e){null!==this.on_progress&&"function"==typeof this.on_progress&&this.on_progress()}onError(){console.log("error"),this.complete(),this.error(this.http_code,this.status_text),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback(this.status_text)}onTimeout(){this.complete(),this.error(0,"timeout"),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback("Timeout")}onLoad(){if(this.complete(),"json"===this.responseType){if(null===this.xhr.response)return this.error(this.http_code,this.status_text,"No response"),!1;if(void 0!==this.xhr.response.error)return this.error(this.http_code,this.status_text,this.xhr.response.error),!1}null!==this.callback&&"function"==typeof this.callback&&this.callback.call(this.context,this.xhr.response,this.data)}isWpNonceError(){let e=!1,t=!1;return 4==this.xhr.readyState&&(e="object"==typeof this.xhr.response&&null!==this.xhr.response&&this.xhr.response.hasOwnProperty("data")&&this.xhr.response.data.hasOwnProperty("status")&&403===this.xhr.response.data.status,t="-1"===this.xhr.response&&403===this.xhr.status),e||t}getFreshNonceAndRerunXHR(e){let t="";var o;e.hasOwnProperty("headers")&&e.headers.hasOwnProperty("X-WP-Nonce")&&(t=e.headers["X-WP-Nonce"]),""!==(t=e.hasOwnProperty("data")&&e.data.hasOwnProperty("_ajax_nonce")?e.data._ajax_nonce:t)&&((o={method:"POST"}).data={spbc_remote_call_action:"get_fresh_wpnonce",plugin_name:"antispam",nonce_prev:t,initial_request_params:e},o.notJson=!0,o.url=ctPublicFunctions.host_url,o.callback=function(...e){var t=e[0];let o=!1;(o=void 0!==e[1]&&e[1].hasOwnProperty("initial_request_params")?e[1].initial_request_params:o)&&t.hasOwnProperty("wpnonce")&&(ctPublicFunctions._fresh_nonce=t.wpnonce,"rest"===ctPublicFunctions.data__ajax_type?(new ApbctCore).rest(o):(new ApbctCore).ajax(o))},new ApbctXhr(o))}error(e,t,o){let c="";"timeout"===t?c+="Server response timeout":200===e?"parsererror"===t?c+="Unexpected response from server. See console for details.":(c+="Unexpected error. Status: "+t+".",void 0!==o&&(c+=" Additional error info: "+o)):c+=500===e?"Internal server error.":"Unexpected response code:"+e,this.errorOutput(c),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback(this.status_text)}errorOutput(e){console.log("%c ctXHR error: %c"+e,"color: red;","color: grey;")}setHeaders(){for(var e in this.headers)void 0!==this.headers[e]&&this.xhr.setRequestHeader(e,this.headers[e])}convertData(){return~this.methods_to_convert_data_to_URL.indexOf(this.method)?this.convertDataToURL():this.convertDataToBody()}convertDataToURL(){var e=new URLSearchParams(this.data).toString(),t=this.url.match(/^(https?:\/{2})?[a-z0-9.]+\?/)?"&":"?";return this.url+=t+e,this.url}convertDataToBody(){for(var e in this.body=new FormData,this.data)Object.hasOwn(this.data,e)&&this.body.append(e,"object"==typeof this.data[e]?JSON.stringify(this.data[e]):this.data[e]);return this.body}deleteDoubleJSONEncoding(e){if("object"==typeof e)for(var t in e){var o;Object.hasOwn(e,t)&&("object"==typeof e[t]&&(e[t]=this.deleteDoubleJSONEncoding(e[t])),"string"==typeof e[t])&&null!==e[t].match(/^[\[{].*?[\]}]$/)&&"object"==typeof(o=JSON.parse(e[t]))&&(e[t]=o)}return e}}class ApbctAjax extends ApbctXhr{constructor(...e){(e=e[0]).data._ajax_nonce=selectActualNonce(),super(e)}}class ApbctRest extends ApbctXhr{static default_route=ctPublicFunctions._rest_url+"cleantalk-antispam/v1/";route="";constructor(...e){e=e[0];var t=selectActualNonce();e.url=ApbctRest.default_route+e.route,e.headers={"X-WP-Nonce":t},super(e)}}Object.prototype.hasOwn||Object.defineProperty(Object.prototype,"hasOwn",{value:function(e){return Object.prototype.hasOwnProperty.call(this,e)},enumerable:!1,configurable:!0,writable:!0});class ApbctCollectingUserActivity{elementBody=document.querySelector("body");collectionForms=document.forms;constructor(){this.setListeners()}setListeners(){this.elementBody.addEventListener("click",e=>{this.checkElementInForms(e,"addClicks")}),this.elementBody.addEventListener("mouseup",e=>{"Range"==document.getSelection().type.toString()&&this.addSelected()}),this.elementBody.addEventListener("mousemove",e=>{this.checkElementInForms(e,"trackMouseMovement")})}checkElementInForms(t,e){let o;for(let e=0;e<this.collectionForms.length;e++)o=0<t.target.outerHTML.length&&0<this.collectionForms[e].innerHTML.length?this.collectionForms[e].innerHTML.indexOf(t.target.outerHTML):-1;switch(e){case"addClicks":o<0&&this.addClicks();break;case"trackMouseMovement":-1<o&&this.trackMouseMovement()}}addClicks(){document.ctCollectingUserActivityData?document.ctCollectingUserActivityData.clicks?document.ctCollectingUserActivityData.clicks++:document.ctCollectingUserActivityData.clicks=1:document.ctCollectingUserActivityData={clicks:1}}addSelected(){document.ctCollectingUserActivityData?document.ctCollectingUserActivityData.selected?document.ctCollectingUserActivityData.selected++:document.ctCollectingUserActivityData.selected=1:document.ctCollectingUserActivityData={selected:1}}trackMouseMovement(){document.ctCollectingUserActivityData||(document.ctCollectingUserActivityData={}),document.ctCollectingUserActivityData.mouseMovementsInsideForm||(document.ctCollectingUserActivityData.mouseMovementsInsideForm=!1),document.ctCollectingUserActivityData.mouseMovementsInsideForm=!0}}function ctSetCookie(e,t,c){let o=["ct_sfw_pass_key","ct_sfw_passed","wordpress_apbct_antibot","apbct_anticrawler_passed","apbct_bot_detector_exist","apbct_antiflood_passed","apbct_email_encoder_passed"],n=!1;if("string"==typeof e&&(n="ct_pointer_data"===e,"string"!=typeof t&&"number"!=typeof t||(e=[[e,t,c]])),"none"===ctPublicFunctions.data__cookies_type){let t=[];e.forEach(function(e){-1!==o.indexOf(e[0])?t.push(e):apbctLocalStorage.set(e[0],e[1])}),0<t.length&&ctSetAlternativeCookie(t),ctPublic.force_alt_cookies&&!n?ctSetAlternativeCookie(e,{forceAltCookies:!0}):ctNoCookieAttachHiddenFieldsToForms()}else"native"===ctPublicFunctions.data__cookies_type?(ctPublic.force_alt_cookies&&!n&&ctSetAlternativeCookie(e,{forceAltCookies:!0}),e.forEach(function(e){var t=void 0!==e[2]?"expires="+c+"; ":"",o="https:"===location.protocol?"; secure":"";document.cookie=ctPublicFunctions.cookiePrefix+e[0]+"="+encodeURIComponent(e[1])+"; "+t+"path=/; samesite=lax"+o})):"alternative"!==ctPublicFunctions.data__cookies_type||n||ctSetAlternativeCookie(e)}function ctDetectForcedAltCookiesForms(){var e=0<document.querySelectorAll("#tmpl-nf-layout").length,t=0<document.querySelectorAll(".uael-registration-form-wrapper").length,o=0<document.querySelectorAll('script[id*="smart-forms"]').length,c=0<document.querySelectorAll('iframe[name="jetpack_remote_comment"]').length,n=0<document.querySelectorAll(".cwginstock-subscribe-form").length,a=0<document.querySelectorAll('div[id^="user-registration-form"]').length,i=0<document.querySelectorAll('div[class^="et_pb_newsletter_form"]').length,r=0<document.querySelectorAll('div[class^="fluent_booking_app"]').length,l=0<document.querySelectorAll('div[class^="et_bloom_form_container"]').length,s=0<document.querySelectorAll('div[class*="pafe-form"]').length,d=0<document.querySelectorAll('div [class*="otter-form"]').length,u=0<document.querySelectorAll("form .sqbform, .fields_reorder_enabled").length;ctPublic.force_alt_cookies=o||e||c||t||n||a||i||r||s||l||d||u,setTimeout(function(){var e;ctPublic.force_alt_cookies||(e=0<document.querySelectorAll('main[id^="bookingpress_booking_form"]').length,ctPublic.force_alt_cookies=e)},1e3)}function ctSetAlternativeCookie(e,t){"function"==typeof getJavascriptClientData?Array.isArray(e)&&(e=getJavascriptClientData(e)):console.log("APBCT ERROR: getJavascriptClientData() is not loaded");try{e=JSON.parse(e)}catch(e){return void console.log("APBCT ERROR: JSON parse error:"+e)}var o=t&&t.callback||null,c=t&&t.onErrorCallback||null;t&&t.forceAltCookies&&(e.apbct_force_alt_cookies=!0),"rest"===ctPublicFunctions.data__ajax_type?("string"==typeof e.apbct_pixel_url&&-1!==e.apbct_pixel_url.indexOf("%3A")&&(e.apbct_pixel_url=decodeURIComponent(e.apbct_pixel_url)),apbct_public_sendREST("alt_sessions",{method:"POST",data:{cookies:e},callback:o,onErrorCallback:c})):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_alt_session__save__AJAX",cookies:e},{notJson:1,callback:o,onErrorCallback:c,beforeSend:function(e){e.setRequestHeader("X-Robots-Tag","noindex, nofollow")}})}function ctGetCookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function ctDeleteCookie(e){var t;"none"!==ctPublicFunctions.data__cookies_type&&("native"===ctPublicFunctions.data__cookies_type?(t="https:"===location.protocol?"; secure":"",document.cookie=e+'=""; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax'+t):ctPublicFunctions.data__cookies_type)}function apbct_public_sendAJAX(e,t,o){var c=[],o=(c.callback=t.callback||null,c.onErrorCallback=t.onErrorCallback||null,c.callback_context=t.callback_context||null,c.callback_params=t.callback_params||null,c.async=t.async||!0,c.notJson=t.notJson||null,c.responseType=t.notJson?"text":"json",c.timeout=t.timeout||15e3,c.obj=o||null,c.button=t.button||null,c.spinner=t.spinner||null,c.progressbar=t.progressbar||null,c.silent=t.silent||null,c.no_nonce=t.no_nonce||null,c.data=e,c.url=ctPublicFunctions._ajax_url,selectActualNonce());"string"==typeof e?(c.no_nonce||(c.data=c.data+"&_ajax_nonce="+o),c.data=c.data+"&no_cache="+Math.random()):(c.no_nonce||(c.data._ajax_nonce=o),c.data.no_cache=Math.random()),(new ApbctCore).ajax(c)}function apbct_public_sendREST(e,t){var o=[];o.route=e,o.callback=t.callback||null,o.onErrorCallback=t.onErrorCallback||null,o.data=t.data||[],o.method=t.method||"POST",(new ApbctCore).rest(o)}function apbctGenerateUniqueID(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)}let apbctLocalStorage={get:function(t,o){void 0===o&&(o="value");t=localStorage.getItem(t);if(null!==t)try{var c=JSON.parse(t);if(!c.hasOwnProperty(o))return c;try{return JSON.parse(c[o])}catch(e){return c[o].toString()}}catch(e){return t}return!1},set:function(e,t,o=!0){o?(o={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},localStorage.setItem(e,JSON.stringify(o))):localStorage.setItem(e,t)},isAlive:function(e,t){return void 0===t&&(t=86400),this.get(e,"timestamp")+t>Math.floor((new Date).getTime()/1e3)},isSet:function(e){return null!==localStorage.getItem(e)},delete:function(e){localStorage.removeItem(e)},getCleanTalkData:function(){var t={};for(let e=0;e<localStorage.length;e++){var o=localStorage.key(e);-1===o.indexOf("ct_")&&-1===o.indexOf("apbct_")||(t[o.toString()]=apbctLocalStorage.get(o))}return t}},apbctSessionStorage={get:function(t,e){void 0===e&&(e="value");t=sessionStorage.getItem(t);if(null!==t)try{var o=JSON.parse(t);return o.hasOwnProperty(e)?JSON.parse(o[e]):o}catch(e){return t}return!1},set:function(e,t,o=!0){o?(o={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},sessionStorage.setItem(e,JSON.stringify(o))):sessionStorage.setItem(e,t)},isSet:function(e){return null!==sessionStorage.getItem(e)},delete:function(e){sessionStorage.removeItem(e)},getCleanTalkData:function(){var t={};for(let e=0;e<sessionStorage.length;e++){var o=sessionStorage.key(e);-1===o.indexOf("ct_")&&-1===o.indexOf("apbct_")||(t[o.toString()]=apbctSessionStorage.get(o))}return t}};function apbctOnAnimationStart(e){("onautofillstart"===e.animationName?apbctAutocomplete:apbctCancelAutocomplete)(e.target)}function apbctOnInput(e){("insertReplacementText"!==e.inputType&&"data"in e?apbctCancelAutocomplete:apbctAutocomplete)(e.target)}function apbctAutocomplete(e){var t;e.hasAttribute("autocompleted")||(e.setAttribute("autocompleted",""),t=new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!0,detail:null}),e.dispatchEvent(t))||(e.value="")}function apbctCancelAutocomplete(e){e.hasAttribute("autocompleted")&&(e.removeAttribute("autocompleted"),e.dispatchEvent(new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!1,detail:null})))}class ApbctForceProtection{wrappers=[];constructor(){this.wrappers=this.findWrappers(),this.wrappers.length<1||this.checkBot()}findWrappers(){return document.querySelectorAll("div.ct-encoded-form-wrapper")}checkBot(){var e={event_javascript_data:getJavascriptClientData(),post_url:document.location.href,referrer:document.referrer};"rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("force_protection_check_bot",{data:e,method:"POST",callback:e=>this.checkBotCallback(e)}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&(e.action="apbct_force_protection_check_bot",apbct_public_sendAJAX(e,{callback:e=>this.checkBotCallback(e)}))}checkBotCallback(e){if(e.data&&e.data.status&&200!==e.data.status)console.log("ApbctForceProtection connection error occurred"),this.decodeForms();else{if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return console.log("ApbctForceProtection decodeForms error",e),void this.decodeForms()}"object"==typeof e&&e.allow&&1===e.allow?(this.decodeForms(),document.dispatchEvent(new Event("apbctForceProtectionAllowed"))):this.showMessageForBot(e.message)}}decodeForms(){let o;this.wrappers.forEach(e=>{o=e.querySelector("div.ct-encoded-form").dataset.encodedForm;try{var t;o&&"string"==typeof o&&(t=decodeURIComponent(o),e.outerHTML=atob(t))}catch(e){console.log(e)}})}showMessageForBot(t){let o;this.wrappers.forEach(e=>{(o=e.querySelector("div.ct-encoded-form").dataset.encodedForm)&&(e.outerHTML='<div class="ct-encoded-form-forbidden">'+t+"</div>")})}}function apbctForceProtect(){+ctPublic.settings__forms__force_protection&&void 0!==ApbctForceProtection&&new ApbctForceProtection}ctPublic.data__key_is_ok&&("loading"!==document.readyState?apbctForceProtect():apbct_attach_event_handler(document,"DOMContentLoaded",apbctForceProtect));class CTTypoData{fieldData={isAutoFill:!1,isUseBuffer:!1,speedDelta:0,firstKeyTimestamp:0,lastKeyTimestamp:0,lastDelta:0,countOfKey:0};fields=document.querySelectorAll("textarea[name=comment]");data=[];gatheringFields(){Array.prototype.slice.call(this.fields).forEach((e,t)=>{this.data.push(Object.assign({},this.fieldData))})}setListeners(){this.fields.forEach((e,t)=>{e.addEventListener("paste",()=>{this.data[t].isUseBuffer=!0})}),this.fields.forEach((e,t)=>{e.addEventListener("onautocomplete",()=>{this.data[t].isAutoFill=!0})}),this.fields.forEach((e,o)=>{e.addEventListener("input",()=>{this.data[o].countOfKey++;var e,t=+new Date;1===this.data[o].countOfKey?(this.data[o].lastKeyTimestamp=t,this.data[o].firstKeyTimestamp=t):(e=t-this.data[o].lastKeyTimestamp,2===this.data[o].countOfKey?(this.data[o].lastKeyTimestamp=t,this.data[o].lastDelta=e):2<this.data[o].countOfKey&&(this.data[o].speedDelta+=Math.abs(this.data[o].lastDelta-e),this.data[o].lastKeyTimestamp=t,this.data[o].lastDelta=e))})})}}let ctDate=new Date,ctTimeMs=(new Date).getTime(),ctMouseEventTimerFlag=!0,ctMouseData=[],ctMouseDataCounter=0,ctCheckedEmails={},ctCheckedEmailsExist={},ctMouseReadInterval,ctMouseWriteDataInterval,tokenCheckerIntervalId,botDetectorLogLastUpdate=0,botDetectorLogEventTypesCollected=[];function apbct_attach_event_handler(e,t,o){"function"==typeof window.addEventListener?e.addEventListener(t,o):e.attachEvent(t,o)}function apbct_remove_event_handler(e,t,o){"function"==typeof window.removeEventListener?e.removeEventListener(t,o):e.detachEvent(t,o)}let ctFunctionFirstKey=function(e){ctSetCookie("ct_fkp_timestamp",Math.floor((new Date).getTime()/1e3)),ctKeyStopStopListening()},ctFunctionMouseMove=(cronFormsHandler(2e3),ctPublicFunctions.hasOwnProperty("data__bot_detector_enabled")&&1==ctPublicFunctions.data__bot_detector_enabled&&ctPublicFunctions.hasOwnProperty("data__frontend_data_log_enabled")&&1==ctPublicFunctions.data__frontend_data_log_enabled&&sendBotDetectorLogToAltSessions(1e3),ctPublic.data__key_is_ok&&(ctMouseReadInterval=setInterval(function(){ctMouseEventTimerFlag=!0},150),ctMouseWriteDataInterval=setInterval(function(){ctSetCookie("ct_pointer_data",JSON.stringify(ctMouseData))},1200)),function(e){ctSetMouseMoved(),!0===ctMouseEventTimerFlag&&(ctMouseData.push([Math.round(e.clientY),Math.round(e.clientX),Math.round((new Date).getTime()-ctTimeMs)]),ctMouseDataCounter++,ctMouseEventTimerFlag=!1,50<=ctMouseDataCounter)&&ctMouseStopData()});function cronFormsHandler(e=2e3){setTimeout(function(){setInterval(function(){restartFieldsListening(),restartBotDetectorEventTokenAttach()},2e3)},e)}function sendBotDetectorLogToAltSessions(e=3e3,t=1e3){setTimeout(function(){setInterval(function(){var e=apbctLocalStorage.get("ct_bot_detector_frontend_data_log");needsSaveLogToAltSessions(e)&&(botDetectorLogLastUpdate=e.log_last_update,ctSetAlternativeCookie([],{forceAltCookies:!0}))},t)},e)}function needsSaveLogToAltSessions(t){if(t&&t.hasOwnProperty("log_last_update")&&botDetectorLogLastUpdate!==t.log_last_update)try{for(let e=0;e<t.records.length;e++){var o=t.records[e].frontend_data.js_event;if(void 0===o||!botDetectorLogEventTypesCollected.includes(o))return botDetectorLogEventTypesCollected.push(o),!0}}catch(e){console.log("APBCT: bot detector log collection error: ".e.toString())}return!1}function restartBotDetectorEventTokenAttach(){var e,t=0<document.getElementsByClassName("latepoint-form").length||0<document.getElementsByClassName("mec-booking-form-container").length||null!==document.getElementById("login-form-popup");try{t&&(e=apbctLocalStorage.get("bot_detector_event_token"),"function"==typeof setEventTokenField)&&void 0!==e&&64===e.length&&setEventTokenField(e)}catch(e){console.log(e.toString())}}function ctMouseStopData(){apbct_remove_event_handler(document,"mousemove",ctFunctionMouseMove),clearInterval(ctMouseReadInterval),clearInterval(ctMouseWriteDataInterval)}function ctKeyStopStopListening(){apbct_remove_event_handler(document,"mousedown",ctFunctionFirstKey),apbct_remove_event_handler(document,"keydown",ctFunctionFirstKey)}function checkEmail(e){let t=e.target.value;!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||!t||t in ctCheckedEmails||("rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("check_email_before_post",{method:"POST",data:{email:t},callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct_checked_emails",JSON.stringify(ctCheckedEmails)))}}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_email_check_before_post",email:t},{callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct_checked_emails",JSON.stringify(ctCheckedEmails)))}}))}function checkEmailExist(t){let o=t.target.value;var e;o&&o.length?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)&&(o in ctCheckedEmailsExist?(e=ctCheckedEmailsExist[o],getResultCheckEmailExist(t,e,o)):(viewCheckEmailExist(t,"load"),(ctPublicFunctions.data__ajax_type="rest")===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("check_email_exist_post",{method:"POST",data:{email:o},callback:function(e){getResultCheckEmailExist(t,e,o)}}):"admin_ajax"===ctPublicFunctions.data__ajax_type&&apbct_public_sendAJAX({action:"apbct_email_check_exist_post",email:o},{callback:function(e){getResultCheckEmailExist(t,e,o)}}))):((e=document.getElementById("apbct-check_email_exist-block"))&&e.remove(),(e=document.getElementById("apbct-check_email_exist-popup_description"))&&e.remove())}function getResultCheckEmailExist(e,t,o){t&&t.result&&(t=t.result,ctCheckedEmailsExist[o]={result:t,timestamp:Date.now()/1e3|0},"EXISTS"==t.result?viewCheckEmailExist(e,"good_email",t.text_result):viewCheckEmailExist(e,"bad_email",t.text_result),ctSetCookie("ct_checked_emails_exist",JSON.stringify(ctCheckedEmailsExist)))}function viewCheckEmailExist(o,c,n){o=o.target.parentElement;let a=o.querySelector('[name*="email"]');if(a){let e,t;switch(document.getElementById("apbct-check_email_exist-block")?e=document.getElementById("apbct-check_email_exist-block"):((e=document.createElement("div")).setAttribute("class","apbct-check_email_exist-block"),e.setAttribute("id","apbct-check_email_exist-block"),window.addEventListener("scroll",function(){e.style.top=a.getBoundingClientRect().top+"px"}),o.after(e)),document.getElementById("apbct-check_email_exist-popup_description")?t=document.getElementById("apbct-check_email_exist-popup_description"):((t=document.createElement("div")).setAttribute("class","apbct-check_email_exist-popup_description"),t.setAttribute("id","apbct-check_email_exist-popup_description"),window.addEventListener("scroll",function(){t.style.top=e.getBoundingClientRect().top+"px"}),e.after(t)),ctEmailExistSetElementsPositions(),window.addEventListener("resize",function(e){ctEmailExistSetElementsPositions()}),c){case"load":e.classList.remove("apbct-check_email_exist-good_email","apbct-check_email_exist-bad_email"),e.classList.add("apbct-check_email_exist-load");break;case"good_email":e.classList.remove("apbct-check_email_exist-load","apbct-check_email_exist-bad_email"),e.classList.add("apbct-check_email_exist-good_email"),e.onmouseover=function(){t.textContent=n,t.style.display="block",t.style.top=a.getBoundingClientRect().top-t.getBoundingClientRect().height+"px",t.style.color="#1C7129"},e.onmouseout=function(){t.style.display="none"};break;case"bad_email":e.classList.remove("apbct-check_email_exist-load","apbct-check_email_exist-good_email"),e.classList.add("apbct-check_email_exist-bad_email"),e.onmouseover=function(){t.textContent=n,t.style.display="block",t.style.top=a.getBoundingClientRect().top-t.getBoundingClientRect().height+"px",t.style.color="#E01111"},e.onmouseout=function(){t.style.display="none"}}}}function ctEmailExistSetElementsPositions(){var e,t=document.querySelector('comment-form input[name*="email"], input#email');t&&((e=document.getElementById("apbct-check_email_exist-block"))&&(e.style.top=t.getBoundingClientRect().top+"px",e.style.left=t.getBoundingClientRect().right-35-10+"px",e.style.height=t.offsetHeight+"px",e.style.width="35px"),e=document.getElementById("apbct-check_email_exist-popup_description"))&&(e.style.width=t.offsetWidth+"px",e.style.left=t.getBoundingClientRect().left+"px")}function ctIsDrawPixel(){return("3"!=ctPublic.pixel__setting||"1"!=ctPublic.settings__data__bot_detector_enabled)&&(+ctPublic.pixel__enabled||"none"===ctPublic.data__cookies_type&&0===document.querySelectorAll("img#apbct_pixel").length||"alternative"===ctPublic.data__cookies_type&&0===document.querySelectorAll("img#apbct_pixel").length)}function ctSetPixelImg(e){if("3"==ctPublic.pixel__setting&&"1"==ctPublic.settings__data__bot_detector_enabled)return!1;var t;ctSetCookie("apbct_pixel_url",e),ctIsDrawPixel()&&!document.getElementById("apbct_pixel")&&((t=document.createElement("img")).setAttribute("alt","CleanTalk Pixel"),t.setAttribute("title","CleanTalk Pixel"),t.setAttribute("id","apbct_pixel"),t.setAttribute("style","display: none; left: 99999px;"),t.setAttribute("src",e),apbct("body").append(t))}function ctSetPixelImgFromLocalstorage(e){if("3"==ctPublic.pixel__setting&&"1"==ctPublic.settings__data__bot_detector_enabled)return!1;var t;ctIsDrawPixel()&&!document.getElementById("apbct_pixel")&&((t=document.createElement("img")).setAttribute("alt","CleanTalk Pixel"),t.setAttribute("title","CleanTalk Pixel"),t.setAttribute("id","apbct_pixel"),t.setAttribute("style","display: none; left: 99999px;"),t.setAttribute("src",decodeURIComponent(e)),apbct("body").append(t))}function ctGetPixelUrl(){if("3"==ctPublic.pixel__setting&&"1"==ctPublic.settings__data__bot_detector_enabled)return!1;var e=apbctLocalStorage.get("apbct_pixel_url");if(!1!==e){if(apbctLocalStorage.isAlive("apbct_pixel_url",10800))return void ctSetPixelImgFromLocalstorage(e);apbctLocalStorage.delete("apbct_pixel_url")}"rest"===ctPublicFunctions.data__ajax_type?apbct_public_sendREST("apbct_get_pixel_url",{method:"POST",callback:function(e){e&&("string"==typeof e||e instanceof String)&&0===e.indexOf("https")&&(apbctLocalStorage.get("apbct_pixel_url")||(apbctLocalStorage.set("apbct_pixel_url",e),ctNoCookieAttachHiddenFieldsToForms()),ctSetPixelImg(e))}}):apbct_public_sendAJAX({action:"apbct_get_pixel_url"},{notJson:!0,callback:function(e){e&&("string"==typeof e||e instanceof String)&&0===e.indexOf("https")&&(apbctLocalStorage.get("apbct_pixel_url")||(apbctLocalStorage.set("apbct_pixel_url",e),ctNoCookieAttachHiddenFieldsToForms()),ctSetPixelImg(e))},beforeSend:function(e){e.setRequestHeader("X-Robots-Tag","noindex, nofollow")}})}function ctSetHasScrolled(){apbctLocalStorage.isSet("ct_has_scrolled")&&apbctLocalStorage.get("ct_has_scrolled")||(ctSetCookie("ct_has_scrolled","true"),apbctLocalStorage.set("ct_has_scrolled",!0)),"native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_has_scrolled")&&ctSetCookie("ct_has_scrolled","true")}function ctSetMouseMoved(){apbctLocalStorage.isSet("ct_mouse_moved")&&apbctLocalStorage.get("ct_mouse_moved")||(ctSetCookie("ct_mouse_moved","true"),apbctLocalStorage.set("ct_mouse_moved",!0)),"native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_mouse_moved")&&ctSetCookie("ct_mouse_moved","true")}function restartFieldsListening(){apbctLocalStorage.isSet("ct_has_input_focused")||apbctLocalStorage.isSet("ct_has_key_up")||ctStartFieldsListening()}function ctStartFieldsListening(){if(!apbctLocalStorage.isSet("ct_has_key_up")&&!apbctLocalStorage.get("ct_has_key_up")||!apbctLocalStorage.isSet("ct_has_input_focused")&&!apbctLocalStorage.get("ct_has_input_focused")||"native"!==ctPublic.data__cookies_type||void 0===ctGetCookie("ct_has_input_focused")||void 0===ctGetCookie("ct_has_key_up")){var t=ctGetPageForms();if(ctPublic.handled_fields=[],0<t.length)for(let e=0;e<t.length;e++){var o=t[e].querySelectorAll("input,textarea");for(let e=0;e<o.length;e++)"hidden"!==o[e].type&&(ctPublic.handled_fields.push(o[e]),apbct_attach_event_handler(o[e],"focus",ctFunctionHasInputFocused),apbct_attach_event_handler(o[e],"keyup",ctFunctionHasKeyUp))}}}function ctStopFieldsListening(t,o){if(void 0!==ctPublic.handled_fields&&0<ctPublic.handled_fields.length)for(let e=0;e<ctPublic.handled_fields.length;e++)apbct_remove_event_handler(ctPublic.handled_fields[e],t,o)}let ctFunctionHasInputFocused=function(e){ctSetHasInputFocused(),ctStopFieldsListening("focus",ctFunctionHasInputFocused)},ctFunctionHasKeyUp=function(e){ctSetHasKeyUp(),ctStopFieldsListening("keyup",ctFunctionHasKeyUp)};function ctSetHasInputFocused(){apbctLocalStorage.isSet("ct_has_input_focused")&&apbctLocalStorage.get("ct_has_input_focused")||apbctLocalStorage.set("ct_has_input_focused",!0),("native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_has_input_focused")||"alternative"===ctPublic.data__cookies_type||"none"===ctPublic.data__cookies_type&&(void 0!==ctPublic.force_alt_cookies||void 0!==ctPublic.force_alt_cookies&&ctPublic.force_alt_cookies))&&ctSetCookie("ct_has_input_focused","true")}function ctSetHasKeyUp(){apbctLocalStorage.isSet("ct_has_key_up")&&apbctLocalStorage.get("ct_has_key_up")||apbctLocalStorage.set("ct_has_key_up",!0),("native"===ctPublic.data__cookies_type&&void 0===ctGetCookie("ct_has_key_up")||"alternative"===ctPublic.data__cookies_type||"none"===ctPublic.data__cookies_type&&(void 0!==ctPublic.force_alt_cookies||void 0!==ctPublic.force_alt_cookies&&ctPublic.force_alt_cookies))&&ctSetCookie("ct_has_key_up","true")}function apbctPrepareBlockForAjaxForms(){function c(e){if(e.responseText&&-1!==e.responseText.indexOf('"apbct')&&-1===e.responseText.indexOf("DOCTYPE"))try{ctParseBlockMessage(JSON.parse(e.responseText))}catch(e){console.log(e.toString())}}"undefined"!=typeof jQuery?"function"!=typeof jQuery(document).ajaxComplete()?jQuery(document).on("ajaxComplete",function(e,t,o){c(t)}):jQuery(document).ajaxComplete(function(e,t,o){c(t)}):"undefined"!=typeof XMLHttpRequest&&document.addEventListener("readystatechange",function(e){4===e.target.readyState&&c(e.target)})}function startForcedAltEventTokenChecker(){tokenCheckerIntervalId=setInterval(function(){var e;"1"===apbctLocalStorage.get("event_token_forced_set")?clearInterval(tokenCheckerIntervalId):(e=apbctLocalStorage.get("bot_detector_event_token"))&&(ctSetAlternativeCookie([["ct_bot_detector_event_token",e]],{forceAltCookies:!0}),apbctLocalStorage.set("event_token_forced_set","1"),clearInterval(tokenCheckerIntervalId))},1e3)}function apbct_ready(){document.addEventListener("gform_page_loaded",function(){void 0!==ctPublic.force_alt_cookies&&("undefined"===ctPublic.force_alt_cookies||ctPublic.force_alt_cookies)||(ctNoCookieAttachHiddenFieldsToForms(),"function"!=typeof setEventTokenField)||"function"!=typeof botDetectorLocalStorage||setEventTokenField(botDetectorLocalStorage.get("bot_detector_event_token"))}),ctPublic.wc_ajax_add_to_cart||apbctCheckAddToCartByGet(),apbctPrepareBlockForAjaxForms(),apbctSessionStorage.isSet("apbct_session_id")?apbctLocalStorage.set("apbct_page_hits",Number(apbctLocalStorage.get("apbct_page_hits"))+1):(e=apbctGenerateUniqueID(),apbctSessionStorage.set("apbct_session_id",e,!1),apbctLocalStorage.set("apbct_page_hits",1),document.referrer&&new URL(document.referrer).host!==location.host&&apbctSessionStorage.set("apbct_site_referer",document.referrer,!1)),apbctWriteReferrersToSessionStorage();var e=apbctLocalStorage.get("ct_cookies_type"),e=(e&&e===ctPublic.data__cookies_type||(apbctLocalStorage.set("ct_cookies_type",ctPublic.data__cookies_type),apbctLocalStorage.delete("ct_mouse_moved"),apbctLocalStorage.delete("ct_has_scrolled")),"alternative"!==ctPublic.data__cookies_type&&(ctStartFieldsListening(),setTimeout(ctStartFieldsListening,1e3)),window.addEventListener("animationstart",apbctOnAnimationStart,!0),window.addEventListener("input",apbctOnInput,!0),document.ctTypoData=new CTTypoData,document.ctTypoData.gatheringFields(),document.ctTypoData.setListeners(),[["ct_ps_timestamp",Math.floor((new Date).getTime()/1e3)],["ct_fkp_timestamp","0"],["ct_pointer_data","0"],["ct_timezone",ctDate.getTimezoneOffset()/60*-1],["ct_screen_info",apbctGetScreenInfo()],["apbct_headless",navigator.webdriver]]);if(apbctLocalStorage.set("ct_ps_timestamp",Math.floor((new Date).getTime()/1e3)),apbctLocalStorage.set("ct_fkp_timestamp","0"),apbctLocalStorage.set("ct_pointer_data","0"),apbctLocalStorage.set("ct_timezone",ctDate.getTimezoneOffset()/60*-1),apbctLocalStorage.set("ct_screen_info",apbctGetScreenInfo()),apbctLocalStorage.set("apbct_headless",navigator.webdriver),"native"!==ctPublic.data__cookies_type)e.push(["apbct_visible_fields","0"]);else{var t=document.cookie.split(";");if(0!==t.length)for(let e=0;e<t.length;e++){var o=t[e].trim().split("=")[0];0===o.indexOf("apbct_visible_fields_")&&ctDeleteCookie(o)}}!+ctPublic.pixel__setting||3==+ctPublic.pixel__setting&&1==ctPublic.settings__data__bot_detector_enabled||(ctIsDrawPixel()?ctGetPixelUrl():e.push(["apbct_pixel_url",ctPublic.pixel__url])),+ctPublic.data__email_check_before_post&&(e.push(["ct_checked_emails","0"]),apbct("input[type = 'email'], #email").on("blur",checkEmail)),+ctPublic.data__email_check_exist_post&&(e.push(["ct_checked_emails_exist","0"]),apbct("comment-form input[name = 'email'], input#email").on("blur",checkEmailExist)),apbctLocalStorage.isSet("ct_checkjs")?e.push(["ct_checkjs",apbctLocalStorage.get("ct_checkjs")]):e.push(["ct_checkjs",0]),ctDetectForcedAltCookiesForms();var c=apbctLocalStorage.get("bot_detector_event_token"),n=(void 0!==ctPublic.force_alt_cookies&&ctPublic.force_alt_cookies&&ctPublic.settings__data__bot_detector_enabled&&(apbctLocalStorage.set("event_token_forced_set","0"),c?(e.push(["ct_bot_detector_event_token",c]),apbctLocalStorage.set("event_token_forced_set","1")):startForcedAltEventTokenChecker()),ctSetCookie(e),setTimeout(function(){void 0!==ctPublic.force_alt_cookies&&("undefined"===ctPublic.force_alt_cookies||ctPublic.force_alt_cookies)||ctNoCookieAttachHiddenFieldsToForms(),void 0!==ctPublic.data__cookies_type&&"none"===ctPublic.data__cookies_type&&(ctAjaxSetupAddCleanTalkDataBeforeSendAjax(),ctAddWCMiddlewares());for(let e=0;e<document.forms.length;e++){var t,o,c=document.forms[e];ctCheckHiddenFieldsExclusions(document.forms[e],"visible_fields")||c.querySelector('input[name="wspsc_add_cart_submit"]')||c.querySelector('input[name="option"][value="com_vikrentcar"]')||c.querySelector('input[name="option"][value="com_vikbooking"]')||void 0!==document.forms[e].elements.apbct_visible_fields&&0<document.forms[e].elements.apbct_visible_fields.length||(c.querySelector('input[name="apbct_visible_fields"]')&&(t=c.querySelector('input[name="apbct_visible_fields"]'),c.removeChild(t)),(t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("id","apbct_visible_fields_"+e),t.setAttribute("name","apbct_visible_fields"),(o={})[0]=apbct_collect_visible_fields(c),t.value=btoa(JSON.stringify(o)),c.append(t),c.onsubmit_prev=c.onsubmit,c.ctFormIndex=e,c.onsubmit=function(e){"native"!==ctPublic.data__cookies_type&&void 0!==e.target.ctFormIndex&&apbct_visible_fields_set_cookie(apbct_collect_visible_fields(this),e.target.ctFormIndex),"none"===ctPublic.data__cookies_type&&isFormThatNeedCatchXhr(e.target)&&(window.XMLHttpRequest.prototype.send=function(e){var t="data%5Bct_no_cookie_hidden_field%5D="+getNoCookieData()+"&";defaultSend.call(this,t+e),setTimeout(()=>{window.XMLHttpRequest.prototype.send=defaultSend},0)}),e.target.onsubmit_prev instanceof Function&&!ctOnsubmitPrevCallExclude(e.target)&&(void 0!==e.target.classList&&e.target.classList.contains("brave_form_form")&&e.preventDefault(),setTimeout(function(){e.target.onsubmit_prev.call(e.target,e)},0))})}},1e3),document.querySelectorAll("[data-original-string]"));if((ctPublic.encodedEmailNodes=n).length)for(let e=0;e<n.length;++e)n[e].addEventListener("click",ctFillDecodedEmailHandler);for(let t of document.forms)"undefined"==typeof ctPublic||1!=+ctPublic.settings__forms__search_test||!("searchform"===t.getAttribute("id")||null!==t.getAttribute("class")&&-1!==t.getAttribute("class").indexOf("search-form")||null!==t.getAttribute("role")&&-1!==t.getAttribute("role").indexOf("search"))||t.querySelector("input.dgwt-wcas-search-input")||"hero-search-form"!==t.getAttribute("id")&&"hb-booking-search-form"!==t.getAttribute("class")&&(t.apbctSearchPrevOnsubmit=t.onsubmit,t.onsubmit=e=>ctSearchFormOnSubmitHandler(e,t));apbctCatchXmlHttpRequest(),new ApbctCollectingUserActivity,ctPublic.settings__sfw__anti_crawler&&checkBotDetectorExist()}function checkBotDetectorExist(){if(+ctPublic.settings__data__bot_detector_enabled){let e=setInterval(()=>{!localStorage.bot_detector_event_token||(ctSetCookie("apbct_bot_detector_exist","1","3600"),clearInterval(e))},500)}}function ctAddWCMiddlewares(){window.hasOwnProperty("wp")&&window.wp.hasOwnProperty("apiFetch")&&"function"==typeof window.wp.apiFetch.use&&window.wp.apiFetch.use((e,t)=>("object"==typeof e&&null!==e&&e.hasOwnProperty("data")&&e.hasOwnProperty("path")&&(e.data.hasOwnProperty("requests")&&0<e.data.requests.length&&e.data.requests[0].hasOwnProperty("path")&&"/wc/store/v1/cart/add-item"===e.data.requests[0].path&&(e.data.requests[0].data.ct_no_cookie_hidden_field=getNoCookieData(),e.data.requests[0].data.event_token=localStorage.getItem("bot_detector_event_token")),"/wc/store/v1/checkout"===e.path)&&(e.data.ct_no_cookie_hidden_field=getNoCookieData(),e.data.event_token=localStorage.getItem("bot_detector_event_token")),t(e)))}function apbctCatchXmlHttpRequest(){if(null!==document.querySelector("div.wfu_container")||null!==document.querySelector("#newAppointmentForm")||null!==document.querySelector(".booked-calendar-shortcode-wrap")){let e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(o){if(o&&"string"==typeof o&&(-1!==o.indexOf("action=wfu_ajax_action_ask_server")||-1!==o.indexOf("action=booked_add_appt"))){let e="",t=localStorage.getItem("bot_detector_event_token");try{t=JSON.parse(t)}catch{t=!1}null!==t&&!1!==t&&t.hasOwnProperty("value")&&""!==t.value&&(t=t.value,e+="&data%5Bct_bot_detector_event_token%5D="+t);var c=getNoCookieData();o+=e+="&data%5Bct_no_cookie_hidden_field%5D="+c}return e.apply(this,[o])}}}function ctAjaxSetupAddCleanTalkDataBeforeSendAjax(){let n=!1;"undefined"!=typeof jQuery&&"function"==typeof jQuery.ajaxSetup&&jQuery.ajaxSetup({beforeSend:function(e,t){let o=!1;if("string"==typeof t.data&&(-1!==t.data.indexOf("twt_cc_signup")&&(o="twt_cc_signup"),-1!==t.data.indexOf("action=mailpoet")&&(o="action=mailpoet"),-1!==t.data.indexOf("action=user_registration")&&-1!==t.data.indexOf("ur_frontend_form_nonce")&&(o="action=user_registration"),-1!==t.data.indexOf("action=happyforms_message")&&(o="action=happyforms_message"),-1!==t.data.indexOf("action=new_activity_comment"))&&(o="action=new_activity_comment"),"string"==typeof t.url&&-1!==t.url.indexOf("wc-ajax=add_to_cart")&&(o="wc-ajax=add_to_cart",null!==localStorage.getItem("bot_detector_event_token"))){n=localStorage.getItem("bot_detector_event_token");try{n=JSON.parse(n)}catch{n=!1}!1!==n&&n.hasOwnProperty("value")&&""!==n.value&&(n=n.value)}var c;o&&(c=getNoCookieData(),n="string"==typeof n?"data%5Bct_bot_detector_event_token%5D="+n+"&":"",t.data=(c="data%5Bct_no_cookie_hidden_field%5D="+c+"&")+n+t.data)}})}function ctOnsubmitPrevCallExclude(e){return!!e.classList.contains("hb-booking-search-form")}function ctSearchFormOnSubmitHandler(o,c){try{let e=c.querySelector('[name*="apbct_email_id__"]'),t=null;null!==e&&null!==e.value&&(t=e.value);var n,a,i,r=getCleanTalkStorageDataArray(),l=apbctLocalStorage.get("bot_detector_event_token");null===r&&null===e&&null===l||(o.preventDefault(),n=()=>{null!==e&&e.parentNode.removeChild(e),"function"==typeof c.apbctSearchPrevOnsubmit?c.apbctSearchPrevOnsubmit():HTMLFormElement.prototype.submit.call(c)},a=r,null!==t&&(a.apbct_search_form__honeypot_value=t),a.ct_bot_detector_event_token=l,"string"==typeof a.apbct_pixel_url&&-1!==a.apbct_pixel_url.indexOf("%3A")&&(a.apbct_pixel_url=decodeURIComponent(a.apbct_pixel_url)),void 0!==(i=JSON.stringify(a))&&0!==i.length?ctSetAlternativeCookie(i,{callback:n,onErrorCallback:n,forceAltCookies:!0}):n())}catch(e){console.warn("APBCT search form onsubmit handler error. "+e)}}function getJavascriptClientData(t=[]){let o={};o.ct_checked_emails=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_checked_emails"),o.ct_checked_emails_exist=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_checked_emails_exist"),o.ct_checkjs=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_checkjs"),o.ct_fkp_timestamp=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_fkp_timestamp"),o.ct_pointer_data=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_pointer_data"),o.ct_ps_timestamp=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_ps_timestamp"),o.ct_screen_info=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_screen_info"),o.ct_timezone=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_timezone");var e=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_mouse_moved"),c=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_has_scrolled"),n=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_cookies_type"),a=apbctLocalStorage.get("apbct_page_hits"),i=apbctSessionStorage.get("apbct_prev_referer"),r=apbctSessionStorage.get("apbct_site_referer"),l=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_js_errors"),s=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"apbct_pixel_url"),d=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"apbct_headless"),u=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct_bot_detector_frontend_data_log"),p=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_mouse_moved"),_=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_has_scrolled"),m=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct_cookies_type"),b=ctGetCookie(ctPublicFunctions.cookiePrefix+"apbct_pixel_url"),f=!!ctGetCookie(ctPublicFunctions.cookiePrefix+"apbct_headless");if(o.ct_mouse_moved=void 0!==e?e:p,o.ct_has_scrolled=void 0!==c?c:_,o.ct_cookies_type=void 0!==n?n:m,o.apbct_pixel_url=void 0!==s?s:b,o.apbct_headless=void 0!==d?d:f,o.ct_bot_detector_frontend_data_log=void 0!==u?u:"",o.apbct_pixel_url&&"string"==typeof o.apbct_pixel_url&&o.apbct_pixel_url.indexOf("%3A%2F")&&(o.apbct_pixel_url=decodeURIComponent(o.apbct_pixel_url)),o.apbct_page_hits=a,o.apbct_prev_referer=i,o.apbct_site_referer=r,o.apbct_ct_js_errors=l,o.apbct_pixel_url||(o.apbct_pixel_url=ctPublic.pixel__url),"object"==typeof t)for(let e=0;e<t.length;++e)"object"==typeof t[e][1]?o[t[e][1][0]]=t[e][1][1]:o[t[e][0]]=t[e][1];else console.log("APBCT JS ERROR: Collecting data type mismatch");return o=removeDoubleJsonEncoding(o),JSON.stringify(o)}function removeDoubleJsonEncoding(e){if("object"==typeof e)for(var t in e){var o;"object"==typeof e[t]&&(e[t]=removeDoubleJsonEncoding(e[t])),"string"==typeof e[t]&&null!==e[t].match(/^[\[{].*?[\]}]$/)&&"object"==typeof(o=JSON.parse(e[t]))&&(e[t]=o)}return e}function apbct_collect_visible_fields(e){let t=[],c="",n=0,a="",i=0,o=[];for(var r in e.elements)isNaN(+r)||(t[r]=e.elements[r]);return(t=t.filter(function(e){return-1===o.indexOf(e.getAttribute("name"))&&(-1===["radio","checkbox"].indexOf(e.getAttribute("type"))||(o.push(e.getAttribute("name")),!1))})).forEach(function(e,t,o){"submit"!==e.getAttribute("type")&&null!==e.getAttribute("name")&&"ct_checkjs"!==e.getAttribute("name")&&("none"!==getComputedStyle(e).display&&"hidden"!==getComputedStyle(e).visibility&&"0"!==getComputedStyle(e).opacity&&"hidden"!==e.getAttribute("type")||e.classList.contains("wp-editor-area")?(c+=" "+e.getAttribute("name"),n++):(a+=" "+e.getAttribute("name"),i++))}),a=a.trim(),{visible_fields:c=c.trim(),visible_fields_count:n,invisible_fields:a,invisible_fields_count:i}}function apbct_visible_fields_set_cookie(e,t){var o="object"==typeof e&&null!==e?e:{};if("native"===ctPublic.data__cookies_type)for(var c in o){if(10<c)return;ctSetCookie("apbct_visible_fields_"+(void 0!==t?t:c),JSON.stringify(o[c]))}else ctSetCookie("apbct_visible_fields",JSON.stringify(o))}function apbct_js_keys__set_input_value(t,e,o,c){if(0<document.querySelectorAll("[name^=ct_checkjs]").length){var n=document.querySelectorAll("[name^=ct_checkjs]");for(let e=0;e<n.length;e++)n[e].value=t.js_key}}function apbctGetScreenInfo(){return JSON.stringify({fullWidth:document.documentElement.scrollWidth,fullHeight:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),visibleWidth:document.documentElement.clientWidth,visibleHeight:document.documentElement.clientHeight})}function ctParseBlockMessage(e){let t="";void 0!==e.apbct&&(e=e.apbct).blocked&&(t=e.comment),(t=void 0!==e.data&&void 0!==(e=e.data).message?e.message:t)&&(document.dispatchEvent(new CustomEvent("apbctAjaxBockAlert",{bubbles:!0,detail:{message:t}})),cleantalkModal.loaded=t,cleantalkModal.open(),1==+e.stop_script)&&window.stop()}function ctSetPixelUrlLocalstorage(e){ctSetCookie("apbct_pixel_url",e)}function ctNoCookieConstructHiddenField(e){let t="hidden";"submit"===e&&(t="submit");var e="",o=getCleanTalkStorageDataArray(),o=JSON.stringify(o);return o="_ct_no_cookie_data_"+btoa(o),(e=document.createElement("input")).setAttribute("name","ct_no_cookie_hidden_field"),e.setAttribute("value",o),e.setAttribute("type",t),e.classList.add("apbct_special_field"),e.classList.add("ct_no_cookie_hidden_field"),e}function getCleanTalkStorageDataArray(){var e,t=apbctLocalStorage.getCleanTalkData(),o=apbctSessionStorage.getCleanTalkData();let c={typo:[]},n=(document.ctTypoData&&document.ctTypoData.data&&(c={typo:document.ctTypoData.data}),{collecting_user_activity_data:[]});return document.ctCollectingUserActivityData&&(e=JSON.parse(JSON.stringify(document.ctCollectingUserActivityData)),n={collecting_user_activity_data:e}),{...t,...o,...c,...n}}function ctGetPageForms(){var e=document.forms;return e||!1}function ctGetHiddenFieldExclusionsType(e){var t={no_cookie:0,visible_fields:0},o=((0==+ctPublic.data__visible_fields_required||"get"===e.method.toString().toLowerCase()&&0===e.querySelectorAll(".nf-form-content").length&&"twt_cc_signup"!==e.id||e.classList.contains("slp_search_form")||e.parentElement.classList.contains("mec-booking")||-1!==e.action.toString().indexOf("activehosted.com")||e.id&&"caspioform"===e.id||e.classList&&e.classList.contains("tinkoffPayRow")||e.classList&&e.classList.contains("give-form")||e.id&&"ult-forgot-password-form"===e.id||e.id&&-1!==e.id.toString().indexOf("calculatedfields")||e.id&&-1!==e.id.toString().indexOf("sac-form")||e.id&&-1!==e.id.toString().indexOf("cp_tslotsbooking_pform")||e.name&&-1!==e.name.toString().indexOf("cp_tslotsbooking_pform")||"https://epayment.epymtservice.com/epay.jhtml"===e.action.toString()||e.name&&-1!==e.name.toString().indexOf("tribe-bar-form")||e.id&&"ihf-login-form"===e.id||e.id&&"subscriberForm"===e.id&&-1!==e.action.toString().indexOf("actionType=update")||e.id&&"ihf-main-search-form"===e.id||e.id&&"frmCalc"===e.id||-1!==e.action.toString().indexOf("property-organizer-delete-saved-search-submit")||null!==e.querySelector('a[name="login"]'))&&(t.visible_fields=1),e.parentNode);return(o&&o.classList.contains("proinput")||"options"===e.name&&e.classList.contains("asp-fss-flex"))&&(t.no_cookie=1),e&&e.classList.contains("woocommerce-form-login")&&(t.visible_fields=1,t.no_cookie=1),t}function ctCheckHiddenFieldsExclusions(e,t){var o="string"==typeof e.action?e.action:"";return!!Boolean(e.querySelector("fieldset.asl_sett_scroll"))||!!e.classList.contains("swpf-instant-filtering")||-1!==o.indexOf("secure.payu.com")||-1!==o.indexOf("hsforms")||-1!==o.indexOf("secureinternetbank.com")||"string"==typeof t&&-1!==["visible_fields","no_cookie"].indexOf(t)&&1===ctGetHiddenFieldExclusionsType(e)[t]}function ctNoCookieAttachHiddenFieldsToForms(){if("none"===ctPublic.data__cookies_type){var t=ctGetPageForms();if(t)for(let e=0;e<t.length;e++)if(!ctCheckHiddenFieldsExclusions(document.forms[e],"no_cookie")&&(null===document.forms[e].getAttribute("method")||"post"===document.forms[e].getAttribute("method").toLowerCase())){var o=t[e].querySelectorAll(".ct_no_cookie_hidden_field");for(let e=0;e<o.length;e++)o[e].outerHTML="";document.forms[e].append(ctNoCookieConstructHiddenField())}}}ctPublic.data__key_is_ok&&(apbct_attach_event_handler(document,"mousemove",ctFunctionMouseMove),apbct_attach_event_handler(document,"mousedown",ctFunctionFirstKey),apbct_attach_event_handler(document,"keydown",ctFunctionFirstKey),apbct_attach_event_handler(document,"scroll",ctSetHasScrolled)),ctPublic.data__key_is_ok&&("loading"!==document.readyState?apbct_ready():apbct_attach_event_handler(document,"DOMContentLoaded",apbct_ready),apbctLocalStorage.set("ct_checkjs",ctPublic.ct_checkjs_key,!0));let defaultFetch=window.fetch,defaultSend=XMLHttpRequest.prototype.send;function checkFormsExistForCatching(){setTimeout(function(){isFormThatNeedCatch()&&(window.fetch=function(...e){var t;return e&&e[0]&&"function"==typeof e[0].includes&&(e[0].includes("/wp-json/metform/")||ctPublicFunctions._rest_url&&(()=>{try{return e[0].includes(new URL(ctPublicFunctions._rest_url).pathname+"metform/")}catch(e){return!1}})())&&(t=getNoCookieData(),e)&&e[1]&&e[1].body&&e[1].body.append("ct_no_cookie_hidden_field",t),defaultFetch.apply(window,e)})},1e3)}function isFormThatNeedCatch(){var e=["metform-form-content"];let o=!1;for(let t of document.forms)e.forEach(function(e){t.classList.contains(e)&&(o=!0)});return o}function isFormThatNeedCatchXhr(e){return null==document.querySelector("div.elementor-widget[title='Login/Signup']")&&!(!e||!e.action||-1===e.action.toString().indexOf("mailpoet_subscription_form"))}function getNoCookieData(){var e=apbctLocalStorage.getCleanTalkData(),t=apbctSessionStorage.getCleanTalkData(),e={...e,...t},e=JSON.stringify(e);return"_ct_no_cookie_data_"+btoa(e)}function apbctWriteReferrersToSessionStorage(){var e=apbctSessionStorage.get("apbct_session_current_page");!1!==e&&document.location.href!==e&&apbctSessionStorage.set("apbct_prev_referer",e,!1),apbctSessionStorage.set("apbct_session_current_page",document.location.href,!1)}function apbctCheckAddToCartByGet(){document.querySelectorAll("a.add_to_cart_button:not(.product_type_variable):not(.wc-interactive)").forEach(c=>{c.addEventListener("click",function(e){let t=c.getAttribute("href");var o=apbctLocalStorage.get("bot_detector_event_token");o&&(-1===t.indexOf("?")?t+="?":t+="&",t+="ct_bot_detector_event_token="+o,c.setAttribute("href",t))})})}"loading"!==document.readyState?checkFormsExistForCatching():apbct_attach_event_handler(document,"DOMContentLoaded",checkFormsExistForCatching);let cleantalkModal={loaded:!1,loading:!1,opened:!1,opening:!1,ignoreURLConvert:!1,load:function(e){var t;this.loaded||(this.loading=!0,t=function(e,t,o,c){cleantalkModal.loading=!1,cleantalkModal.loaded=e,document.dispatchEvent(new CustomEvent("cleantalkModalContentLoaded",{bubbles:!0}))},("function"==typeof apbct_admin_sendAJAX?apbct_admin_sendAJAX:apbct_public_sendAJAX)({action:e},{callback:t,notJson:!0}))},open:function(){function e(){let e="";for(var t in this.styles)e+=t+":"+this.styles[t]+";";return e}var t={styles:{"z-index":"9999999999",position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",display:"flex","justify-content":"center","align-items":"center"},toString:e},o={styles:{position:"relative",padding:"30px",background:"#FFF",border:"1px solid rgba(0,0,0,0.75)","border-radius":"4px","box-shadow":"7px 7px 5px 0px rgba(50,50,50,0.75)"},toString:e},c={styles:{position:"absolute",background:"#FFF",width:"20px",height:"20px",border:"2px solid rgba(0,0,0,0.75)","border-radius":"15px",cursor:"pointer",top:"-8px",right:"-8px","box-sizing":"content-box"},toString:e},n={styles:{content:'""',display:"block",position:"absolute",background:"#000","border-radius":"1px",width:"2px",height:"16px",top:"2px",left:"9px",transform:"rotate(45deg)"},toString:e},a={styles:{content:'""',display:"block",position:"absolute",background:"#000","border-radius":"1px",width:"2px",height:"16px",top:"2px",left:"9px",transform:"rotate(-45deg)"},toString:e},i={styles:{overflow:"hidden"},toString:e},r=document.createElement("style"),i=(r.setAttribute("id","cleantalk-modal-styles"),r.innerHTML="body.cleantalk-modal-opened{"+i+"}",r.innerHTML+="#cleantalk-modal-overlay{"+t+"}",r.innerHTML+="#cleantalk-modal-close{"+c+"}",r.innerHTML+="#cleantalk-modal-close:before{"+n+"}",r.innerHTML+="#cleantalk-modal-close:after{"+a+"}",document.body.append(r),document.createElement("div")),t=(i.setAttribute("id","cleantalk-modal-overlay"),document.body.append(i),document.body.classList.add("cleantalk-modal-opened"),document.createElement("div")),c=(t.setAttribute("id","cleantalk-modal-inner"),t.setAttribute("style",o),i.append(t),document.createElement("div")),n=(c.setAttribute("id","cleantalk-modal-close"),t.append(c),document.createElement("div"));this.loaded?(a=/(https?:\/\/[^\s]+)/g,/.*\/inc/g.test(this.loaded)||this.ignoreURLConvert?n.innerHTML=this.loaded:n.innerHTML=this.loaded.replace(a,'<a href="$1" target="_blank">$1</a>')):(n.innerHTML="Loading...",this.load("get_options_template")),n.setAttribute("id","cleantalk-modal-content"),t.append(n),this.opened=!0},close:function(){document.body.classList.remove("cleantalk-modal-opened"),document.getElementById("cleantalk-modal-overlay").remove(),document.getElementById("cleantalk-modal-styles").remove(),document.dispatchEvent(new CustomEvent("cleantalkModalClosed",{bubbles:!0}))}};function closeAllPopupTRP(){var e=document.querySelectorAll(".apbct-real-user-popup.visible");0<e.length&&e.forEach(e=>{e.classList.remove("visible")})}function ctProtectExternal(){for(let e=0;e<document.forms.length;e++)if(void 0===document.forms[e].cleantalk_hidden_action&&void 0===document.forms[e].cleantalk_hidden_method){var t,o=document.forms[e];if(!formIsExclusion(o))if(isIntegratedForm(o))apbctProcessExternalForm(o,e,document);else if(void 0!==o.dataset.mailingListId||"string"==typeof o.action&&-1!==o.action.indexOf("webto.salesforce.com")||"string"==typeof o.action&&o.querySelector('[href*="activecampaign"]')||"string"==typeof o.action&&-1!==o.action.indexOf("hsforms.com")&&o.getAttribute("data-hs-cf-bound"))apbctProcessExternalFormByFakeButton(o,e,document);else if("string"==typeof o.action&&(-1!==o.action.indexOf("http://")||-1!==o.action.indexOf("https://"))){let e=o.action.split("//");(e=e[1].split("/"))[0].toLowerCase()!==location.hostname.toLowerCase()&&((t=document.createElement("input")).name="cleantalk_hidden_action",t.value=o.action,t.type="hidden",o.appendChild(t),(t=document.createElement("input")).name="cleantalk_hidden_method",t.value=o.method,t.type="hidden",o.method="POST",o.appendChild(t),o.action=document.location)}}apbctProcessIframes(),ctStartFieldsListening()}function formIsExclusion(c){let n=!1;try{c.parentElement&&0<c.parentElement.classList.length&&-1!==c.parentElement.classList[0].indexOf("mewtwo")&&(n=!0),null!==c.getAttribute("action")&&["paypal.com/cgi-bin/webscr"].forEach(function(e){-1!==c.getAttribute("action").indexOf(e)&&(n=!0)}),["give-form","frmCalc","ihf-contact-request-form","wpforms"].forEach(function(e){var t=c.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(n=!0)}),["search-form","hs-form","ihc-form-create-edit","nf-form-content","elementor-form","wpforms","et_pb_searchform"].forEach(function(e){let t="";var o=t=c.getAttribute("class")?c.getAttribute("class"):apbctGetFormClass(c,e);null!=o&&-1!==o.indexOf(e)&&(n=!c.getAttribute("data-hs-cf-bound"))}),["search"].forEach(function(e){var t=c.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(n=!0)})}catch(e){console.table("APBCT ERROR: formIsExclusion() - ",e)}return n}function apbctGetFormClass(e,t){if("object"==typeof e&&e.querySelector("."+t))return t}function apbctProcessIframes(){var o=document.getElementsByTagName("iframe");if(0<o.length)for(let t=0;t<o.length;t++)if(null!=o[t].contentDocument){var c=o[t].contentDocument.forms;if(0!==c.length)for(let e=0;e<c.length;e++){var n=c[e];formIsExclusion(n)||apbctProcessExternalForm(n,e,o[t].contentDocument)}}}function apbctProcessExternalForm(e,t,o){var c=document.createElement("i"),c=(c.className="cleantalk_placeholder",c.style="display: none",e.parentElement.insertBefore(c,e),e.previousSibling),n=e.outerHTML,a=e,e=(e.parentElement.removeChild(e),document.createElement("div")),n=(e.innerHTML=n,c.after(e.firstElementChild),document.createElement("input"));n.name="action",n.value="cleantalk_force_ajax_check",n.type="hidden";let i=o.forms[t],r=(i.appendChild(n),i.apbctPrev=c,i.apbctFormOriginal=a,!1);void 0!==i.classList&&["newsletterform","ml-block-form"].forEach(function(e){i.classList.contains(e)&&(r=e)});e=null;r?null!=(e=i.querySelector('button[type="submit"]'))&&e.addEventListener("click",function(e){e.preventDefault(),sendAjaxCheckingFormData(i)}):o.forms[t].onsubmit=function(e){e.preventDefault(),sendAjaxCheckingFormData(e.currentTarget)}}function apbctProcessExternalFormByFakeButton(e,t,o){var c,n,a,i=e.querySelector('[type="submit"]'),e=e.querySelector('[type="submit"]').form.onsubmit;i&&(c=i.parentElement,n=i.outerHTML,i.remove(),(a=document.createElement("div")).innerHTML=n,c.appendChild(a.firstElementChild),(n=document.createElement("input")).name="action",n.value="cleantalk_force_ajax_check",n.type="hidden",(a=o.forms[t]).appendChild(n),a.apbctParent=c,a.submitButtonOriginal=i,a.onsubmitOriginal=e,o.forms[t].onsubmit=function(e){e.preventDefault(),apbctMoosendSpinnerToggle(e.currentTarget),sendAjaxCheckingFormData(e.currentTarget)})}function apbctMoosendSpinnerToggle(e){var t,e=e.querySelector('button[type="submit"]');e&&(t=e.querySelector("i"),e=e.querySelector("span"),t)&&e&&(1==t.style.zIndex?(e.style.opacity=1,t.style.zIndex=-1,t.style.opacity=0):(e.style.opacity=0,t.style.zIndex=1,t.style.opacity=1))}function apbctReplaceInputsValuesFromOtherForm(o,e){var t=o.querySelectorAll("button, input, textarea, select");let c=e.querySelectorAll("button, input, textarea, select");t.forEach(t=>{c.forEach(e=>{(-1!==o.outerHTML.indexOf("list-manage.com/subscribe")&&t.id===e.id||(-1!==o.outerHTML.indexOf('action="https://www.kulahub.net')||isFormHasDiviRedirect(o)||-1!==o.outerHTML.indexOf('class="et_pb_contact_form')||-1!==o.outerHTML.indexOf('action="https://api.kit.com')||-1!==o.outerHTML.indexOf("activehosted.com")||-1!==o.outerHTML.indexOf('action="https://crm.zoho.com'))&&t.name===e.name||t.outerHTML===e.outerHTML)&&("checkbox"===e.type||"radio"===e.type?e.checked=apbctVal(t):e.value=apbctVal(t))})})}document.addEventListener("click",function(e){!e.target||"cleantalk-modal-overlay"!==e.target.id&&"cleantalk-modal-close"!==e.target.id||cleantalkModal.close()}),document.addEventListener("cleantalkModalContentLoaded",function(e){cleantalkModal.opened&&cleantalkModal.loaded&&(document.getElementById("cleantalk-modal-content").innerHTML=cleantalkModal.loaded)}),document.addEventListener("DOMContentLoaded",function(){let s=void 0,d=!1;if("undefined"==typeof ctPublic&&"undefined"==typeof ctTrpAdminLocalize||void 0===(s="undefined"!=typeof ctPublic&&ctPublic.theRealPerson?ctPublic.theRealPerson:s)&&"undefined"!=typeof ctTrpAdminLocalize&&ctTrpAdminLocalize.theRealPerson&&(s=ctTrpAdminLocalize.theRealPerson,d=!0),s){let e='.apbct-trp *[class*="comment-author"]';document.querySelector(".apbct-trp .comment-author .comment-author-link")&&(e='.apbct-trp *[class*="comment-author-link"]');var t=document.querySelectorAll(e+',.apbct-trp *[class*="review__author"],.apbct-trp td[class*="column-author"] > strong');0!==t.length&&(t.forEach((e,t)=>{var o,c,n,a,i,r,l;"undefined"==typeof pagenow&&e.parentElement.className.indexOf("group")<0&&"DIV"!=e.tagName||((o=document.createElement("div")).setAttribute("class","apbct-real-user-badge"),(c=document.createElement("img")).setAttribute("src",s.imgPersonUrl),c.setAttribute("class","apbct-real-user-popup-img"),(n=document.createElement("div")).setAttribute("class","apbct-real-user-popup"),(a=document.createElement("p")).setAttribute("class","apbct-real-user-popup-header"),a.append(s.phrases.trpHeading),(i=document.createElement("div")).setAttribute("class","apbct-real-user-popup-content_row"),(r=document.createElement("span")).append(s.phrases.trpContent1+" "),r.append(s.phrases.trpContent2),d&&((l=document.createElement("a")).setAttribute("href",s.trpContentLink),l.setAttribute("target","_blank"),l.text=s.phrases.trpContentLearnMore,r.append(" "),r.append(l)),i.append(r),n.append(a,i),o.append(c),e.append(o),e.append(n))}),document.querySelectorAll(".apbct-real-user-badge").forEach(o=>{let c=void 0,e=(this.body.addEventListener("click",function(e){-1==e.target.className.indexOf("apbct-real-user")&&-1==e.target.parentElement.className.indexOf("apbct-real-user")&&closeAllPopupTRP()}),o.addEventListener("click",function(){var e=this.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.toggle("visible")}),o.addEventListener("mouseenter",function(){closeAllPopupTRP();var e=this.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.add("visible")}),o.addEventListener("mouseleave",function(){c=setTimeout(()=>{var e=this.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},1e3)}),o.nextElementSibling);e.addEventListener("mouseenter",function(){clearTimeout(c),e.classList.add("visible")}),e.addEventListener("mouseleave",function(){c=setTimeout(()=>{e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},1e3)}),o.addEventListener("touchend",function(){c=setTimeout(()=>{var e=this.nextElementSibling,t=window.getSelection();e&&t&&e.classList.contains("apbct-real-user-popup")&&0===t.toString().length?e.classList.remove("visible"):(clearTimeout(c),document.addEventListener("selectionchange",function e(){var t=window.getSelection();t&&0===t.toString().length&&(c=setTimeout(()=>{var e=o.nextElementSibling;e&&e.classList.contains("apbct-real-user-popup")&&e.classList.remove("visible")},3e3),document.removeEventListener("selectionchange",e))}))},3e3)})}))}}),ctProtectOutsideFunctionalClearLocalStorage(),window.addEventListener("load",function(){+ctPublic.settings__forms__check_external&&(setTimeout(function(){ctProtectExternal(),catchDynamicRenderedForm(),catchNextendSocialLoginForm(),ctProtectOutsideFunctionalOnTagsType("div"),ctProtectOutsideFunctionalOnTagsType("iframe")},2e3),ctProtectKlaviyoForm())});let ctProtectOutsideFunctionalCheckPerformed;function ctProtectOutsideFunctionalOnTagsType(e){e=document.querySelectorAll(e);0<e.length&&e.forEach(function(e){var t,o=ctProtectOutsideFunctionalIsTagIntegrated(e);!1!==o&&(o="apbct_outside_functional_protected_tags__"+o,!1===(t=!1===(t=!1===(t=""!==e.id&&e.id)&&""!==e.className?e.className:t)&&""!==e.src?e.src.substring(0,50):t)||!1!==apbctLocalStorage.get(o)&&0<apbctLocalStorage.get(o).length&&-1!==apbctLocalStorage.get(o)[0].indexOf(t)||ctProtectOutsideFunctionalHandler(e,o,t))})}function ctProtectOutsideFunctionalIsTagIntegrated(e){if(void 0!==e.tagName){if("IFRAME"===e.tagName&&(-1!==e.src.indexOf("form.typeform.com")||-1!==e.src.indexOf("forms.zohopublic.com")||-1!==e.src.indexOf("link.surepathconnect.com")||-1!==e.src.indexOf("hello.dubsado.com")||e.classList.contains("hs-form-iframe")||-1!==e.src.indexOf("facebook.com")&&-1!==e.src.indexOf("plugins/comments.php")||-1!==e.id.indexOf("chatway_widget_app")))return e.tagName;if("DIV"===e.tagName&&(-1!==e.className.indexOf("Window__Content-sc")||-1!==e.className.indexOf("WidgetBackground__Content-sc")))return e.tagName}return!1}function ctProtectOutsideFunctionalHandler(t,o,c){let n=null;if(void 0!==t.parentNode){null!=(n=t.parentNode).style&&void 0!==n.style.position&&""!==n.style.position?n.style.position=null:n.style.position="relative",n.appendChild(ctProtectOutsideFunctionalGenerateCover());let e=apbctLocalStorage.get(o);!1===e&&(e=[]),c&&(e.push(c),apbctLocalStorage.set(o,e))}}function ctProtectOutsideFunctionalClearLocalStorage(){apbctLocalStorage.set("apbct_outside_functional_protected_tags__DIV",[]),apbctLocalStorage.set("apbct_outside_functional_protected_tags__IFRAME",[])}function ctProtectOutsideFunctionalGenerateCover(){var e=document.createElement("div");return e.style.width="100%",e.style.height="100%",e.style.background="black",e.style.opacity=0,e.style.position="absolute",e.style.top=0,e.style.zIndex=9999,e.setAttribute("name","apbct_cover"),e.onclick=function(t){if(void 0===ctProtectOutsideFunctionalCheckPerformed){var t=t.currentTarget,o=(t.style.opacity=.5,document.createElement("div")),c=document.createElement("div"),n=document.createElement("span");o.className="apbct-iframe-preloader",c.className="apbct-iframe-preloader-spin",n.innerText="CleanTalk Anti-Spam checking data..",n.className="apbct-iframe-preloader-text",o.appendChild(c),t.appendChild(o),t.appendChild(n);let e=null;e=e||apbctLocalStorage.get("bot_detector_event_token"),apbct_public_sendAJAX({action:"cleantalk_outside_iframe_ajax_check",ct_no_cookie_hidden_field:getNoCookieData(),ct_bot_detector_event_token:e},{async:!1,callback:function(e){let t=!(ctProtectOutsideFunctionalCheckPerformed=!0),o=("object"!=typeof e&&(console.warn("APBCT outside functional check error, skip check."),t=!0),"Blocked by CleanTalk Anti-Spam");void 0!==e&&void 0!==e.apbct&&void 0!==e.apbct.comment&&(o=e.apbct.comment),"object"==typeof e&&void 0!==e.apbct&&!1===e.apbct.blocked||"object"==typeof e&&void 0!==e.success&&!0===e.success||t?document.querySelectorAll('div[name="apbct_cover"]').forEach(function(e){e.remove()}):(document.querySelectorAll(".apbct-iframe-preloader-text").forEach(e=>{e.innerText=o}),document.querySelectorAll("div.apbct-iframe-preloader").forEach(e=>{e.remove()}))}})}},e}function ctProtectKlaviyoForm(){if(document.querySelector('link[rel="dns-prefetch"][href="//static.klaviyo.com"]')){let t=setInterval(()=>{var e=document.querySelectorAll("form.klaviyo-form");e.length&&(clearInterval(t),e.forEach((e,t)=>{apbctProcessExternalFormKlaviyo(e,t,document)}))},500)}}function apbctProcessExternalFormKlaviyo(t,e,o){var c,n=t.querySelector('button[type="button"].needsclick');n&&(n.disabled=!0,(c=document.createElement("input")).name="action",c.value="cleantalk_force_ajax_check",c.type="hidden",t.appendChild(c),(c=document.createElement("div")).id="apbct-klaviyo-cover",c.style.width="100%",c.style.height="100%",c.style.background="black",c.style.opacity=0,c.style.position="absolute",c.style.top=0,c.style.cursor="pointer",c.onclick=function(e){sendAjaxCheckingFormData(t)},n.parentNode.style.position="relative",n.parentNode.appendChild(c))}function catchNextendSocialLoginForm(){var e=document.getElementById("nsl-custom-login-form-main");e&&blockBtnNextendSocialLogin(e)}function blockBtnNextendSocialLogin(e){var t=e.querySelectorAll(".nsl-container-buttons a"),e=e.querySelectorAll('a[data-plugin="nsl"] .nsl-button');t.forEach(e=>{e.setAttribute("data-oauth-login-blocked","true"),e.addEventListener("click",e=>{e.preventDefault()})}),e.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),ctCheckAjax(t)})})}function allowAjaxNextendSocialLogin(e){e.parentElement.setAttribute("data-oauth-login-blocked","false"),e.parentElement.click()}function forbiddenAjaxNextendSocialLogin(e,t){var o,e=e.parentElement;"false"==e.getAttribute("data-oauth-login-blocked")&&e.setAttribute("data-oauth-login-blocked","true"),document.querySelector(".ct-forbidden-msg")||((o=document.createElement("div")).className="ct-forbidden-msg",o.style.background="red",o.style.color="white",o.style.padding="5px",o.innerHTML=t,e.insertAdjacentElement("beforebegin",o))}function ctCheckAjax(t){apbct_public_sendAJAX({action:"cleantalk_nsl_ajax_check",ct_no_cookie_hidden_field:document.getElementsByName("ct_no_cookie_hidden_field")[0].value},{async:!1,callback:function(e){!1===e.apbct.blocked?allowAjaxNextendSocialLogin(t):forbiddenAjaxNextendSocialLogin(t,e.apbct.comment)}})}function isIntegratedForm(e){var t="string"==typeof e.action?e.action:"",o=null!==e.getAttribute("id")?e.getAttribute("id"):"",c="string"==typeof e.className?e.className:"";return!!(-1!==t.indexOf("app.convertkit.com")||-1!==t.indexOf("app.kit.com")||-1!==t.indexOf("api.kit.com")||void 0!==e.firstChild.classList&&e.firstChild.classList.contains("cb-form-group")||-1!==t.indexOf("mailerlite.com")||-1!==t.indexOf("colcolmail.co.uk")||-1!==t.indexOf("paypal.com")||-1!==t.indexOf("infusionsoft.com")||-1!==t.indexOf("secure2.convio.net")||-1!==t.indexOf("hookb.in")||-1!==t.indexOf("external.url")||-1!==t.indexOf("tp.media")||-1!==t.indexOf("flodesk.com")||-1!==t.indexOf("sendfox.com")||-1!==t.indexOf("aweber.com")||-1!==t.indexOf("secure.payu.com")||-1!==t.indexOf("mautic")||-1!==o.indexOf("mauticform_")||-1!==o.indexOf("ihf-contact-request-form")||-1!==t.indexOf("crm.zoho.com")||-1!==o.indexOf("delivra-external-form")||-1!==t.indexOf("eloqua.com")||-1!==t.indexOf("kulahub.net")||isFormHasDiviRedirect(e)||-1!==t.indexOf("eocampaign1.com")||-1!==t.indexOf("wufoo.com")||-1!==t.indexOf("activehosted.com")||-1!==t.indexOf("publisher.copernica.com")||-1!==t.indexOf("whatsapp.com")&&-1!==c.indexOf("chaty")||void 0!==e.classList&&e.classList.contains("sp-element-container")||apbctIsFormInDiv(e,"b24-form")||-1!==t.indexOf("list-manage.com"))}function isFormHasDiviRedirect(e){let t=!1;var o=document.querySelector('div[id^="et_pb_contact_form"]');return t="object"==typeof e&&null!==e&&null!==o&&o.hasAttribute("data-redirect_url")&&""!==o.getAttribute("data-redirect_url")&&null!==o.querySelector('form[class^="et_pb_contact_form"]')?e===o.querySelector('form[class^="et_pb_contact_form"]'):t}function sendAjaxCheckingFormData(m){var e={};e[0]=apbct_collect_visible_fields(m),apbct_visible_fields_set_cookie(e);let o={ct_bot_detector_event_token:apbctLocalStorage.get("bot_detector_event_token")};e=m.elements;(e=Array.prototype.slice.call(e)).forEach(function(e,t){""===e.name?o["input_"+t]=e.value:o[e.name]=e.value}),apbct_public_sendAJAX(o,{async:!1,callback:function(e,t,o,c){apbctMoosendSpinnerToggle(m);var n=m.hasAttribute("action")&&-1!==m.getAttribute("action").indexOf("hsforms");if(void 0===e.apbct&&void 0===e.data||void 0!==e.apbct&&!+e.apbct.blocked){for(var a of m.querySelectorAll('input[name="apbct_visible_fields"]'))a.remove();for(var i of m.querySelectorAll('input[value="cleantalk_force_ajax_check"]'))i.remove();for(var r of m.querySelectorAll('input[name="ct_no_cookie_hidden_field"]'))r.remove();if(void 0!==m.classList&&m.classList.contains("klaviyo-form"))return(d=document.getElementById("apbct-klaviyo-cover"))&&d.remove(),void((d=m.querySelector('button[type="button"].needsclick'))&&(d.disabled=!1,d.click()));if(void 0!==m.dataset.mailingListId){let e=m.querySelector('[type="submit"]');return e.remove(),m.apbctParent.appendChild(m.submitButtonOriginal),void(e=m.querySelector('[type="submit"]')).click()}if(m.hasAttribute("action")&&-1!==m.getAttribute("action").indexOf("webto.salesforce.com")){let e=m.querySelector('[type="submit"]');return e.remove(),m.apbctParent.appendChild(m.submitButtonOriginal),m.onsubmit=m.onsubmitOriginal,void(e=m.querySelector('[type="submit"]')).click()}if(n){let e=m.querySelector('[type="submit"]');return e.remove(),m.apbctParent.appendChild(m.submitButtonOriginal),m.onsubmit=m.onsubmitOriginal,void(e=m.querySelector('[type="submit"]')).click()}var l,s,d=m,u=(m.parentElement.removeChild(m),m.apbctPrev),p=m.apbctFormOriginal,_=apbctExternalFormsRestartRequired(p);apbctReplaceInputsValuesFromOtherForm(d,p),u.after(p);for(l of p.querySelectorAll('input[name="apbct_visible_fields"]'))l.remove();for(s of p.querySelectorAll('input[value="cleantalk_force_ajax_check"]'))s.remove();let e=p.querySelectorAll("button[type=submit]");if(0!==e.length)return e[0].click(),void(_&&setTimeout(function(){ctProtectExternal()},1500));if(0!==(e=p.querySelectorAll("input[type=submit]")).length)return e[0].click(),void(_&&setTimeout(function(){ctProtectExternal()},1500));if(0!==(e=p.querySelectorAll('button[data-element="submit"]')).length)return void e[0].click();if(0!==(e=p.querySelectorAll("button#ck_subscribe_button")).length)return void e[0].click();0!==(e=p.querySelectorAll('input[type="image"][name="submit"]')).length&&e[0].click()}(void 0!==e.apbct&&+e.apbct.blocked||void 0!==e.data&&void 0!==e.data.message)&&(ctParseBlockMessage(e),n)&&setTimeout(function(){document.location.reload()},3e3)}})}function apbctExternalFormsRestartRequired(e){return e&&"string"==typeof e.id&&-1!==e.id.indexOf("mautic")||"string"==typeof e.action&&-1!==e.action.indexOf("list-manage.com/subscribe")}function catchDynamicRenderedForm(){catchDynamicRenderedFormHandler(document.getElementsByTagName("form"));var t=document.getElementsByTagName("iframe");if(0<t.length)for(let e=0;e<t.length;e++)if(null!=t[e].contentDocument){var o=t[e].contentDocument.forms;if(0===o.length)return;catchDynamicRenderedFormHandler(o,t[e].contentDocument)}}function catchDynamicRenderedFormHandler(e,t=document){var o,c,n=[];for(o of e){var a=o.getAttribute("id");a&&-1!==a.indexOf("hsForm")&&n.push(a),a&&-1!==a.indexOf("createuser")&&void 0!==o.classList&&o.classList.contains("ihc-form-create-edit")&&n.push(a)}for(c of n){var i=t.getElementById(c);i.apbct_external_onsubmit_prev=i.onsubmit,i.onsubmit=sendAjaxCheckingDynamicFormData}}function sendAjaxCheckingDynamicFormData(a){a.preventDefault(),a.stopImmediatePropagation();let i=a;a=a.target;var e=document.createElement("input"),e=(e.name="action",e.value="cleantalk_force_ajax_check",e.type="hidden",a.appendChild(e),{});e[0]=apbct_collect_visible_fields(a),apbct_visible_fields_set_cookie(e),a.append(ctNoCookieConstructHiddenField("hidden"));let o={};e=a.elements;(e=Array.prototype.slice.call(e)).forEach(function(e,t){""===e.name?o["input_"+t]=e.value:o[e.name]=e.value}),apbct_public_sendAJAX(o,{async:!1,callback:function(e){if(void 0===e.apbct||!+e.apbct.blocked){a.onsubmit=null;for(var t of a.querySelectorAll('input[name="apbct_visible_fields"]'))t.remove();for(var o of a.querySelectorAll('input[value="cleantalk_force_ajax_check"]'))o.remove();for(var c of a.querySelectorAll('input[name="ct_no_cookie_hidden_field"]'))c.remove();a.apbct_external_onsubmit_prev instanceof Function&&(n=setTimeout(function(){a.apbct_external_onsubmit_prev.call(a,i)},500),clearTimeout(n));var n=a.querySelector('input[type="submit"]');if(n)return void n.click()}void 0!==e.apbct&&+e.apbct.blocked&&ctParseBlockMessage(e)}})}function apbctVal(e){return e.options&&e.multiple?e.options.filter(e=>e.selected).map(e=>e.value):"checkbox"===e.type||"radio"===e.type?e.checked||null:e.value}function apbctIsFormInDiv(e,t){let o=e.parentElement;for(;o;){if(o.classList.contains(t))return!0;o=o.parentElement}return!1}
>>>>>>> tag-59
//# sourceMappingURL=apbct-public-bundle_ext-protection.min.js.map
>>>>>>> 6.57-tag
