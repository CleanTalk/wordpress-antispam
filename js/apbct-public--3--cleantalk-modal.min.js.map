{"version":3,"file":"apbct-public--3--cleantalk-modal.min.js","sources":["apbct-public--3--cleantalk-modal.js"],"sourcesContent":["/* Cleantalk Modal object */\r\nlet cleantalkModal = {\r\n\r\n    // Flags\r\n    loaded: false,\r\n    loading: false,\r\n    opened: false,\r\n    opening: false,\r\n    ignoreURLConvert: false,\r\n\r\n    // Methods\r\n    load: function( action ) {\r\n        if ( ! this.loaded ) {\r\n            this.loading = true;\r\n            let callback = function( result, data, params, obj ) {\r\n                cleantalkModal.loading = false;\r\n                cleantalkModal.loaded = result;\r\n                document.dispatchEvent(\r\n                    new CustomEvent( 'cleantalkModalContentLoaded', {\r\n                        bubbles: true,\r\n                    } ),\r\n                );\r\n            };\r\n            // eslint-disable-next-line camelcase\r\n            if ( typeof apbct_admin_sendAJAX === 'function' ) {\r\n                apbct_admin_sendAJAX( {'action': action}, {'callback': callback, 'notJson': true} );\r\n            } else {\r\n                apbct_public_sendAJAX( {'action': action}, {'callback': callback, 'notJson': true} );\r\n            }\r\n        }\r\n    },\r\n\r\n    open: function() {\r\n        /* Cleantalk Modal CSS start */\r\n        let renderCss = function() {\r\n            let cssStr = '';\r\n            // eslint-disable-next-line guard-for-in\r\n            for ( const key in this.styles ) {\r\n                cssStr += key + ':' + this.styles[key] + ';';\r\n            }\r\n            return cssStr;\r\n        };\r\n        let overlayCss = {\r\n            styles: {\r\n                'z-index': '9999999999',\r\n                'position': 'fixed',\r\n                'top': '0',\r\n                'left': '0',\r\n                'width': '100%',\r\n                'height': '100%',\r\n                'background': 'rgba(0,0,0,0.5)',\r\n                'display': 'flex',\r\n                'justify-content': 'center',\r\n                'align-items': 'center',\r\n            },\r\n            toString: renderCss,\r\n        };\r\n        let innerCss = {\r\n            styles: {\r\n                'position': 'relative',\r\n                'padding': '30px',\r\n                'background': '#FFF',\r\n                'border': '1px solid rgba(0,0,0,0.75)',\r\n                'border-radius': '4px',\r\n                'box-shadow': '7px 7px 5px 0px rgba(50,50,50,0.75)',\r\n            },\r\n            toString: renderCss,\r\n        };\r\n        let closeCss = {\r\n            styles: {\r\n                'position': 'absolute',\r\n                'background': '#FFF',\r\n                'width': '20px',\r\n                'height': '20px',\r\n                'border': '2px solid rgba(0,0,0,0.75)',\r\n                'border-radius': '15px',\r\n                'cursor': 'pointer',\r\n                'top': '-8px',\r\n                'right': '-8px',\r\n                'box-sizing': 'content-box',\r\n            },\r\n            toString: renderCss,\r\n        };\r\n        let closeCssBefore = {\r\n            styles: {\r\n                'content': '\"\"',\r\n                'display': 'block',\r\n                'position': 'absolute',\r\n                'background': '#000',\r\n                'border-radius': '1px',\r\n                'width': '2px',\r\n                'height': '16px',\r\n                'top': '2px',\r\n                'left': '9px',\r\n                'transform': 'rotate(45deg)',\r\n            },\r\n            toString: renderCss,\r\n        };\r\n        let closeCssAfter = {\r\n            styles: {\r\n                'content': '\"\"',\r\n                'display': 'block',\r\n                'position': 'absolute',\r\n                'background': '#000',\r\n                'border-radius': '1px',\r\n                'width': '2px',\r\n                'height': '16px',\r\n                'top': '2px',\r\n                'left': '9px',\r\n                'transform': 'rotate(-45deg)',\r\n            },\r\n            toString: renderCss,\r\n        };\r\n        let bodyCss = {\r\n            styles: {\r\n                'overflow': 'hidden',\r\n            },\r\n            toString: renderCss,\r\n        };\r\n        let cleantalkModalStyle = document.createElement( 'style' );\r\n        cleantalkModalStyle.setAttribute( 'id', 'cleantalk-modal-styles' );\r\n        cleantalkModalStyle.innerHTML = 'body.cleantalk-modal-opened{' + bodyCss + '}';\r\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-overlay{' + overlayCss + '}';\r\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-close{' + closeCss + '}';\r\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-close:before{' + closeCssBefore + '}';\r\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-close:after{' + closeCssAfter + '}';\r\n        document.body.append( cleantalkModalStyle );\r\n        /* Cleantalk Modal CSS end */\r\n\r\n        let overlay = document.createElement( 'div' );\r\n        overlay.setAttribute( 'id', 'cleantalk-modal-overlay' );\r\n        document.body.append( overlay );\r\n\r\n        document.body.classList.add( 'cleantalk-modal-opened' );\r\n\r\n        let inner = document.createElement( 'div' );\r\n        inner.setAttribute( 'id', 'cleantalk-modal-inner' );\r\n        inner.setAttribute( 'style', innerCss );\r\n        overlay.append( inner );\r\n\r\n        let close = document.createElement( 'div' );\r\n        close.setAttribute( 'id', 'cleantalk-modal-close' );\r\n        inner.append( close );\r\n\r\n        let content = document.createElement( 'div' );\r\n        if ( this.loaded ) {\r\n            const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\r\n            const serviceContentRegex = /.*\\/inc/g;\r\n            if (serviceContentRegex.test(this.loaded) || this.ignoreURLConvert) {\r\n                content.innerHTML = this.loaded;\r\n            } else {\r\n                content.innerHTML = this.loaded.replace(urlRegex, '<a href=\"$1\" target=\"_blank\">$1</a>');\r\n            }\r\n        } else {\r\n            content.innerHTML = 'Loading...';\r\n            // @ToDo Here is hardcoded parameter. Have to get this from a 'data-' attribute.\r\n            this.load( 'get_options_template' );\r\n        }\r\n        content.setAttribute( 'id', 'cleantalk-modal-content' );\r\n        inner.append( content );\r\n\r\n        this.opened = true;\r\n    },\r\n\r\n    close: function() {\r\n        document.body.classList.remove( 'cleantalk-modal-opened' );\r\n        document.getElementById( 'cleantalk-modal-overlay' ).remove();\r\n        document.getElementById( 'cleantalk-modal-styles' ).remove();\r\n        document.dispatchEvent(\r\n            new CustomEvent( 'cleantalkModalClosed', {\r\n                bubbles: true,\r\n            } ),\r\n        );\r\n    },\r\n\r\n};\r\n\r\n/* Cleantalk Modal helpers */\r\ndocument.addEventListener('click', function( e ) {\r\n    if ( e.target && (e.target.id === 'cleantalk-modal-overlay' || e.target.id === 'cleantalk-modal-close') ) {\r\n        cleantalkModal.close();\r\n    }\r\n});\r\ndocument.addEventListener('cleantalkModalContentLoaded', function( e ) {\r\n    if ( cleantalkModal.opened && cleantalkModal.loaded ) {\r\n        document.getElementById( 'cleantalk-modal-content' ).innerHTML = cleantalkModal.loaded;\r\n    }\r\n});\r\n"],"names":["let","cleantalkModal","loaded","loading","opened","opening","ignoreURLConvert","load","action","callback","this","result","data","params","obj","document","dispatchEvent","CustomEvent","bubbles","apbct_admin_sendAJAX","apbct_public_sendAJAX","notJson","open","renderCss","cssStr","key","styles","overlayCss","z-index","position","top","left","width","height","background","display","justify-content","align-items","toString","innerCss","padding","border","border-radius","box-shadow","closeCss","cursor","right","box-sizing","closeCssBefore","content","transform","closeCssAfter","bodyCss","overflow","cleantalkModalStyle","createElement","overlay","setAttribute","innerHTML","body","append","inner","classList","add","close","urlRegex","test","replace","remove","getElementById","addEventListener","e","target","id"],"mappings":"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"}